(this.webpackJsonpanotherpano=this.webpackJsonpanotherpano||[]).push([[0],{109:function(t,e,i){},114:function(t,e,i){var n={"./city-pan.jpeg":61,"./nwq0ch7-360-panorama-office-interior.jpeg":115,"./pixexid-0dd33da2-d75b-43a6-b960-873085130d0f.jpeg":116,"./pixexid-cae8e9c2-31bf-45a8-92c5-92e8fc7fe3e4.jpeg":117,"./pixexid-eee4a7fe-3715-4f06-ad24-17633cd2245c.jpeg":118,"./pixexid-fbea04c4-40ac-4817-8e93-8921b23aa342.jpeg":119,"./qfl0cv2-360-panorama-lombard-street-san-francisco.jpeg":120,"./tj110cok-360-panorama-kitchen.jpeg":121,"./tu09tpc-a-large-bed-in-a-room.jpeg":122};function s(t){var e=o(t);return i(e)}function o(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=o,t.exports=s,s.id=114},115:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/nwq0ch7-360-panorama-office-interior.de441855.jpeg"},116:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/pixexid-0dd33da2-d75b-43a6-b960-873085130d0f.40324b46.jpeg"},117:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/pixexid-cae8e9c2-31bf-45a8-92c5-92e8fc7fe3e4.5966a102.jpeg"},118:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/pixexid-eee4a7fe-3715-4f06-ad24-17633cd2245c.8ff3cd33.jpeg"},119:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/pixexid-fbea04c4-40ac-4817-8e93-8921b23aa342.be22bed6.jpeg"},120:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/qfl0cv2-360-panorama-lombard-street-san-francisco.1f46be57.jpeg"},121:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/tj110cok-360-panorama-kitchen.70e0196a.jpeg"},122:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/tu09tpc-a-large-bed-in-a-room.f4e8def6.jpeg"},260:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/circle.9ee1d232.png"},261:function(t,e,i){"use strict";i.r(e);var n,s,o,a,r,c,h,l,d,u,p,m,v,g,f,A,b,y,E,w,M,C,O,I,x,L,R,S,j,T,D,k,P=i(0),H=i(93),U=i.n(H),N=(i(109),i(104)),B=i(4),_=i(5),V=i(6),F=i(3),z=(V.b.div(n||(n=Object(_.a)(["\n  border-radius: 1rem;\n  box-shadow: 0 0 20px rgba(222, 222, 222, 0.9);\n  overflow: hidden;\n  height: 20vh;\n  display: grid;\n  grid-template-rows: 1.5fr 1fr;\n  cursor: pointer;\n  border: 2px solid #ddd;\n  background: linear-gradient(180deg, #fafafa, #fdfdfd);\n  &:hover img {\n    animation: panothumb 4s ease-in-out infinite alternate;\n  }\n  @keyframes panothumb {\n    from {\n      left: 0;\n    }\n    to {\n      left: -100%;\n    }\n  }\n"]))),V.b.div(s||(s=Object(_.a)(["\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n  border-radius: 0 0 5px 5px;\n"]))),V.b.img(o||(o=Object(_.a)(["\n  object-fit: fill;\n  width: 200%;\n  position: absolute;\n  top: -80%;\n  transition: all 2s ease;\n"]))),V.b.h4(a||(a=Object(_.a)(["\n  color: #333;\n"]))),V.b.div(r||(r=Object(_.a)(["\n  padding: 1rem;\n"]))),V.b.p(c||(c=Object(_.a)(["\n  font-weight: 500;\n"]))),i(9)),W=(V.b.section(h||(h=Object(_.a)(["\n  border-radius: 1rem;\n  height: 40vh;\n  overflow: hidden;\n  position: relative;\n  margin-bottom: 2rem;\n"]))),V.b.div(l||(l=Object(_.a)(['\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  & h3 {\n    color: #fafafa;\n    font-size: 4rem;\n    position: relative;\n    text-shadow: 0 0 20px #333;\n  }\n  &::before {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    opacity: 0.5;\n    background-color: #333;\n    content: " ";\n    top: 0;\n    left: 0;\n    z-index: 0;\n  }\n']))),V.b.div(d||(d=Object(_.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n"]))),V.b.div(u||(u=Object(_.a)(["\n  padding: 2rem;\n"]))),V.b.main(p||(p=Object(_.a)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2rem;\n"])))),Q=(V.b.h2(m||(m=Object(_.a)(["\n  padding: 1rem 0;\n  font-size: 2rem;\n"]))),V.b.nav(v||(v=Object(_.a)(["\n    background-color: #fafafa;\n    box-shadow: 0 4px 10px rgba(222,222,222, 0.9);\n    padding: 10px 3rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n"])))),Z=V.b.h3(g||(g=Object(_.a)(["\n    font-family: Inter, sans-serif;\n    font-weight: 700;\n    font-size: 2.5rem;\n    letter-spacing: -2px;\n    cursor: pointer;\n    color: #333;\n"]))),G=V.b.div(f||(f=Object(_.a)(["\n    border-radius: 5px;\n    background-color: #333;\n    padding: 0.6rem 1rem;\n    color: #fafafa;\n"]))),X=function(){var t=Object(B.f)();return Object(F.jsxs)(Q,{children:[Object(F.jsx)(Z,{onClick:function(){return t("/")},children:"panorama."}),Object(F.jsx)(G,{children:Object(F.jsx)("p",{children:"Signed in as Diego Romero"})})]})},Y=Object(V.a)(A||(A=Object(_.a)(["\n    *, *::before, *::after {\n        margin: 0;\n        padding: 0;\n        border: none;\n        box-sizing: border-box;\n    }\n\n    body {\n        font-family: Inter;\n        background-color: #f9f9f9;\n        overflow-y: scroll;\n        overflow-x: hidden;\n    }\n"]))),q=i(57),J=i.n(q),K=i(97),$=i(24),tt=i(8),et=i(98),it=i.n(et),nt=i(11),st=i(103),ot=V.b.div(b||(b=Object(_.a)(["\n  border-radius: 1rem;\n  box-shadow: 0 0 20px rgba(222, 222, 222, 0.9);\n  overflow: hidden;\n  display: grid;\n  border: 2px solid #f0117a;\n"]))),at=V.b.h4(y||(y=Object(_.a)(["\n  color: #333;\n"]))),rt=V.b.div(E||(E=Object(_.a)(["\n  padding: 10px;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),ct=function(t){var e=t.infospot,i=t.deleteInfo,n=t.quantity;return Object(F.jsx)(ot,{children:Object(F.jsxs)(rt,{children:[Object(F.jsx)(at,{children:Object(F.jsx)("p",{children:"Infospot #".concat(n+1)})}),Object(F.jsx)("button",{type:"button",style:{cursor:"pointer",background:"transparent"},onClick:function(){return i(e.uuid)},children:Object(F.jsx)("svg",{style:{width:24,height:24},viewBox:"0 0 24 24",children:Object(F.jsx)("path",{fill:"red",d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z"})})})]})})},ht=V.b.main(w||(w=Object(_.a)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  box-sizing: border-box;\n"]))),lt=V.b.div(M||(M=Object(_.a)(["\n  padding: 2rem 2rem;\n  & h3 {\n    font-weight: 200;\n    font-size: 2rem;\n    margin-bottom: 1rem;\n    letter-spacing: -2px;\n  }\n"]))),dt=Object(V.b)(ht)(C||(C=Object(_.a)(["\n  grid-template-columns: repeat(1, 1fr);\n  max-height: 50vh;\n  overflow-y: scroll;\n"]))),ut=function(t){var e=t.infospots,i=t.deleteInfospot;return console.log(e),Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(lt,{children:Object(F.jsx)(dt,{children:e.map((function(t,e){return Object(F.jsx)(ct,{deleteInfo:i,infospot:t,quantity:e},t.uuid)}))})})})},pt=V.b.div(O||(O=Object(_.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  transition: all 0.5s ease;\n  transform: scale(50%);\n  transform-origin: bottom left;\n  opacity: 0.5;\n  :hover {\n    transform: scale(100%);\n    opacity: 1;\n  }\n"]))),mt=V.b.div(I||(I=Object(_.a)(["\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  border: 2px solid #333;\n  background-color: #f02211;\n  top: ","px;\n  left: ","px;\n  box-shadow: 5px 1px 10px #000;\n  :hover {\n    cursor: pointer;\n  }\n"])),(function(t){return t.top}),(function(t){return t.left})),vt=function(t){var e=t.handleClick,i=Object(P.useState)([{x:60,y:200},{x:60,y:50},{x:100,y:220},{x:230,y:200},{x:120,y:20},{x:400,y:300},{x:500,y:300}]),n=Object(tt.a)(i,2),s=n[0];n[1];return Object(F.jsxs)(pt,{children:[Object(F.jsx)("img",{src:"https://www.verisk.com/contentassets/075f440842ac4502ad5023697c4d446d/aerial-imagery-property-survey.jpg?v=0"}),s.map((function(t){return Object(F.jsx)(mt,{onClick:e,top:t.y,left:t.x})}))]})},gt=[new z.ImagePanorama("https://pchen66.github.io/Panolens/examples/asset/textures/equirectangular/tunnel.jpg"),new z.ImagePanorama("https://pchen66.github.io/Panolens/examples/asset/textures/equirectangular/sunset.jpg"),new z.ImagePanorama("https://pchen66.github.io/Panolens/examples/asset/textures/equirectangular/road.jpg"),new z.ImagePanorama("https://i.imgur.com/bmMcne9.jpg"),new z.ImagePanorama("https://i.imgur.com/02bDVAA.jpg"),new z.ImagePanorama("https://i.imgur.com/b7iEM1x.jpg")],ft=V.b.div(x||(x=Object(_.a)(["\n  border-radius: 1rem;\n  flex: 6;\n  box-shadow: 0 0 20px #3333334a;\n  margin: 0 auto;\n  overflow: hidden;\n  margin: 2rem 0 0 2rem;\n"]))),At=V.b.div(L||(L=Object(_.a)(["\n  padding: 1rem 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  & h1 {\n    font-weight: 600;\n    letter-spacing: -2px;\n  }\n"]))),bt=V.b.div(R||(R=Object(_.a)(["\n  padding: 2rem 2rem;\n  & h4 {\n    text-align: center;\n    font-weight: 200;\n    font-size: 1.2rem;\n    margin: 0;\n  }\n"]))),yt=V.b.div(S||(S=Object(_.a)(["\n  border-radius: 10px;\n  height: 80vh;\n  overflow: hidden;\n  position: relative;\n"]))),Et=V.b.div(j||(j=Object(_.a)(["\n  display: grid;\n  grid-template-columns: 80vw 20vw;\n"]))),wt=Object(V.b)(W)(T||(T=Object(_.a)(["\n  grid-template-columns: repeat(1, 1fr);\n"]))),Mt=Object(V.b)(st.a)(D||(D=Object(_.a)(['\n  width: 100% !important;\n  *,\n  *::before,\n  *::after {\n    font-family: "Segoe UI";\n  }\n']))),Ct=V.b.button(k||(k=Object(_.a)(['\n  background-color: #fafafa;\n  color: #333;\n  padding: 0.5rem;\n  border: 1px solid #333;\n  cursor: pointer;\n  font-family: "Segoe UI";\n  flex: 1;\n  border-radius: 5px;\n  :hover {\n    background-color: #d0d0d0;\n  }\n  &.selected {\n    background-color: #333;\n    color: #fafafa;\n  }\n']))),Ot=new z.ImagePanorama("https://drive.google.com/uc?export=view&id=1vfp5U50s7PnUXUcXEKeXDwSE4fLKfprX"),It=new z.ImagePanorama("https://i.imgur.com/EcefCFb.jpg"),xt=function(){var t=Object(P.useRef)(),e=Object(P.useState)(),n=Object(tt.a)(e,2),s=n[0],o=n[1],a=Object(P.useState)(),r=Object(tt.a)(a,2),c=r[0],h=r[1],l=Object(P.useState)("#FAFAFA"),d=Object(tt.a)(l,2),u=d[0],p=d[1],m=Object(P.useState)(!0),v=Object(tt.a)(m,2),g=v[0],f=(v[1],Object(P.useState)(!0)),A=Object(tt.a)(f,2),b=A[0],y=A[1],E=Object(P.useState)([]),w=Object(tt.a)(E,2),M=w[0],C=w[1],O=Object(P.useState)([]),I=Object(tt.a)(O,2),x=(I[0],I[1]),L=Object(P.useState)("infospot"),R=Object(tt.a)(L,2),S=R[0],j=R[1],T=Object(P.useState)(),D=Object(tt.a)(T,2),k=D[0],H=D[1];function U(){var t;if(s.isEditing){var e=new z.Hotspot(150,i(260).default),n=s.getPosition();e.position.set(-n.x,parseFloat(n.y),n.z),e.position.addScalar(2);var o=new nt.ShaderMaterial({uniforms:{s:{type:"f",value:-.5},b:{type:"f",value:1},p:{type:"f",value:3},glowColor:{type:"c",value:new nt.Color(15790320)}},vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,side:nt.FrontSide,blending:nt.NormalBlending,transparent:!0,depthFunc:nt.AlwaysDepth}),a=new nt.CylinderGeometry(5,5,20,32),r=new nt.Mesh(a,o);r.renderOrder=-10,r.scale.set(180,10,180),(t=r.position).set.apply(t,Object($.a)(Object.values(e.position))),s.scene.add(r),e.setContainer(s.renderer.domElement),e.addEventListener("click",(function(){console.log("CLICKED ON HOTSPOT"),console.log(b),console.log(y(!b))})),s.panorama.add(e),s.update(),s.panorama.toggleInfospotVisibility(!0),x((function(t){return[].concat(Object($.a)(t),[e])}))}}function N(){if(s.isEditing){var t=new z.Infospot(600,i(92).default),e=s.panorama.children.filter((function(t){return t instanceof z.Infospot})).length+1,n=s.getPosition();t.position.set(n.x,n.y,n.z);var o=document.createElement("div"),a=document.createElement("main");a.style.transform="translateY(120px)",a.style.backgroundColor="white",a.style.padding="20px",a.style.borderRadius="5px",a.style.boxShadow="0 0 10px #3333337a";var r=document.createElement("h2");r.textContent="Infospot #".concat(e);var c=document.createElement("p");c.textContent="This is an example text. Built from scratch in HTML.",a.appendChild(r),a.appendChild(c),o.appendChild(a),t.addHoverElement(o),s.panorama.add(t),s.update(),s.panorama.toggleInfospotVisibility(!0),console.log(t),C((function(e){return[].concat(Object($.a)(e),[t])}))}}return Object(P.useEffect)((function(){var e=new z.Viewer({container:t.current,controlBar:!1,autoRotate:!1,dampingFactor:0,autoHideInfospot:!1,output:"console"});e.isEditing=g,window.scrollTo(0,0),e.add.apply(e,[It,Ot].concat(Object($.a)(gt)));var i=new nt.AmbientLight(4210752);e.scene.add(i),o(e),h(e.getControl())}),[]),Object(P.useEffect)((function(){[4,7].includes(u.length)&&it()({image:i(92).default,colors:{type:"hex",targetColor:"#000000",replaceColor:u}},function(){var t=Object(K.a)(J.a.mark((function t(e,i){var n,s,o;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getBase64Async("image/png");case 2:n=t.sent,s=new nt.Texture,(o=new Image).src=n,o.onload=function(){M.forEach((function(t){s.image=o,s.needsUpdate=!0,t.material.map=s,t.material.needsUpdate=!0}))};case 7:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}())}),[u,M]),Object(P.useEffect)((function(){s&&(s.panorama._listeners.click[1]="infospot"===S?N.bind(s):U.bind(s))}),[s,g,S]),Object(P.useEffect)((function(){c&&(s.tweenControlCenter(new nt.Vector3(10,-2,0),0),s.setCameraFov(70),c.rotateSpeed=-.3,s.update())}),[c]),console.log(M),Object(F.jsxs)(Et,{children:[Object(F.jsxs)(ft,{children:[Object(F.jsx)(At,{children:Object(F.jsx)("h1",{children:"Pano Builder by Diego Romero"})}),Object(F.jsx)(yt,{ref:t,children:Object(F.jsx)(vt,{handleClick:function(){var t;do{t=Math.floor(Math.random()*gt.length)}while(t===k);H(t),s.setPanorama(gt[t])}})})]}),Object(F.jsx)(bt,{children:Object(F.jsxs)(wt,{children:[Object(F.jsxs)("div",{style:{display:"flex",gap:10},children:[Object(F.jsx)(Ct,{className:"hotspot"===S&&"selected",onClick:function(){return j("hotspot")},children:"Hotspot"}),Object(F.jsx)(Ct,{className:"infospot"===S&&"selected",onClick:function(){return j("infospot")},children:"Infospot"})]}),Object(F.jsx)("h4",{children:"Infospot colors"}),Object(F.jsx)(Mt,{color:u,onChangeComplete:function(t){return p(t.hex)}}),Object(F.jsx)(ut,{infospots:M,deleteInfospot:function(t){s.panorama.children=s.panorama.children.filter((function(e){return e.uuid!==t})),C((function(e){return e.filter((function(e){return e.uuid!==t}))}))}})]})})]})};var Lt=function(){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Y,{}),Object(F.jsxs)(N.a,{children:[Object(F.jsx)(X,{}),Object(F.jsx)(B.c,{children:Object(F.jsx)(B.a,{path:"/",element:Object(F.jsx)(xt,{})})})]})]})};U.a.render(Object(F.jsx)(Lt,{}),document.getElementById("root"))},61:function(t,e,i){"use strict";i.r(e),e.default=i.p+"static/media/city-pan.7837cce3.jpeg"},9:function(t,e,i){(function(t){!function(e,i){"use strict";var n="0.12.1",s={three:"^0.105.2"},o=n.split(".")[1],a=n,r=s.three.split(".")[1],c=s.three.replace(/[^0-9.]/g,""),h={ORBIT:0,DEVICEORIENTATION:1},l={UNKNOWN:0,NORMAL:1,CARDBOARD:2,STEREO:3},d={Info:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADBklEQVR42u2bP08UQRiHnzFaSYCI/xoksdBIqGwIiYWRUBISExpCQ0ej38FWOmlIKKhoMPEbaCxsrrHiYrQgOSlQEaICrT+LHSPZzNzt3s3c3Hn7lHvLzvv82L2dm30XKioqKgYY062BJF0HpoA7wARwBbhsPz4DjoEG8AnYNcZ8Sx1Op8IXJM1KWpdUV3nq9m9nJV1I7VNGfEzSM0mNNqR9NOwxx1L7NRMflbQm6SSgeJ4TO8Zoat+8/LKkg4jieQ4kLaf2RtKwpJ0uiufZkTScSn5S0l5C+b/sSZrstvyMpKPU5uc4kjTTjkvpeYCkaeA1/+7hvcIZMGuMqUULQNIU8Aa4ltrWwyHwyBizGzwASSPAe+B2assW7AH3jTE/i+xcZoa12Qfy2Bo3i+5cKABl99zF1GYlWFTBeULLS0DZrOsDcDNggTXgc27bLWA64BhfgHvGmB8dHUXZ1DM0S45xliKMs9bKr+klIOkqsBrwv9JtVq1DewEAT4Ch1BYdMGQdygeg7Df4SmqDAKyoyXpCszPgITCeuvoAjFuX0gE8jljUdv7bCtiOOJ7XpdUZ8L/gdXHOA5QtYH5NXXVgbrgWWn1nwFTqaiPgdPIFcDd1tRFwOl307DwRuZgXwLvctgfA04hjOp18AcReZ6sZY16e3yDpUuQxnU6+S2AkcjEpcDr1zxOXSPgCKLSa0mc4nXwB/EpdbQScTr4AGqmrjYDTyRfAx9TVRsDp5Aug8LJyH+F0cgZg58z11BUHpO5ruGh2G3ybuuqAeF2aBfAqddUB8bq0OgP2U1cegH3aOQOMMb+BrdTVB2DLupQLwLIOnKY26IBT6+ClaQDGmO/ARmqLDtiwDn7HVkcY+EdjNoTlCI+tYhO2iUppm6HKslPUq2qQKHpUe8AFsjaUXuUQWCgqXyoAG8IuME/WkNRrnAHzZfqDSgdgQ6gBc2Td3b3CMTBXtkOsIzTIjZLnQhjcVtlcEIPZLJ0LoVvt8s/Va+3yuSAG84UJRxB98cpM9dJURUVFxSDzBxKde4Lk3/h2AAAAAElFTkSuQmCC",Arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADPklEQVR42u2bMUscQRiG30/SRaJEI1ZKUiRErNIELRUbQYSAnX8hpVUgkDYp0wgWVjYW+QcJaQzYpLojJIXhtDDEKBpj65ti58ixmdmb2ZvZ7+T2AUHudmfmeXf2bnb3O6CmpqZmgJGqOiI5AWAWwEMA0wDuArht3r4CcAagBeAbgIaI/NQOp1fhIZKLJN+SbDKcptl3keSQtk+I+BjJVyRbJaRdtEybY9p+ReKjJN+QvIwonufS9DGq7ZuXXyd5nFA8zzHJdW1vkLxDcrdC8Ty7JO9oyc+QPFCUb3NAcqZq+TmSp9rmHZySnCvjErwOIPkUwHv8+w7vF64ALIrIfrIASM4C+ADgnratgxMACyLSiB4AyREAnwE80LbswgGAJyJy4bNxyApr6wbIw4xxy3djrwCYfeeuaZsFsEbPdULXU4DZqusLgMkEA21P05EEbf8A8FhEzos28pkBLxLKL5s/r/M1kEkz9vKQHGeatf05yfmOfubNa7G5JDle5NhtBjwHMBz5yFwAWBaRT+0XzP8pZsKwcQiH2fX8Ycojb+kzxUw4ZJn7CSQXqpRPHMKCq7+iZJ71Mvdy/DftXSQ6HcJdSDaqPPKW/mPOBO+lcbvzCU35RCFM2PpwnQKzZQfdgfe0dxH5dLA6uQJ4pC2fIASrkyuA6X6QjxyC1ckVQNn7bNHlI4ZgdXIFUObiJJl8pBCsTjGfuIwA2Cv4FN7xbYjkjqsRAHuIePXoCiDF1Zk2VidXAL+1R5sAq5MrgJb2aBNgdXIF8FV7tAmwOrkCCFs73wysTtYATHFCU3vEEWm6Ci6KvgY/ao86Ik6XogDeaY86Ik6XbjPgSHvkEThCwQy45XpDRK5JbgN4GWkgUyR9H65MRQxgW0SunZ5FezK7pfwd8e8MV8UfAPdF5Jdrg8JrAbPjprZFD2wWyQP6j8ZSEufRmGlgQ9umBBvd5IOgbjFUKLu+XnWBhG+rpsFVZGUo/coJgFVf+aAATAgNACvICpL6jSsAKyH1QcEBmBD2ASwhq+7uF84ALIVWiPUEB7lQsiOEwS2VzQUxmMXSuRCqKpd/zX4rl88FMZg/mLAEcSN+MlP/aKqmpqZmkPkL0hSjwOpNKxwAAAAASUVORK5CYII=",FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg==",Setting:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADn0lEQVR42u2bzUsVURjGnyO6CPzAMnTjppAo3LTwH1CqTfaxbeOiRS37A0wXtROFVi1aRBs3LWohSIGbQAQXViBGRhG0UIRKUCpK7q/FnOB2uc6cOXNmRnGe3eW+H8/7zLln3vNxpQoVKlQ4wjBFJAFOSRqX1O7osivpvjHmU1nChBZglvSYLYJbS0EanCvIJzWK+gnsyH34/8OuMaYjb265jwCgz6N4SWq3vodbAEmnS/KtBDgoAgyU5BteAOAkMAPcBroc7PskDWfgN+wyDwBdltMMcDI3tYBnde/pHeARMNTErgd4APzweP834oeN1dMkz5DlsFNn/yyv4kdiSK4At4AO4CqwGaDwRmza2B0210qM7YhrXU59ANAq6bWkwQTTn5KO5fIE0uVYlXTeGLOXFMx1DrjlULwKKN41x6DlnIjEEQCckPRe0okCiguJr5LOGGO+xhm5jICJQ1i8LOeJJKPYEQAMKvrtt5ZdjSf2FM0Fq/sZJI2A6UNcvCz36TiDfUcAcE1SPu/U6Mm8k/TFfu6XdFb5iX3dGPM8lQfwNod3+TowBnQ3yddtv1vPIe+b1JIBiwEJ1IAJ208k5W21trWA+V/5CHAcmAtU/A2P/DcCiTAHHE8tgCVhgLvAXgYCk17Jo/yTGfLuWe7Zd72AC8CWB4n3OAz7mLytNkZabAEXMhfeQKYfWEpJZCxA3rGUOZeA/qDF15FpAz47EvlNk9neI2e3jeWCz0BbmvipNkSMMX8kuSZYM8Z8zyqAjbHmaN5mOeYjgIXrU93MWrxHrNQjrqiDkQMLHwG+OdqF3NN3jeXKzU8AoF1SzdH8XKhJUO7HZDXLMbwAwICkJUULFxe0SbqSVQAbw3Xi7Ze0ZLmGAzAKbHs0JGU1QtvAaIjCW4B7ZOvJy2qFa5a730RPtBiaz0CgnkiZi6F5fBZDVMvho7EhcuS3xJJ2hV9IupgTqaLw0hhzab8vq23xOG/r+LDsKjLgYVzxUnU0ltwK2wDezUyJmEwqXgp/PL4rvxthaeCSI+zxuA10J8ZkWdJNSb2SLkvayKHwDRu71+ZajrG941J8agALDQ3GU/a/IvMkYCPzmCbtLNEVmacNtgs5iP9fYVNEV1Q6Hez7yNZSL+J2SarTcpqiyV2iUkG0IvPFvbz5FbEn+KEk3wMjwMeSfCsBXFBdly9CAPk9ydyffpECuB5tZfVJjaKWueOSfinln6YK4lahQoUKRxd/AcRPGTcQCAUQAAAAAElFTkSuQmCC",ChevronRight:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguNTksMTYuNThMMTMuMTcsMTJMOC41OSw3LjQxTDEwLDZMMTYsMTJMMTAsMThMOC41OSwxNi41OFoiIC8+PC9zdmc+",Check:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDdMOSwxOUwzLjUsMTMuNUw0LjkxLDEyLjA5TDksMTYuMTdMMTkuNTksNS41OUwyMSw3WiIgLz48L3N2Zz4=",ViewIndicator:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0idmlldy1pbmRpY2F0b3IiIGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgdmlld0JveD0iLTIuNSAtMSAzMCAzMCI+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7ZmlsbDpub25lO30uc3Qxe3N0cm9rZS13aWR0aDo2O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCTwvc3R5bGU+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNIDEyLjUgMCBBIDEyLjUgMTIuNSAwIDAgMCAtMTIuNSAwIEEgMTIuNSAxMi41IDAgMCAwIDEyLjUgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0gMTMgMCBMIDEwIDIgTCAxNiAyIFoiPjwvcGF0aD4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNIDIgMCBBIDIgMiAwIDAgMCAtMiAwIEEgMiAyIDAgMCAwIDIgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGlkPSJpbmRpY2F0b3IiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTMsMTUuNSkiPjwvcGF0aD4KCTwvZz4KPC9zdmc+"},u={load:function(t){var e,n,s,o,a,r,c,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};for(var p in i.Cache.enabled=!0,d)d.hasOwnProperty(p)&&t===d[p]&&(c=p);if(void 0!==(e=i.Cache.get(c||t)))return h&&setTimeout((function(){l({loaded:1,total:1}),h(e)}),0),e;a=window.URL||window.webkitURL,r=document.createElementNS("http://www.w3.org/1999/xhtml","img"),i.Cache.add(c||t,r);var m=function(){a.revokeObjectURL(r.src),h(r)};if(0===t.indexOf("data:"))return r.addEventListener("load",m,!1),r.src=t,r;r.crossOrigin=void 0!==this.crossOrigin?this.crossOrigin:"",(n=new window.XMLHttpRequest).open("GET",t,!0),"test"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).npm_lifecycle_event&&(n.onreadystatechange=function(){4===this.readyState&&this.status>=400&&u()}),n.responseType="arraybuffer",n.addEventListener("error",u),n.addEventListener("progress",(function(t){if(t){var e=t.loaded,i=t.total;t.lengthComputable&&l({loaded:e,total:i})}})),n.addEventListener("loadend",(function(t){if(t){var e=t.currentTarget.response;s=new Uint8Array(e),o=new window.Blob([s]),r.addEventListener("load",m,!1),r.src=a.createObjectURL(o)}})),n.send(null)}},p={load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=new i.Texture;return u.load(t,(function(n){o.image=n;var s=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);o.format=s?i.RGBFormat:i.RGBAFormat,o.needsUpdate=!0,e(o)}),n,s),o}},m={load:function(t){var e,n,s,o,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},h=arguments.length>3?arguments[3]:void 0;return e=new i.CubeTexture([]),n=0,s={},o={},t.map((function(t,i){u.load(t,(function(t){e.images[i]=t,6===++n&&(e.needsUpdate=!0,r(e))}),(function(t){for(var e in s[i]={loaded:t.loaded,total:t.total},o.loaded=0,o.total=0,a=0,s)a++,o.loaded+=s[e].loaded,o.total+=s[e].total;a<6&&(o.total=o.total/a*6),c(o)}),h)})),e}};function v(t){var e={video:{width:{ideal:1920},height:{ideal:1080},facingMode:{exact:"environment"}},audio:!1};this.constraints=Object.assign(e,t),this.container=null,this.scene=null,this.element=null,this.devices=[],this.stream=null,this.ratioScalar=1,this.videoDeviceIndex=0}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;this.dpr=window.devicePixelRatio;var s=this.createCanvas(),o=s.canvas,a=s.context,r=new i.SpriteMaterial({color:t,map:this.createCanvasTexture(o)});i.Sprite.call(this,r),this.canvasWidth=o.width,this.canvasHeight=o.height,this.context=a,this.color=t instanceof i.Color?t:new i.Color(t),this.autoSelect=e,this.dwellTime=n,this.rippleDuration=500,this.position.z=-10,this.center.set(.5,.5),this.scale.set(.5,.5,1),this.startTimestamp=null,this.timerId=null,this.callback=null,this.frustumCulled=!1,this.updateCanvasArcByProgress(0)}function f(t,e){return t(e={exports:{}},e.exports),e.exports}v.prototype=Object.assign(Object.create(i.EventDispatcher.prototype),{setContainer:function(t){this.container=t},setScene:function(t){this.scene=t},enumerateDevices:function(){var t=this.devices,e=new Promise((function(e){e(t)}));return t.length>0?e:window.navigator.mediaDevices.enumerateDevices()},switchNextVideoDevice:function(){var t=this.stop.bind(this),e=this.start.bind(this),i=this.setVideDeviceIndex.bind(this),n=this.videoDeviceIndex;this.getDevices("video").then((function(s){t(),++n>=s.length?(i(0),n--):i(n),e(s[n])}))},getDevices:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",e=this.devices,i=function(t){return t.map((function(t){return e.includes(t)||e.push(t),t}))},n=function(e){var i=new RegExp(t,"i");return e.filter((function(t){return i.test(t.kind)}))};return this.enumerateDevices().then(i).then(n)},getUserMedia:function(t){var e=this.setMediaStream.bind(this),i=this.playVideo.bind(this),n=function(t){console.warn("PANOLENS.Media: ".concat(t))};return window.navigator.mediaDevices.getUserMedia(t).then(e).then(i).catch(n)},setVideDeviceIndex:function(t){this.videoDeviceIndex=t},start:function(t){var e=this.constraints,i=this.getUserMedia.bind(this),n=function(n){if(!n||0===n.length)throw Error("no video device found");var s=t||n[0];return e.video.deviceId=s.deviceId,i(e)};return this.element=this.createVideoElement(),this.getDevices().then(n)},stop:function(){var t=this.stream;t&&t.active&&(t.getTracks()[0].stop(),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.element=null,this.stream=null)},setMediaStream:function(t){this.stream=t,this.element.srcObject=t,this.scene&&(this.scene.background=this.createVideoTexture()),window.addEventListener("resize",this.onWindowResize.bind(this))},playVideo:function(){var t=this.element;t&&(t.play(),this.dispatchEvent({type:"play"}))},pauseVideo:function(){var t=this.element;t&&(t.pause(),this.dispatchEvent({type:"pause"}))},createVideoTexture:function(){var t=this.element,e=new i.VideoTexture(t);return e.generateMipmaps=!1,e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.format=i.RGBFormat,e.center.set(.5,.5),t.addEventListener("canplay",this.onWindowResize.bind(this)),e},createVideoElement:function(){var t=this.dispatchEvent.bind(this),e=document.createElement("video"),i=function(){return t({type:"canplay"})};return e.setAttribute("autoplay",""),e.setAttribute("muted",""),e.setAttribute("playsinline",""),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.objectPosition="center",e.style.objectFit="cover",e.style.display=this.scene?"none":"",e.addEventListener("canplay",i),e},onWindowResize:function(){if(this.element&&this.element.videoWidth&&this.element.videoHeight&&this.scene){var t=this.container,e=t.clientWidth,i=t.clientHeight,n=this.scene.background,s=this.element,o=s.videoWidth,a=s.videoHeight/o*(this.container?e/i:1)*this.ratioScalar;e>i?n.repeat.set(a,1):n.repeat.set(1,1/a)}}}),g.prototype=Object.assign(Object.create(i.Sprite.prototype),{constructor:g,setColor:function(t){this.material.color.copy(t instanceof i.Color?t:new i.Color(t))},createCanvasTexture:function(t){var e=new i.CanvasTexture(t);return e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.generateMipmaps=!1,e},createCanvas:function(){var t=32,e=32,i=document.createElement("canvas"),n=i.getContext("2d"),s=this.dpr;return i.width=t*s,i.height=e*s,n.scale(s,s),n.shadowBlur=5,n.shadowColor="rgba(200,200,200,0.9)",{canvas:i,context:n}},updateCanvasArcByProgress:function(t){var e=this.context,i=this.canvasWidth,n=this.canvasHeight,s=this.material,o=this.dpr,a=t*Math.PI*2,r=this.color.getStyle(),c=.5*i/o,h=.5*n/o,l=3;e.clearRect(0,0,i,n),e.beginPath(),0===t?(e.arc(c,h,i/16,0,2*Math.PI),e.fillStyle=r,e.fill()):(e.arc(c,h,i/4-l,-Math.PI/2,-Math.PI/2+a),e.strokeStyle=r,e.lineWidth=l,e.stroke()),e.closePath(),s.map.needsUpdate=!0},ripple:function(){var t=this,e=this.context,i=this.canvasWidth,n=this.canvasHeight,s=this.material,o=this.rippleDuration,a=performance.now(),r=this.color,c=this.dpr,h=.5*i/c,l=.5*n/c,d=function d(){var u=window.requestAnimationFrame(d),p=(performance.now()-a)/o,m=1-p>0?1-p:0,v=p*i*.5/c;e.clearRect(0,0,i,n),e.beginPath(),e.arc(h,l,v,0,2*Math.PI),e.fillStyle="rgba(".concat(255*r.r,", ").concat(255*r.g,", ").concat(255*r.b,", ").concat(m,")"),e.fill(),e.closePath(),p>=1&&(window.cancelAnimationFrame(u),t.updateCanvasArcByProgress(0),t.dispatchEvent({type:"reticle-ripple-end"})),s.map.needsUpdate=!0};this.dispatchEvent({type:"reticle-ripple-start"}),d()},show:function(){this.visible=!0},hide:function(){this.visible=!1},start:function(t){this.autoSelect&&(this.dispatchEvent({type:"reticle-start"}),this.startTimestamp=performance.now(),this.callback=t,this.update())},end:function(){this.startTimestamp&&(window.cancelAnimationFrame(this.timerId),this.updateCanvasArcByProgress(0),this.callback=null,this.timerId=null,this.startTimestamp=null,this.dispatchEvent({type:"reticle-end"}))},update:function(){this.timerId=window.requestAnimationFrame(this.update.bind(this));var t=(performance.now()-this.startTimestamp)/this.dwellTime;this.updateCanvasArcByProgress(t),this.dispatchEvent({type:"reticle-update",progress:t}),t>=1&&(window.cancelAnimationFrame(this.timerId),this.callback&&this.callback(),this.end(),this.ripple())}});var A=f((function(e,i){var n=function(){this._tweens={},this._tweensAddedDuringUpdate={}};n.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:s.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var o=this._tweens[i[n]];o&&!1===o.update(t)&&(o._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var s=new n;s.Group=n,s._nextId=0,s.nextId=function(){return s._nextId++},"undefined"===typeof self&&"undefined"!==typeof t&&t.hrtime?s.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?s.now=self.performance.now.bind(self.performance):void 0!==Date.now?s.now=Date.now:s.now=function(){return(new Date).getTime()},s.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=s.Easing.Linear.None,this._interpolationFunction=s.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||s,this._id=s.nextId()},s.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"===typeof t?s.now()+parseFloat(t):t:s.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array===!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[e]){var s=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,n):("string"===typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?s+parseFloat(o):parseFloat(o)),"number"===typeof o&&(this._object[e]=s+(o-s)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"===typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var r=0,c=this._chainedTweens.length;r<c;r++)this._chainedTweens[r].start(this._startTime+this._duration);return!1}return!0}},s.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-s.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*s.Easing.Bounce.In(2*t):.5*s.Easing.Bounce.Out(2*t-1)+.5}}},s.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),a=s.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],n):e>1?a(t[i],t[i-1],i-n):a(t[o],t[o+1>i?i:o+1],n-o)},Bezier:function(t,e){for(var i=0,n=t.length-1,o=Math.pow,a=s.Interpolation.Utils.Bernstein,r=0;r<=n;r++)i+=o(1-e,n-r)*o(e,r)*t[r]*a(n,r);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),a=s.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(o=Math.floor(n=i*(1+e))),a(t[(o-1+i)%i],t[o],t[(o+1)%i],t[(o+2)%i],n-o)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(a(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):a(t[o?o-1:0],t[o],t[i<o+1?i:o+1],t[i<o+2?i:o+2],n-o)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=s.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){var t=[1];return function(e){var i=1;if(t[e])return t[e];for(var n=e;n>1;n--)i*=n;return t[e]=i,i}}(),CatmullRom:function(t,e,i,n,s){var o=.5*(i-t),a=.5*(n-e),r=s*s;return(2*e-2*i+o+a)*(s*r)+(-3*e+3*i-2*o-a)*r+o*s+e}}},e.exports=s}));function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,s=500,o=1.3;e=e||d.Info,i.Sprite.call(this),this.type="infospot",this.animated=void 0===n||n,this.isHovering=!1,this.frustumCulled=!1,this.element=null,this.toPanorama=null,this.cursorStyle="pointer",this.mode=l.NORMAL,this.scale.set(t,t,1),this.rotation.y=Math.PI,this.container=null,this.originalRaycast=this.raycast,this.HANDLER_FOCUS=null,this.material.side=i.DoubleSide,this.material.depthTest=!1,this.material.transparent=!0,this.material.opacity=0,this.scaleUpAnimation=new A.Tween,this.scaleDownAnimation=new A.Tween;var a=function(e){if(this.material){var n=e.image.width/e.image.height,a=new i.Vector3;e.image.width=e.image.naturalWidth||64,e.image.height=e.image.naturalHeight||64,this.scale.set(n*t,t,1),a.copy(this.scale),this.scaleUpAnimation=new A.Tween(this.scale).to({x:a.x*o,y:a.y*o},s).easing(A.Easing.Elastic.Out),this.scaleDownAnimation=new A.Tween(this.scale).to({x:a.x,y:a.y},s).easing(A.Easing.Elastic.Out),this.material.map=e,this.material.needsUpdate=!0}}.bind(this);this.showAnimation=new A.Tween(this.material).to({opacity:1},s).onStart(this.enableRaycast.bind(this,!0)).easing(A.Easing.Quartic.Out),this.hideAnimation=new A.Tween(this.material).to({opacity:.9},s).onStart(this.enableRaycast.bind(this,!1)).easing(A.Easing.Quartic.Out),this.addEventListener("click",this.onClick),this.addEventListener("hover",this.onHover),this.addEventListener("hoverenter",this.onHoverStart),this.addEventListener("hoverleave",this.onHoverEnd),this.addEventListener("panolens-dual-eye-effect",this.onDualEyeEffect),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("dismiss",this.onDismiss),this.addEventListener("panolens-infospot-focus",this.setFocusMethod),p.load(e,a)}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,s=500,o=1.3;e=e||d.Info,i.Mesh.call(this),this.type="infospot",this.animated=void 0===n||n,this.isHovering=!1,this.castShadow=!0,this.frustumCulled=!1,this.element=null,this.toPanorama=null,this.cursorStyle="pointer",this.mode=l.NORMAL,this.scale.set(t,t,t),this.rotation.y=Math.PI,this.container=null,this.originalRaycast=this.raycast,this.HANDLER_FOCUS=null,this.material.side=i.DoubleSide,this.material.transparent=!0,this.material.opacity=0,this.scaleUpAnimation=new A.Tween,this.scaleDownAnimation=new A.Tween;var a=function(e){if(this.material){var n=e.image.width/e.image.height,a=new i.Vector3;e.image.width=e.image.naturalWidth||64,e.image.height=e.image.naturalHeight||64,this.scale.set(n*t,.1,n*t),a.copy(this.scale),this.scaleUpAnimation=new A.Tween(this.scale).to({x:a.x*o,y:10,z:a.z*o},s).easing(A.Easing.Elastic.Out),this.scaleDownAnimation=new A.Tween(this.scale).to({x:a.x,y:a.y,z:a.z},s).easing(A.Easing.Elastic.Out),this.geometry=new i.CylinderGeometry(5,5,0,32),this.geometry.translate(0,.5,0),this.material=new i.MeshBasicMaterial({map:e,color:"white",transparent:!0}),this.material.depthFunc=i.AlwaysDepth,this.material.needsUpdate=!0}}.bind(this);this.showAnimation=new A.Tween(this.material).to({opacity:1},s).onStart(this.enableRaycast.bind(this,!0)).easing(A.Easing.Quartic.Out),this.hideAnimation=new A.Tween(this.material).to({opacity:.9},s).onStart(this.enableRaycast.bind(this,!1)).easing(A.Easing.Quartic.Out),this.addEventListener("click",this.onClick),this.addEventListener("hover",this.onHover),this.addEventListener("hoverenter",this.onHoverStart),this.addEventListener("hoverleave",this.onHoverEnd),this.addEventListener("panolens-dual-eye-effect",this.onDualEyeEffect),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("dismiss",this.onDismiss),this.addEventListener("panolens-infospot-focus",this.setFocusMethod),p.load(e,a)}function E(t){t||console.warn("PANOLENS.Widget: No container specified"),i.EventDispatcher.call(this),this.DEFAULT_TRANSITION="all 0.27s ease",this.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),this.PREVENT_EVENT_HANDLER=function(t){t.preventDefault(),t.stopPropagation()},this.container=t,this.barElement=null,this.fullscreenElement=null,this.videoElement=null,this.settingElement=null,this.mainMenu=null,this.activeMainItem=null,this.activeSubMenu=null,this.mask=null}function w(t,e){i.Mesh.call(this,t,e),this.type="panorama",this.ImageQualityLow=1,this.ImageQualityFair=2,this.ImageQualityMedium=3,this.ImageQualityHigh=4,this.ImageQualitySuperHigh=5,this.animationDuration=1e3,this.defaultInfospotSize=350,this.container=void 0,this.loaded=!1,this.linkedSpots=[],this.isInfospotVisible=!1,this.linkingImageURL=void 0,this.linkingImageScale=void 0,this.material.side=i.BackSide,this.material.opacity=0,this.material.transparent=1,this.scale.x*=-1,this.renderOrder=-1,this.active=!1,this.infospotAnimation=new A.Tween(this).to({},this.animationDuration/2),this.addEventListener("load",this.fadeIn.bind(this)),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("click",this.onClick.bind(this)),this.setupTransitions()}function M(t,e,n){var s=1e4,o=e||new i.SphereBufferGeometry(s,60,40),a=n||new i.MeshBasicMaterial({opacity:0,transparent:!0});a.transparent=1,w.call(this,o,a),w.renderOrder=-10,this.src=t,console.log(t),this.radius=s}function C(){var t=new i.BufferGeometry,e=new i.MeshBasicMaterial({color:0,opacity:0,transparent:!0});t.addAttribute("position",new i.BufferAttribute(new Float32Array,1)),w.call(this,t,e)}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=1e4,n=Object.assign({},i.ShaderLib.cube),s=new i.BoxBufferGeometry(e,e,e),o=new i.ShaderMaterial({fragmentShader:n.fragmentShader,vertexShader:n.vertexShader,uniforms:n.uniforms,side:i.BackSide,transparent:!0});w.call(this,s,o),this.images=t,this.edgeLength=e,this.material.uniforms.opacity.value=0}function I(){for(var t=[],e=0;e<6;e++)t.push(d.WhiteTile);O.call(this,t)}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=5e3,s=new i.SphereBufferGeometry(n,60,40),o=new i.MeshBasicMaterial({opacity:0,transparent:!0});w.call(this,s,o),this.src=t,this.options={videoElement:document.createElement("video"),loop:!0,muted:!0,autoplay:!1,playsinline:!0,crossOrigin:"anonymous"},Object.assign(this.options,e),this.videoElement=this.options.videoElement,this.videoProgress=0,this.radius=n,this.addEventListener("leave",this.pauseVideo.bind(this)),this.addEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.addEventListener("video-toggle",this.toggleVideo.bind(this)),this.addEventListener("video-time",this.setVideoCurrentTime.bind(this))}function L(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._parameters=e,this._zoom=null,this._panoId=null,this._panoClient=new google.maps.StreetViewService,this._count=0,this._total=0,this._canvas=[],this._ctx=[],this._wc=0,this._hc=0,this.result=null,this.rotation=0,this.copyright="",this.onSizeChange=null,this.onPanoramaLoad=null,this.levelsW=[1,2,4,7,13,26],this.levelsH=[1,1,2,4,7,13],this.widths=[416,832,1664,3328,6656,13312],this.heights=[416,416,832,1664,3328,6656],this.maxW=6656,this.maxH=6656;try{var i=document.createElement("canvas");(t=i.getContext("experimental-webgl"))||(t=i.getContext("webgl"))}catch(n){}this.maxW=Math.max(t.getParameter(t.MAX_TEXTURE_SIZE),this.maxW),this.maxH=Math.max(t.getParameter(t.MAX_TEXTURE_SIZE),this.maxH)}function R(t,e){M.call(this),this.panoId=t,this.gsvLoader=null,this.loadRequested=!1,this.setupGoogleMapAPI(e)}b.prototype=Object.assign(Object.create(i.Sprite.prototype),{constructor:b,setContainer:function(t){var e;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&this.element&&e.appendChild(this.element),this.container=e},getContainer:function(){return this.container},onClick:function(t){this.element&&this.getContainer()&&(this.onHoverStart(t),this.lockHoverElement())},onDismiss:function(){this.element&&(this.unlockHoverElement(),this.onHoverEnd())},onHover:function(){},onHoverStart:function(t){if(this.getContainer()){var e=this.cursorStyle||(this.mode===l.NORMAL?"pointer":"default"),i=this.scaleDownAnimation,n=this.scaleUpAnimation,s=this.element;if(this.isHovering=!0,this.container.style.cursor=e,this.animated&&(i.stop(),n.start()),s&&t.mouseEvent.clientX>=0&&t.mouseEvent.clientY>=0){var o=s.left,a=s.right,r=s.style;this.mode===l.CARDBOARD||this.mode===l.STEREO?(r.display="none",o.style.display="block",a.style.display="block",s._width=o.clientWidth,s._height=o.clientHeight):(r.display="block",o&&(o.style.display="none"),a&&(a.style.display="none"),s._width=s.clientWidth,s._height=s.clientHeight)}}},onHoverEnd:function(){if(this.getContainer()){var t=this.scaleDownAnimation,e=this.scaleUpAnimation,i=this.element;if(this.isHovering=!1,this.container.style.cursor="default",this.animated&&(e.stop(),t.start()),i&&!this.element.locked){var n=i.left,s=i.right;i.style.display="none",n&&(n.style.display="none"),s&&(s.style.display="none"),this.unlockHoverElement()}}},onDualEyeEffect:function(t){var e,i,n;this.getContainer()&&(this.mode=t.mode,e=this.element,i=this.container.clientWidth/2,n=this.container.clientHeight/2,e&&(e.left||e.right||(e.left=e.cloneNode(!0),e.right=e.cloneNode(!0)),this.mode===l.CARDBOARD||this.mode===l.STEREO?(e.left.style.display=e.style.display,e.right.style.display=e.style.display,e.style.display="none"):(e.style.display=e.left.style.display,e.left.style.display="none",e.right.style.display="none"),this.translateElement(i,n),this.container.appendChild(e.left),this.container.appendChild(e.right)))},translateElement:function(t,e){var i,n,s,o,a,r,c;this.element._width&&this.element._height&&this.getContainer()&&(c=this.container,i=t-(o=(s=this.element)._width/2),n=e-(a=s._height/2)-(r=void 0!==s.verticalDelta?s.verticalDelta:40),this.mode!==l.CARDBOARD&&this.mode!==l.STEREO||!s.left||!s.right||t===c.clientWidth/2&&e===c.clientHeight/2?this.setElementStyle("transform",s,"translate("+i+"px, "+n+"px)"):(i=c.clientWidth/4-o+(t-c.clientWidth/2),n=c.clientHeight/2-a-r+(e-c.clientHeight/2),this.setElementStyle("transform",s.left,"translate("+i+"px, "+n+"px)"),i+=c.clientWidth/2,this.setElementStyle("transform",s.right,"translate("+i+"px, "+n+"px)")))},setElementStyle:function(t,e,i){var n=e.style;"transform"===t&&(n.webkitTransform=n.msTransform=n.transform=i)},setText:function(t){this.element&&(this.element.textContent=t)},setCursorHoverStyle:function(t){this.cursorStyle=t},addHoverText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;this.element||(this.element=document.createElement("div"),this.element.style.display="none",this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e),this.setText(t)},addHoverElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;this.element||(this.element=t.cloneNode(!0),this.element.style.display="none",this.element.style.top=0,this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e)},removeHoverElement:function(){this.element&&(this.element.left&&(this.container.removeChild(this.element.left),this.element.left=null),this.element.right&&(this.container.removeChild(this.element.right),this.element.right=null),this.container.removeChild(this.element),this.element=null)},lockHoverElement:function(){this.element&&(this.element.locked=!0)},unlockHoverElement:function(){this.element&&(this.element.locked=!1)},enableRaycast:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.raycast=t?this.originalRaycast:function(){}},show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.animated,i=this.hideAnimation,n=this.showAnimation,s=this.material;e?(i.stop(),n.delay(t).start()):(this.enableRaycast(!0),s.opacity=1)},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.animated,i=this.hideAnimation,n=this.showAnimation,s=this.material,o=this.element;o&&(o.style.display="none"),e?(n.stop(),i.delay(t).start()):(this.enableRaycast(!1),s.opacity=0)},setFocusMethod:function(t){t&&(this.HANDLER_FOCUS=t.method)},focus:function(t,e){this.HANDLER_FOCUS&&(this.HANDLER_FOCUS(this.position,t,e),this.onDismiss())},dispose:function(){var t=this.geometry,e=this.material,i=e.map;this.removeHoverElement(),this.parent&&this.parent.remove(this),i&&(i.dispose(),e.map=null),t&&(t.dispose(),this.geometry=null),e&&(e.dispose(),this.material=null)}}),y.prototype=Object.assign(Object.create(i.Mesh.prototype),{constructor:y,setContainer:function(t){var e;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&this.element&&e.appendChild(this.element),this.container=e},getContainer:function(){return this.container},onClick:function(t){this.element&&this.getContainer()&&(this.onHoverStart(t),this.lockHoverElement())},onDismiss:function(){this.element&&(this.unlockHoverElement(),this.onHoverEnd())},onHover:function(){},onHoverStart:function(t){if(this.getContainer()){var e="pointer",i=this.scaleDownAnimation,n=this.scaleUpAnimation,s=this.element;if(this.isHovering=!0,this.container.style.cursor=e,this.animated&&(i.stop(),n.start()),s&&t.mouseEvent.clientX>=0&&t.mouseEvent.clientY>=0){var o=s.left,a=s.right,r=s.style;this.mode===l.CARDBOARD||this.mode===l.STEREO?(r.display="none",o.style.display="block",a.style.display="block",s._width=o.clientWidth,s._height=o.clientHeight):(r.display="block",o&&(o.style.display="none"),a&&(a.style.display="none"),s._width=s.clientWidth,s._height=s.clientHeight)}}},onHoverEnd:function(){if(this.getContainer()){var t=this.scaleDownAnimation,e=this.scaleUpAnimation,i=this.element;if(this.isHovering=!1,this.container.style.cursor="default",this.animated&&(e.stop(),t.start()),i&&!this.element.locked){var n=i.left,s=i.right;i.style.display="none",n&&(n.style.display="none"),s&&(s.style.display="none"),this.unlockHoverElement()}}},onDualEyeEffect:function(t){var e,i,n;this.getContainer()&&(this.mode=t.mode,e=this.element,i=this.container.clientWidth/2,n=this.container.clientHeight/2,e&&(e.left||e.right||(e.left=e.cloneNode(!0),e.right=e.cloneNode(!0)),this.mode===l.CARDBOARD||this.mode===l.STEREO?(e.left.style.display=e.style.display,e.right.style.display=e.style.display,e.style.display="none"):(e.style.display=e.left.style.display,e.left.style.display="none",e.right.style.display="none"),this.translateElement(i,n),this.container.appendChild(e.left),this.container.appendChild(e.right)))},translateElement:function(t,e){var i,n,s,o,a,r,c;this.element._width&&this.element._height&&this.getContainer()&&(c=this.container,i=t-(o=(s=this.element)._width/2),n=e-(a=s._height/2)-(r=void 0!==s.verticalDelta?s.verticalDelta:40),this.mode!==l.CARDBOARD&&this.mode!==l.STEREO||!s.left||!s.right||t===c.clientWidth/2&&e===c.clientHeight/2?this.setElementStyle("transform",s,"translate("+i+"px, "+n+"px)"):(i=c.clientWidth/4-o+(t-c.clientWidth/2),n=c.clientHeight/2-a-r+(e-c.clientHeight/2),this.setElementStyle("transform",s.left,"translate("+i+"px, "+n+"px)"),i+=c.clientWidth/2,this.setElementStyle("transform",s.right,"translate("+i+"px, "+n+"px)")))},setElementStyle:function(t,e,i){var n=e.style;"transform"===t&&(n.webkitTransform=n.msTransform=n.transform=i)},setText:function(t){this.element&&(this.element.textContent=t)},setCursorHoverStyle:function(t){this.cursorStyle=t},addHoverText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;this.element||(this.element=document.createElement("div"),this.element.style.display="none",this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e),this.setText(t)},addHoverElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;this.element||(this.element=t.cloneNode(!0),this.element.style.display="none",this.element.style.top=0,this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e)},removeHoverElement:function(){this.element&&(this.element.left&&(this.container.removeChild(this.element.left),this.element.left=null),this.element.right&&(this.container.removeChild(this.element.right),this.element.right=null),this.container.removeChild(this.element),this.element=null)},lockHoverElement:function(){this.element&&(this.element.locked=!0)},unlockHoverElement:function(){this.element&&(this.element.locked=!1)},enableRaycast:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.raycast=t?this.originalRaycast:function(){}},show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.animated,i=this.hideAnimation,n=this.showAnimation,s=this.material;e?(i.stop(),n.delay(t).start()):(this.enableRaycast(!0),s.opacity=1)},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.animated,i=this.hideAnimation,n=this.showAnimation,s=this.material,o=this.element;o&&(o.style.display="none"),e?(n.stop(),i.delay(t).start()):(this.enableRaycast(!1),s.opacity=0)},setFocusMethod:function(t){t&&(this.HANDLER_FOCUS=t.method)},focus:function(t,e){this.HANDLER_FOCUS&&(this.HANDLER_FOCUS(this.position,t,e),this.onDismiss())},dispose:function(){var t=this.geometry,e=this.material,i=e.map;this.removeHoverElement(),this.parent&&this.parent.remove(this),i&&(i.dispose(),e.map=null),t&&(t.dispose(),this.geometry=null),e&&(e.dispose(),this.material=null)}}),E.prototype=Object.assign(Object.create(i.EventDispatcher.prototype),{constructor:E,addControlBar:function(){if(this.container){var t,e,i,n,s=this;n="linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",(t=document.createElement("div")).style.width="100%",t.style.height="44px",t.style.float="left",t.style.transform=t.style.webkitTransform=t.style.msTransform="translateY(-100%)",t.style.background="-webkit-"+n,t.style.background="-moz-"+n,t.style.background="-o-"+n,t.style.background="-ms-"+n,t.style.background=n,t.style.transition=this.DEFAULT_TRANSITION,t.style.pointerEvents="none",t.isHidden=!1,t.toggle=function(){t.isHidden=!t.isHidden,e=t.isHidden?"translateY(0)":"translateY(-100%)",i=t.isHidden?0:1,t.style.transform=t.style.webkitTransform=t.style.msTransform=e,t.style.opacity=i};var o=this.createDefaultMenu();this.mainMenu=this.createMainMenu(o),t.appendChild(this.mainMenu);var a=this.createMask();this.mask=a,this.container.appendChild(a),t.dispose=function(){s.fullscreenElement&&(t.removeChild(s.fullscreenElement),s.fullscreenElement.dispose(),s.fullscreenElement=null),s.settingElement&&(t.removeChild(s.settingElement),s.settingElement.dispose(),s.settingElement=null),s.videoElement&&(t.removeChild(s.videoElement),s.videoElement.dispose(),s.videoElement=null)},this.container.appendChild(t),this.mask.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener(s.TOUCH_ENABLED?"touchend":"click",(function(t){t.preventDefault(),t.stopPropagation(),s.mask.hide(),s.settingElement.deactivate()}),!1),this.addEventListener("control-bar-toggle",t.toggle),this.barElement=t}else console.warn("Widget container not set")},createDefaultMenu:function(){var t,e=this;return t=function(t,i){return function(){e.dispatchEvent({type:"panolens-viewer-handler",method:t,data:i})}},[{title:"Control",subMenu:[{title:this.TOUCH_ENABLED?"Touch":"Mouse",handler:t("enableControl",h.ORBIT)},{title:"Sensor",handler:t("enableControl",h.DEVICEORIENTATION)}]},{title:"Mode",subMenu:[{title:"Normal",handler:t("disableEffect")},{title:"Cardboard",handler:t("enableEffect",l.CARDBOARD)},{title:"Stereoscopic",handler:t("enableEffect",l.STEREO)}]}]},addControlButton:function(t){var e;switch(t){case"fullscreen":e=this.createFullscreenButton(),this.fullscreenElement=e;break;case"setting":e=this.createSettingButton(),this.settingElement=e;break;case"video":e=this.createVideoControl(),this.videoElement=e;break;default:return}e&&this.barElement.appendChild(e)},createMask:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.background="transparent",t.style.display="none",t.show=function(){this.style.display="block"},t.hide=function(){this.style.display="none"},t},createSettingButton:function(){var t,e=this;function i(t){t.preventDefault(),t.stopPropagation(),e.mainMenu.toggle(),this.activated?this.deactivate():this.activate()}return(t=this.createCustomItem({style:{backgroundImage:'url("'+d.Setting+'")',webkitTransition:this.DEFAULT_TRANSITION,transition:this.DEFAULT_TRANSITION},onTap:i})).activate=function(){this.style.transform="rotate3d(0,0,1,90deg)",this.activated=!0,e.mask.show()},t.deactivate=function(){this.style.transform="rotate3d(0,0,0,0)",this.activated=!1,e.mask.hide(),e.mainMenu&&e.mainMenu.visible&&e.mainMenu.hide(),e.activeSubMenu&&e.activeSubMenu.visible&&e.activeSubMenu.hide(),e.mainMenu&&e.mainMenu._width&&(e.mainMenu.changeSize(e.mainMenu._width),e.mainMenu.unslideAll())},t.activated=!1,t},createFullscreenButton:function(){var t,e,i=this,n=!1,s=!0,o=this.container;if(e="panolens-style-addon",document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){if(document.addEventListener("fullscreenchange",c,!1),document.addEventListener("webkitfullscreenchange",c,!1),document.addEventListener("mozfullscreenchange",c,!1),document.addEventListener("MSFullscreenChange",c,!1),t=this.createCustomItem({style:{backgroundImage:'url("'+d.FullscreenEnter+'")'},onTap:r}),!document.querySelector(e)){var a=document.createElement("style");a.id=e,a.innerHTML=":-webkit-full-screen { width: 100% !important; height: 100% !important }",document.body.appendChild(a)}return t}function r(t){t.preventDefault(),t.stopPropagation(),s=!1,n?(document.exitFullscreen&&document.exitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&document.webkitExitFullscreen(),n=!1):(o.requestFullscreen&&o.requestFullscreen(),o.msRequestFullscreen&&o.msRequestFullscreen(),o.mozRequestFullScreen&&o.mozRequestFullScreen(),o.webkitRequestFullscreen&&o.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),n=!0),this.style.backgroundImage=n?'url("'+d.FullscreenLeave+'")':'url("'+d.FullscreenEnter+'")'}function c(){s&&(n=!n,t.style.backgroundImage=n?'url("'+d.FullscreenLeave+'")':'url("'+d.FullscreenEnter+'")'),i.dispatchEvent({type:"panolens-viewer-handler",method:"onWindowResize"}),s=!0}},createVideoControl:function(){var t=document.createElement("span");return t.style.display="none",t.show=function(){t.style.display=""},t.hide=function(){t.style.display="none",t.controlButton.paused=!0,t.controlButton.update()},t.controlButton=this.createVideoControlButton(),t.seekBar=this.createVideoControlSeekbar(),t.appendChild(t.controlButton),t.appendChild(t.seekBar),t.dispose=function(){t.removeChild(t.controlButton),t.removeChild(t.seekBar),t.controlButton.dispose(),t.controlButton=null,t.seekBar.dispose(),t.seekBar=null},this.addEventListener("video-control-show",t.show),this.addEventListener("video-control-hide",t.hide),t},createVideoControlButton:function(){var t=this;function e(e){e.preventDefault(),e.stopPropagation(),t.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVideoPlay",data:!this.paused}),this.paused=!this.paused,i.update()}var i=this.createCustomItem({style:{float:"left",backgroundImage:'url("'+d.VideoPlay+'")'},onTap:e});return i.paused=!0,i.update=function(t){this.paused=void 0!==t?t:this.paused,this.style.backgroundImage='url("'+(this.paused?d.VideoPlay:d.VideoPause)+'")'},i},createVideoControlSeekbar:function(){var t,e,i,n,s,o,a=this,r=!1;function c(t){t.stopPropagation(),r=!0,n=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,s=parseInt(e.style.width)/100,d()}function h(e){if(r){var i=e.clientX||e.changedTouches&&e.changedTouches[0].clientX;o=(i-n)/t.clientWidth,o=(o=s+o)>1?1:o<0?0:o,t.setProgress(o),a.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:o})}}function l(t){t.stopPropagation(),r=!1,u()}function d(){a.container.addEventListener("mousemove",h,{passive:!0}),a.container.addEventListener("mouseup",l,{passive:!0}),a.container.addEventListener("touchmove",h,{passive:!0}),a.container.addEventListener("touchend",l,{passive:!0})}function u(){a.container.removeEventListener("mousemove",h,!1),a.container.removeEventListener("mouseup",l,!1),a.container.removeEventListener("touchmove",h,!1),a.container.removeEventListener("touchend",l,!1)}function p(e){if(e.preventDefault(),e.stopPropagation(),e.target!==i){var n=e.changedTouches&&e.changedTouches.length>0?(e.changedTouches[0].pageX-e.target.getBoundingClientRect().left)/this.clientWidth:e.offsetX/this.clientWidth;a.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:n}),t.setProgress(e.offsetX/this.clientWidth)}}function m(){u(),e=null,i=null}return(e=document.createElement("div")).style.width="0%",e.style.height="100%",e.style.backgroundColor="#fff",(i=document.createElement("div")).style.float="right",i.style.width="14px",i.style.height="14px",i.style.transform="translate(7px, -5px)",i.style.borderRadius="50%",i.style.backgroundColor="#ddd",i.addEventListener("mousedown",c,{passive:!0}),i.addEventListener("touchstart",c,{passive:!0}),e.appendChild(i),(t=this.createCustomItem({style:{float:"left",width:"30%",height:"4px",marginTop:"20px",backgroundColor:"rgba(188,188,188,0.8)"},onTap:p,onDispose:m})).appendChild(e),t.setProgress=function(t){e.style.width=100*t+"%"},this.addEventListener("video-update",(function(e){t.setProgress(e.percentage)})),t.progressElement=e,t.progressElementControl=i,t},createMenuItem:function(t){var e=this,i=document.createElement("a");return i.textContent=t,i.style.display="block",i.style.padding="10px",i.style.textDecoration="none",i.style.cursor="pointer",i.style.pointerEvents="auto",i.style.transition=this.DEFAULT_TRANSITION,i.slide=function(t){this.style.transform="translateX("+(t?"":"-")+"100%)"},i.unslide=function(){this.style.transform="translateX(0)"},i.setIcon=function(t){this.icon&&(this.icon.style.backgroundImage="url("+t+")")},i.setSelectionTitle=function(t){this.selection&&(this.selection.textContent=t)},i.addSelection=function(t){var e=document.createElement("span");return e.style.fontSize="13px",e.style.fontWeight="300",e.style.float="right",this.selection=e,this.setSelectionTitle(t),this.appendChild(e),this},i.addIcon=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.ChevronRight,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("span");return n.style.float=e?"left":"right",n.style.width="17px",n.style.height="17px",n.style["margin"+(e?"Right":"Left")]="12px",n.style.backgroundSize="cover",i&&(n.style.transform="rotateZ(180deg)"),this.icon=n,this.setIcon(t),this.appendChild(n),this},i.addSubMenu=function(t,i){return this.subMenu=e.createSubMenu(t,i),this},i.addEventListener("mouseenter",(function(){this.style.backgroundColor="#e0e0e0"}),!1),i.addEventListener("mouseleave",(function(){this.style.backgroundColor="#fafafa"}),!1),i},createMenuItemHeader:function(t){var e=this.createMenuItem(t);return e.style.borderBottom="1px solid #333",e.style.paddingBottom="15px",e},createMainMenu:function(t){var e=this,i=this.createMenu();function n(t){t.preventDefault(),t.stopPropagation();var i=e.mainMenu,n=this.subMenu;function s(){i.changeSize(n.clientWidth),n.show(),n.unslideAll()}i.hide(),i.slideAll(),i.parentElement.appendChild(n),e.activeMainItem=this,e.activeSubMenu=n,window.requestAnimationFrame(s)}i._width=200,i.changeSize(i._width);for(var s=0;s<t.length;s++){var o=i.addItem(t[s].title);if(o.style.paddingLeft="20px",o.addIcon().addEventListener(e.TOUCH_ENABLED?"touchend":"click",n,!1),t[s].subMenu&&t[s].subMenu.length>0){var a=t[s].subMenu[0].title;o.addSelection(a).addSubMenu(t[s].title,t[s].subMenu)}}return i},createSubMenu:function(t,e){var i,n=this,s=this.createMenu();function o(t){t.preventDefault(),t.stopPropagation(),(i=n.mainMenu).changeSize(i._width),i.unslideAll(),i.show(),s.slideAll(!0),s.hide(),"header"!==this.type&&(s.setActiveItem(this),n.activeMainItem.setSelectionTitle(this.textContent),this.handler&&this.handler())}s.items=e,s.activeItem=null,s.addHeader(t).addIcon(void 0,!0,!0).addEventListener(n.TOUCH_ENABLED?"touchend":"click",o,!1);for(var a=0;a<e.length;a++){var r=s.addItem(e[a].title);r.style.fontWeight=300,r.handler=e[a].handler,r.addIcon(" ",!0),r.addEventListener(n.TOUCH_ENABLED?"touchend":"click",o,!1),s.activeItem||s.setActiveItem(r)}return s.slideAll(!0),s},createMenu:function(){var t=this,e=document.createElement("span"),i=e.style;return i.padding="5px 0",i.position="fixed",i.bottom="100%",i.right="14px",i.backgroundColor="#fafafa",i.fontFamily="Helvetica Neue",i.fontSize="14px",i.visibility="hidden",i.opacity=0,i.boxShadow="0 0 12pt rgba(0,0,0,0.25)",i.borderRadius="2px",i.overflow="hidden",i.willChange="width, height, opacity",i.pointerEvents="auto",i.transition=this.DEFAULT_TRANSITION,e.visible=!1,e.changeSize=function(t,e){t&&(this.style.width=t+"px"),e&&(this.style.height=e+"px")},e.show=function(){this.style.opacity=1,this.style.visibility="visible",this.visible=!0},e.hide=function(){this.style.opacity=0,this.style.visibility="hidden",this.visible=!1},e.toggle=function(){this.visible?this.hide():this.show()},e.slideAll=function(t){for(var i=0;i<e.children.length;i++)e.children[i].slide&&e.children[i].slide(t)},e.unslideAll=function(){for(var t=0;t<e.children.length;t++)e.children[t].unslide&&e.children[t].unslide()},e.addHeader=function(e){var i=t.createMenuItemHeader(e);return i.type="header",this.appendChild(i),i},e.addItem=function(e){var i=t.createMenuItem(e);return i.type="item",this.appendChild(i),i},e.setActiveItem=function(t){this.activeItem&&this.activeItem.setIcon(" "),t.setIcon(d.Check),this.activeItem=t},e.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),e.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),e.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),e},createCustomItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,i=t.element||document.createElement("span"),n=t.onDispose;return i.style.cursor="pointer",i.style.float="right",i.style.width="44px",i.style.height="100%",i.style.backgroundSize="60%",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="center",i.style.webkitUserSelect=i.style.MozUserSelect=i.style.userSelect="none",i.style.position="relative",i.style.pointerEvents="auto",i.addEventListener(e.TOUCH_ENABLED?"touchstart":"mouseenter",(function(){i.style.filter=i.style.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"}),{passive:!0}),i.addEventListener(e.TOUCH_ENABLED?"touchend":"mouseleave",(function(){i.style.filter=i.style.webkitFilter=""}),{passive:!0}),this.mergeStyleOptions(i,t.style),t.onTap&&i.addEventListener(e.TOUCH_ENABLED?"touchend":"click",t.onTap,!1),i.dispose=function(){i.removeEventListener(e.TOUCH_ENABLED?"touchend":"click",t.onTap,!1),n&&t.onDispose()},i},mergeStyleOptions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i]);return t},dispose:function(){this.barElement&&(this.container.removeChild(this.barElement),this.barElement.dispose(),this.barElement=null)}}),w.prototype=Object.assign(Object.create(i.Mesh.prototype),{constructor:w,add:function(t){var e;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}if(t instanceof b){if(e=t,t.dispatchEvent){var s=this.container;s&&t.dispatchEvent({type:"panolens-container",container:s}),t.dispatchEvent({type:"panolens-infospot-focus",method:function(t,e,i){this.dispatchEvent({type:"panolens-viewer-handler",method:"tweenControlCenter",data:[t,e,i]})}.bind(this)})}}else(e=new i.Object3D).scale.x=-1,e.scalePlaceHolder=!0,e.add(t);i.Object3D.prototype.add.call(this,e)},load:function(){this.onLoad()},onClick:function(t){t.intersects&&0===t.intersects.length&&this.traverse((function(t){t.dispatchEvent({type:"dismiss"})}))},setContainer:function(t){var e;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&(this.children.forEach((function(t){t instanceof b&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:e})})),this.container=e)},onLoad:function(){this.loaded=!0,this.dispatchEvent({type:"load"})},onProgress:function(t){this.dispatchEvent({type:"progress",progress:t})},onError:function(){this.dispatchEvent({type:"error"})},getZoomLevel:function(){return window.innerWidth<=800?this.ImageQualityFair:window.innerWidth>800&&window.innerWidth<=1280?this.ImageQualityMedium:window.innerWidth>1280&&window.innerWidth<=1920?this.ImageQualityHigh:window.innerWidth>1920?this.ImageQualitySuperHigh:this.ImageQualityLow},updateTexture:function(t){this.material.map=t,this.material.needsUpdate=!0},toggleInfospotVisibility:function(t,e){e=void 0!==e?e:0;var i=void 0!==t?t:!this.isInfospotVisible;this.traverse((function(t){t instanceof b&&(i?t.show(e):t.hide(e))})),this.isInfospotVisible=i,this.infospotAnimation.onComplete(function(){this.dispatchEvent({type:"infospot-animation-complete",visible:i})}.bind(this)).delay(e).start()},setLinkingImage:function(t,e){this.linkingImageURL=t,this.linkingImageScale=e},link:function(t,e,i,n){if(this.visible=!0,e){var s=new b(void 0!==i?i:void 0!==t.linkingImageScale?t.linkingImageScale:300,n||(t.linkingImageURL?t.linkingImageURL:d.Arrow));s.position.copy(e),s.toPanorama=t,s.addEventListener("click",function(){this.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:t})}.bind(this)),this.linkedSpots.push(s),this.add(s),this.visible=!1}else console.warn("Please specify infospot position for linking")},reset:function(){this.children.length=0},setupTransitions:function(){this.fadeInAnimation=new A.Tween(this.material).easing(A.Easing.Quartic.Out).onStart(function(){this.visible=!0,this.dispatchEvent({type:"enter-fade-start"})}.bind(this)),this.fadeOutAnimation=new A.Tween(this.material).easing(A.Easing.Quartic.Out).onComplete(function(){this.visible=!1,this.dispatchEvent({type:"leave-complete"})}.bind(this)),this.enterTransition=new A.Tween(this).easing(A.Easing.Quartic.Out).onComplete(function(){this.dispatchEvent({type:"enter-complete"})}.bind(this)).start(),this.leaveTransition=new A.Tween(this).easing(A.Easing.Quartic.Out)},onFadeAnimationUpdate:function(){var t=this.material.opacity,e=this.material.uniforms;e&&e.opacity&&(e.opacity.value=t)},fadeIn:function(t){t=t>=0?t:this.animationDuration,this.fadeOutAnimation.stop(),this.fadeInAnimation.to({opacity:1},t).onUpdate(this.onFadeAnimationUpdate.bind(this)).onComplete(function(){this.toggleInfospotVisibility(!0,t/2),this.dispatchEvent({type:"enter-fade-complete"})}.bind(this)).start()},fadeOut:function(t){t=t>=0?t:this.animationDuration,this.fadeInAnimation.stop(),this.fadeOutAnimation.to({opacity:0},t).onUpdate(this.onFadeAnimationUpdate.bind(this)).start()},onEnter:function(){var t=this.animationDuration;this.leaveTransition.stop(),this.enterTransition.to({},t).onStart(function(){this.dispatchEvent({type:"enter-start"}),this.loaded?this.fadeIn(t):this.load()}.bind(this)).start(),this.dispatchEvent({type:"enter"}),this.children.forEach((function(t){t.dispatchEvent({type:"panorama-enter"})})),this.active=!0},onLeave:function(){var t=this.animationDuration;this.enterTransition.stop(),this.leaveTransition.to({},t).onStart(function(){this.dispatchEvent({type:"leave-start"}),this.fadeOut(t),this.toggleInfospotVisibility(!1)}.bind(this)).start(),this.dispatchEvent({type:"leave"}),this.children.forEach((function(t){t.dispatchEvent({type:"panorama-leave"})})),this.active=!1},dispose:function(){function t(e){for(var i=e.geometry,n=e.material,s=e.children.length-1;s>=0;s--)t(e.children[s]),e.remove(e.children[s]);e instanceof b&&e.dispose(),i&&(i.dispose(),e.geometry=null),n&&(n.dispose(),e.material=null)}this.infospotAnimation.stop(),this.fadeInAnimation.stop(),this.fadeOutAnimation.stop(),this.enterTransition.stop(),this.leaveTransition.stop(),this.dispatchEvent({type:"panolens-viewer-handler",method:"onPanoramaDispose",data:this}),t(this),this.parent&&this.parent.remove(this)}}),M.prototype=Object.assign(Object.create(w.prototype),{constructor:M,load:function(t){(t=t||this.src)?"string"===typeof t?p.load(t,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)):t instanceof HTMLImageElement&&this.onLoad(new i.Texture(t)):console.warn("Image source undefined")},onLoad:function(t){t.minFilter=t.magFilter=i.LinearFilter,t.needsUpdate=!0,this.updateTexture(t),window.requestAnimationFrame(w.prototype.onLoad.bind(this))},reset:function(){w.prototype.reset.call(this)},dispose:function(){var t=this.material.map;i.Cache.remove(this.src),t&&t.dispose(),w.prototype.dispose.call(this)}}),C.prototype=Object.assign(Object.create(w.prototype),{constructor:C}),O.prototype=Object.assign(Object.create(w.prototype),{constructor:O,load:function(){m.load(this.images,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this))},onLoad:function(t){this.material.uniforms.tCube.value=t,w.prototype.onLoad.call(this)},dispose:function(){var t=this.material.uniforms.tCube.value;this.images.forEach((function(t){i.Cache.remove(t)})),t instanceof i.CubeTexture&&t.dispose(),w.prototype.dispose.call(this)}}),I.prototype=Object.assign(Object.create(O.prototype),{constructor:I}),x.prototype=Object.assign(Object.create(w.prototype),{constructor:x,isMobile:function(){var t,e=!1;return t=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},load:function(){var t=this.options,e=t.muted,i=t.loop,n=t.autoplay,s=t.playsinline,o=t.crossOrigin,a=this.videoElement,r=this.material,c=this.onProgress.bind(this),h=this.onLoad.bind(this);a.loop=i,a.autoplay=n,a.playsinline=s,a.crossOrigin=o,a.muted=e,s&&(a.setAttribute("playsinline",""),a.setAttribute("webkit-playsinline",""));var l=function(){this.setVideoTexture(a),n&&this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}),this.isMobile()&&(a.pause(),n&&e?this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}):this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}));var t=function(){r.map.needsUpdate=!0,c({loaded:1,total:1}),h()};window.requestAnimationFrame(t)};if(a.readyState>2)l.call(this);else{if(0===a.querySelectorAll("source").length){var d=document.createElement("source");d.src=this.src,a.appendChild(d)}a.load()}a.addEventListener("loadeddata",l.bind(this)),a.addEventListener("timeupdate",function(){this.videoProgress=a.duration>=0?a.currentTime/a.duration:0,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:this.videoProgress})}.bind(this)),a.addEventListener("ended",function(){i||(this.resetVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}))}.bind(this),!1)},setVideoTexture:function(t){if(t){var e=new i.VideoTexture(t);e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.format=i.RGBFormat,this.updateTexture(e)}},reset:function(){this.videoElement=void 0,w.prototype.reset.call(this)},isVideoPaused:function(){return this.videoElement.paused},toggleVideo:function(){var t=this.videoElement;t&&t[t.paused?"play":"pause"]()},setVideoCurrentTime:function(t){var e=t.percentage,i=this.videoElement;i&&!Number.isNaN(e)&&1!==e&&(i.currentTime=i.duration*e,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:e}))},playVideo:function(){var t=this.videoElement,e=this.playVideo.bind(this),i=this.dispatchEvent.bind(this),n=function(){i({type:"play"})},s=function(t){window.requestAnimationFrame(e),i({type:"play-error",error:t})};t&&t.paused&&t.play().then(n).catch(s)},pauseVideo:function(){var t=this.videoElement;t&&!t.paused&&t.pause(),this.dispatchEvent({type:"pause"})},resumeVideoProgress:function(){var t=this.videoElement;t.readyState>=4&&t.autoplay&&!this.isMobile()?(this.playVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1})):(this.pauseVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0})),this.setVideoCurrentTime({percentage:this.videoProgress})},resetVideo:function(){this.videoElement&&this.setVideoCurrentTime({percentage:0})},isVideoMuted:function(){return this.videoElement.muted},muteVideo:function(){var t=this.videoElement;t&&!t.muted&&(t.muted=!0),this.dispatchEvent({type:"volumechange"})},unmuteVideo:function(){var t=this.videoElement;t&&this.isVideoMuted()&&(t.muted=!1),this.dispatchEvent({type:"volumechange"})},getVideoElement:function(){return this.videoElement},dispose:function(){var t=this.material.map;this.pauseVideo(),this.removeEventListener("leave",this.pauseVideo.bind(this)),this.removeEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.removeEventListener("video-toggle",this.toggleVideo.bind(this)),this.removeEventListener("video-time",this.setVideoCurrentTime.bind(this)),t&&t.dispose(),w.prototype.dispose.call(this)}}),Object.assign(L.prototype,{constructor:L,setProgress:function(t,e){this.onProgress&&this.onProgress({loaded:t,total:e})},adaptTextureToZoom:function(){var t=this.widths[this._zoom],e=this.heights[this._zoom],i=this.maxW,n=this.maxH;this._wc=Math.ceil(t/i),this._hc=Math.ceil(e/n);for(var s=0;s<this._hc;s++)for(var o=0;o<this._wc;o++){var a=document.createElement("canvas");o<this._wc-1?a.width=i:a.width=t-i*o,s<this._hc-1?a.height=n:a.height=e-n*s,this._canvas.push(a),this._ctx.push(a.getContext("2d"))}},composeFromTile:function(t,e,i){var n=this.maxW,s=this.maxH;t*=512,e*=512;var o=Math.floor(t/n),a=Math.floor(e/s);t-=o*n,e-=a*s,this._ctx[a*this._wc+o].drawImage(i,0,0,i.width,i.height,t,e,512,512),this.progress()},progress:function(){this._count++,this.setProgress(this._count,this._total),this._count===this._total&&(this.canvas=this._canvas,this.panoId=this._panoId,this.zoom=this._zoom,this.onPanoramaLoad&&this.onPanoramaLoad(this._canvas[0]))},composePanorama:function(){var t=this;this.setProgress(0,1);var e=this.levelsW[this._zoom],i=this.levelsH[this._zoom],n=this;this._count=0,this._total=e*i;for(var s=this._parameters.useWebGL,o=0;o<i;o++)for(var a=function(e){var i="https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom="+t._zoom+"&x="+e+"&y="+o+"&panoid="+t._panoId+"&nbt&fover=2";!function(t,e){if(s)var o=p.load(i,null,(function(){n.composeFromTile(t,e,o)}));else{var a=new Image;a.addEventListener("load",(function(){n.composeFromTile(t,e,this)})),a.crossOrigin="",a.src=i}}(e,o)},r=0;r<e;r++)a(r)},load:function(t){this.loadPano(t)},loadPano:function(t){var e=this;this._panoClient.getPanoramaById(t,(function(t,i){i===google.maps.StreetViewStatus.OK&&(e.result=t,e.copyright=t.copyright,e._panoId=t.location.pano,e.composePanorama())}))},setZoom:function(t){this._zoom=t,this.adaptTextureToZoom()}}),R.prototype=Object.assign(Object.create(M.prototype),{constructor:R,load:function(t){this.loadRequested=!0,(t=t||this.panoId||{})&&this.gsvLoader&&this.loadGSVLoader(t)},setupGoogleMapAPI:function(t){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?",e.src+=t?"key="+t:"",e.onreadystatechange=this.setGSVLoader.bind(this),e.onload=this.setGSVLoader.bind(this),document.querySelector("head").appendChild(e)},setGSVLoader:function(){this.gsvLoader=new L,this.loadRequested&&this.load()},getGSVLoader:function(){return this.gsvLoader},loadGSVLoader:function(t){this.loadRequested=!1,this.gsvLoader.onProgress=this.onProgress.bind(this),this.gsvLoader.onPanoramaLoad=this.onLoad.bind(this),this.gsvLoader.setZoom(this.getZoomLevel()),this.gsvLoader.load(t),this.gsvLoader.loaded=!0},onLoad:function(t){M.prototype.onLoad.call(this,new i.Texture(t))},reset:function(){this.gsvLoader=void 0,M.prototype.reset.call(this)}});var S={uniforms:{tDiffuse:{value:new i.Texture},resolution:{value:1},transform:{value:new i.Matrix4},zoom:{value:1},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float resolution;","uniform mat4 transform;","uniform float zoom;","uniform float opacity;","varying vec2 vUv;","const float PI = 3.141592653589793;","void main(){","vec2 position = -1.0 +  2.0 * vUv;","position *= vec2( zoom * resolution, zoom * 0.5 );","float x2y2 = position.x * position.x + position.y * position.y;","vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );","sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );","vec2 sampleUV = vec2(","(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,","(asin(sphere_pnt.z) / PI + 0.5)",");","gl_FragColor = texture2D( tDiffuse, sampleUV );","gl_FragColor.a *= opacity;","}"].join("\n")};function j(){var t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;"image"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image")&&M.call(this,t,this.createGeometry(e,n),this.createMaterial(e)),this.size=e,this.ratio=n,this.EPS=1e-6,this.frameId=null,this.dragging=!1,this.userMouse=new i.Vector2,this.quatA=new i.Quaternion,this.quatB=new i.Quaternion,this.quatCur=new i.Quaternion,this.quatSlerp=new i.Quaternion,this.vectorX=new i.Vector3(1,0,0),this.vectorY=new i.Vector3(0,1,0),this.addEventListener("window-resize",this.onWindowResize)}function T(t,e,i){j.call(this,"image",t,e,i)}function D(t){var e=5e3,n=new i.SphereBufferGeometry(e,60,40),s=new i.MeshBasicMaterial({visible:!1});w.call(this,n,s),this.media=new v(t),this.radius=e,this.addEventListener("enter",this.start.bind(this)),this.addEventListener("leave",this.stop.bind(this)),this.addEventListener("panolens-container",this.onPanolensContainer.bind(this)),this.addEventListener("panolens-scene",this.onPanolensScene.bind(this))}function k(t,e){this.object=t,this.domElement=void 0!==e?e:document,this.frameId=null,this.enabled=!0,this.target=new i.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=-.15,this.noPan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.momentumDampingFactor=.9,this.momentumScalingFactor=-.005,this.momentumKeydownFactor=20,this.minFov=35,this.maxFov=90,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:i.MOUSE.LEFT,ZOOM:i.MOUSE.MIDDLE,PAN:i.MOUSE.RIGHT};var n,s,o,a,r,c=this,h=1e-7,l=1e-4,d=new i.Vector2,u=new i.Vector2,p=new i.Vector2,m=new i.Vector2,v=new i.Vector2,g=new i.Vector2,f=new i.Vector3,A=new i.Vector3,b=new i.Vector2,y=new i.Vector2,E=new i.Vector2,w=0,M=0,C=0,O=0,I=1,x=new i.Vector3,L=new i.Vector3,R=new i.Quaternion,S=0,j=0,T=!1,D={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},k=D.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var P=(new i.Quaternion).setFromUnitVectors(t.up,new i.Vector3(0,1,0)),H=P.clone().inverse(),U={type:"change"},N={type:"start"},B={type:"end"};function _(){return 2*Math.PI/60/60*c.autoRotateSpeed}function V(){return Math.pow(.95,c.zoomSpeed)}function F(t){if(T=!1,S=j=0,!1!==c.enabled){if(t.preventDefault(),t.button===c.mouseButtons.ORBIT){if(!0===c.noRotate)return;k=D.ROTATE,d.set(t.clientX,t.clientY)}else if(t.button===c.mouseButtons.ZOOM){if(!0===c.noZoom)return;k=D.DOLLY,b.set(t.clientX,t.clientY)}else if(t.button===c.mouseButtons.PAN){if(!0===c.noPan)return;k=D.PAN,m.set(t.clientX,t.clientY)}k!==D.NONE&&(document.addEventListener("mousemove",z,!1),document.addEventListener("mouseup",W,!1),c.dispatchEvent(N)),c.update()}}function z(t){if(!1!==c.enabled){t.preventDefault();var e=c.domElement===document?c.domElement.body:c.domElement;if(k===D.ROTATE){if(!0===c.noRotate)return;u.set(t.clientX,t.clientY),p.subVectors(u,d),c.rotateLeft(2*Math.PI*p.x/e.clientWidth*c.rotateSpeed),c.rotateUp(2*Math.PI*p.y/e.clientHeight*c.rotateSpeed),d.copy(u),n&&(S=t.clientX-n.clientX,j=t.clientY-n.clientY),n=t}else if(k===D.DOLLY){if(!0===c.noZoom)return;y.set(t.clientX,t.clientY),E.subVectors(y,b),E.y>0?c.dollyIn():E.y<0&&c.dollyOut(),b.copy(y)}else if(k===D.PAN){if(!0===c.noPan)return;v.set(t.clientX,t.clientY),g.subVectors(v,m),c.pan(g.x,g.y),m.copy(v)}k!==D.NONE&&c.update()}}function W(){T=!0,n=void 0,!1!==c.enabled&&(document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",W,!1),c.dispatchEvent(B),k=D.NONE)}function Q(t){if(!1!==c.enabled&&!0!==c.noZoom&&k===D.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e<0?(c.object.fov=c.object.fov+2<c.maxFov?c.object.fov+2:c.maxFov,c.object.updateProjectionMatrix()):e>0&&(c.object.fov=c.object.fov-2>c.minFov?c.object.fov-2:c.minFov,c.object.updateProjectionMatrix()),c.update(),c.dispatchEvent(U),c.dispatchEvent(N),c.dispatchEvent(B)}}function Z(t){switch(t.keyCode){case c.keys.UP:s=!1;break;case c.keys.BOTTOM:o=!1;break;case c.keys.LEFT:a=!1;break;case c.keys.RIGHT:r=!1}}function G(t){if(!1!==c.enabled&&!0!==c.noKeys&&!0!==c.noRotate){switch(t.keyCode){case c.keys.UP:s=!0;break;case c.keys.BOTTOM:o=!0;break;case c.keys.LEFT:a=!0;break;case c.keys.RIGHT:r=!0}(s||o||a||r)&&(T=!0,s&&(j=-c.rotateSpeed*c.momentumKeydownFactor),o&&(j=c.rotateSpeed*c.momentumKeydownFactor),a&&(S=-c.rotateSpeed*c.momentumKeydownFactor),r&&(S=c.rotateSpeed*c.momentumKeydownFactor))}}function X(t){if(T=!1,S=j=0,!1!==c.enabled){switch(t.touches.length){case 1:if(!0===c.noRotate)return;k=D.TOUCH_ROTATE,d.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!0===c.noZoom)return;k=D.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,n=Math.sqrt(e*e+i*i);b.set(0,n);break;case 3:if(!0===c.noPan)return;k=D.TOUCH_PAN,m.set(t.touches[0].pageX,t.touches[0].pageY);break;default:k=D.NONE}k!==D.NONE&&c.dispatchEvent(N)}}function Y(t){if(!1!==c.enabled){t.preventDefault(),t.stopPropagation();var e=c.domElement===document?c.domElement.body:c.domElement;switch(t.touches.length){case 1:if(!0===c.noRotate)return;if(k!==D.TOUCH_ROTATE)return;u.set(t.touches[0].pageX,t.touches[0].pageY),p.subVectors(u,d),c.rotateLeft(2*Math.PI*p.x/e.clientWidth*c.rotateSpeed),c.rotateUp(2*Math.PI*p.y/e.clientHeight*c.rotateSpeed),d.copy(u),n&&(S=t.touches[0].pageX-n.pageX,j=t.touches[0].pageY-n.pageY),n={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},c.update();break;case 2:if(!0===c.noZoom)return;if(k!==D.TOUCH_DOLLY)return;var i=t.touches[0].pageX-t.touches[1].pageX,s=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(i*i+s*s);y.set(0,o),E.subVectors(y,b),E.y<0?(c.object.fov=c.object.fov<c.maxFov?c.object.fov+1:c.maxFov,c.object.updateProjectionMatrix()):E.y>0&&(c.object.fov=c.object.fov>c.minFov?c.object.fov-1:c.minFov,c.object.updateProjectionMatrix()),b.copy(y),c.update(),c.dispatchEvent(U);break;case 3:if(!0===c.noPan)return;if(k!==D.TOUCH_PAN)return;v.set(t.touches[0].pageX,t.touches[0].pageY),g.subVectors(v,m),c.pan(g.x,g.y),m.copy(v),c.update();break;default:k=D.NONE}}}function q(){T=!0,n=void 0,!1!==c.enabled&&(c.dispatchEvent(B),k=D.NONE)}this.setLastQuaternion=function(t){R.copy(t),c.object.quaternion.copy(t)},this.getLastPosition=function(){return L},this.rotateLeft=function(t){void 0===t&&(t=_()),O-=t},this.rotateUp=function(t){void 0===t&&(t=_()),C-=t},this.panLeft=function(t){var e=this.object.matrix.elements;f.set(e[0],e[1],e[2]),f.multiplyScalar(-t),x.add(f)},this.panUp=function(t){var e=this.object.matrix.elements;f.set(e[4],e[5],e[6]),f.multiplyScalar(t),x.add(f)},this.pan=function(t,e){var n=c.domElement===document?c.domElement.body:c.domElement;if(c.object instanceof i.PerspectiveCamera){var s=c.object.position.clone().sub(c.target).length();s*=Math.tan(c.object.fov/2*Math.PI/180),c.panLeft(2*t*s/n.clientHeight),c.panUp(2*e*s/n.clientHeight)}else c.object instanceof i.OrthographicCamera?(c.panLeft(t*(c.object.right-c.object.left)/n.clientWidth),c.panUp(e*(c.object.top-c.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.momentum=function(){T&&(Math.abs(S)<l&&Math.abs(j)<l?T=!1:(j*=this.momentumDampingFactor,S*=this.momentumDampingFactor,O-=this.momentumScalingFactor*S,C-=this.momentumScalingFactor*j))},this.dollyIn=function(t){void 0===t&&(t=V()),c.object instanceof i.PerspectiveCamera?I/=t:c.object instanceof i.OrthographicCamera?(c.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),c.object.updateProjectionMatrix(),c.dispatchEvent(U)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){void 0===t&&(t=V()),c.object instanceof i.PerspectiveCamera?I*=t:c.object instanceof i.OrthographicCamera?(c.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),c.object.updateProjectionMatrix(),c.dispatchEvent(U)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(t){var e=this.object.position;A.copy(e).sub(this.target),A.applyQuaternion(P),w=Math.atan2(A.x,A.z),M=Math.atan2(Math.sqrt(A.x*A.x+A.z*A.z),A.y),this.autoRotate&&k===D.NONE&&this.rotateLeft(_()),this.momentum(),w+=O,M+=C,w=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,w)),M=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,M)),M=Math.max(h,Math.min(Math.PI-h,M));var i=A.length()*I;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(x),A.x=i*Math.sin(M)*Math.sin(w),A.y=i*Math.cos(M),A.z=i*Math.sin(M)*Math.cos(w),A.applyQuaternion(H),e.copy(this.target).add(A),this.object.lookAt(this.target),O=0,C=0,I=1,x.set(0,0,0),(L.distanceToSquared(this.object.position)>h||8*(1-R.dot(this.object.quaternion))>h)&&(!0!==t&&this.dispatchEvent(U),L.copy(this.object.position),R.copy(this.object.quaternion))},this.reset=function(){k=D.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(U),this.update()},this.getPolarAngle=function(){return M},this.getAzimuthalAngle=function(){return w},this.dispose=function(){this.domElement.removeEventListener("mousedown",F),this.domElement.removeEventListener("mousewheel",Q),this.domElement.removeEventListener("DOMMouseScroll",Q),this.domElement.removeEventListener("touchstart",X),this.domElement.removeEventListener("touchend",q),this.domElement.removeEventListener("touchmove",Y),window.removeEventListener("keyup",Z),window.removeEventListener("keydown",G)},this.domElement.addEventListener("mousedown",F,{passive:!1}),this.domElement.addEventListener("mousewheel",Q,{passive:!1}),this.domElement.addEventListener("DOMMouseScroll",Q,{passive:!1}),this.domElement.addEventListener("touchstart",X,{passive:!1}),this.domElement.addEventListener("touchend",q,{passive:!1}),this.domElement.addEventListener("touchmove",Y,{passive:!1}),window.addEventListener("keyup",Z,{passive:!1}),window.addEventListener("keydown",G,{passive:!1}),this.update()}function P(t,e){var n=this,s={type:"change"},o=0,a=0,r=0,c=0;this.camera=t,this.camera.rotation.reorder("YXZ"),this.domElement=void 0!==e?e:document,this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0;var h=function(t){n.deviceOrientation=t},l=function(){n.screenOrientation=window.orientation||0},d=function(t){t.preventDefault(),t.stopPropagation(),r=t.touches[0].pageX,c=t.touches[0].pageY},u=function(t){t.preventDefault(),t.stopPropagation(),o+=i.Math.degToRad((t.touches[0].pageX-r)/4),a+=i.Math.degToRad((c-t.touches[0].pageY)/4),n.updateAlphaOffsetAngle(o),r=t.touches[0].pageX,c=t.touches[0].pageY},p=function(t,e,s,o,r){var c,h=new i.Vector3(0,0,1),l=new i.Euler,d=new i.Quaternion,u=new i.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),p=new i.Quaternion,m=new i.Quaternion;0==n.screenOrientation?(c=new i.Vector3(1,0,0),p.setFromAxisAngle(c,-a)):180==n.screenOrientation?(c=new i.Vector3(1,0,0),p.setFromAxisAngle(c,a)):90==n.screenOrientation?(c=new i.Vector3(0,1,0),p.setFromAxisAngle(c,a)):-90==n.screenOrientation&&(c=new i.Vector3(0,1,0),p.setFromAxisAngle(c,-a)),u.multiply(p),u.multiply(m),l.set(s,e,-o,"YXZ"),t.setFromEuler(l),t.multiply(u),t.multiply(d.setFromAxisAngle(h,-r))};this.connect=function(){l(),window.addEventListener("orientationchange",l,{passive:!0}),window.addEventListener("deviceorientation",h,{passive:!0}),window.addEventListener("deviceorientation",this.update.bind(this),{passive:!0}),n.domElement.addEventListener("touchstart",d,{passive:!1}),n.domElement.addEventListener("touchmove",u,{passive:!1}),n.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",l,!1),window.removeEventListener("deviceorientation",h,!1),window.removeEventListener("deviceorientation",this.update.bind(this),!1),n.domElement.removeEventListener("touchstart",d,!1),n.domElement.removeEventListener("touchmove",u,!1),n.enabled=!1},this.update=function(t){if(!1!==n.enabled){var e=n.deviceOrientation.alpha?i.Math.degToRad(n.deviceOrientation.alpha)+n.alphaOffsetAngle:0,o=n.deviceOrientation.beta?i.Math.degToRad(n.deviceOrientation.beta):0,a=n.deviceOrientation.gamma?i.Math.degToRad(n.deviceOrientation.gamma):0,r=n.screenOrientation?i.Math.degToRad(n.screenOrientation):0;p(n.camera.quaternion,e,o,a,r),n.alpha=e,!0!==t&&n.dispatchEvent(s)}},this.updateAlphaOffsetAngle=function(t){this.alphaOffsetAngle=t,this.update()},this.dispose=function(){this.disconnect()},this.connect()}function H(t){var e=new i.OrthographicCamera(-1,1,1,-1,0,1),n=new i.Scene,s=new i.StereoCamera;s.aspect=.5;var o={minFilter:i.LinearFilter,magFilter:i.NearestFilter,format:i.RGBAFormat},a=new i.WebGLRenderTarget(512,512,o);a.scissorTest=!0,a.texture.generateMipmaps=!1;var r=new i.Vector2(.441,.156),c=new i.PlaneBufferGeometry(1,1,10,20).removeAttribute("normal").toNonIndexed(),h=c.attributes.position.array,l=c.attributes.uv.array;c.attributes.position.count*=2,c.attributes.uv.count*=2;var d=new Float32Array(2*h.length);d.set(h),d.set(h,h.length);var u=new Float32Array(2*l.length);u.set(l),u.set(l,l.length);for(var p=new i.Vector2,m=h.length/3,v=0,g=d.length/3;v<g;v++){p.x=d[3*v+0],p.y=d[3*v+1];var f=p.dot(p),A=1.5+(r.x+r.y*f)*f,b=v<m?0:1;d[3*v+0]=p.x/A*1.5-.5+b,d[3*v+1]=p.y/A*3,u[2*v]=.5*(u[2*v]+b)}c.attributes.position.array=d,c.attributes.uv.array=u;var y=new i.MeshBasicMaterial({map:a.texture}),E=new i.Mesh(c,y);n.add(E),this.setSize=function(e,i){t.setSize(e,i);var n=t.getPixelRatio();a.setSize(e*n,i*n)},this.render=function(i,o){i.updateMatrixWorld(),null===o.parent&&o.updateMatrixWorld(),s.update(o);var r=a.width/2,c=a.height;t.autoClear&&t.clear(),a.scissor.set(0,0,r,c),a.viewport.set(0,0,r,c),t.setRenderTarget(a),t.render(i,s.cameraL),t.clearDepth(),a.scissor.set(r,0,r,c),a.viewport.set(r,0,r,c),t.setRenderTarget(a),t.render(i,s.cameraR),t.clearDepth(),t.setRenderTarget(null),t.render(n,e)}}j.prototype=Object.assign(Object.create(M.prototype),{constructor:j,add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}t instanceof b&&(t.material.depthTest=!1),M.prototype.add.call(this,t)},createGeometry:function(t,e){return new i.PlaneBufferGeometry(t,t*e)},createMaterial:function(t){var e=Object.assign({},S),n=e.uniforms;return n.zoom.value=t,n.opacity.value=0,new i.ShaderMaterial({uniforms:n,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:i.BackSide,transparent:!0})},registerMouseEvents:function(){this.container.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("touchstart",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("touchmove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("touchend",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("mousewheel",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("contextmenu",this.onContextMenu.bind(this),{passive:!0})},unregisterMouseEvents:function(){this.container.removeEventListener("mousedown",this.onMouseDown.bind(this),!1),this.container.removeEventListener("mousemove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("mouseup",this.onMouseUp.bind(this),!1),this.container.removeEventListener("touchstart",this.onMouseDown.bind(this),!1),this.container.removeEventListener("touchmove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("touchend",this.onMouseUp.bind(this),!1),this.container.removeEventListener("mousewheel",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("contextmenu",this.onContextMenu.bind(this),!1)},onMouseDown:function(t){switch(t.touches&&t.touches.length||1){case 1:var e=t.clientX>=0?t.clientX:t.touches[0].clientX,i=t.clientY>=0?t.clientY:t.touches[0].clientY;this.dragging=!0,this.userMouse.set(e,i);break;case 2:var n=t.touches[0].pageX-t.touches[1].pageX,s=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(n*n+s*s);this.userMouse.pinchDistance=o}this.onUpdateCallback()},onMouseMove:function(t){switch(t.touches&&t.touches.length||1){case 1:var e=t.clientX>=0?t.clientX:t.touches[0].clientX,n=t.clientY>=0?t.clientY:t.touches[0].clientY,s=.4*i.Math.degToRad(e-this.userMouse.x),o=.4*i.Math.degToRad(n-this.userMouse.y);this.dragging&&(this.quatA.setFromAxisAngle(this.vectorY,s),this.quatB.setFromAxisAngle(this.vectorX,o),this.quatCur.multiply(this.quatA).multiply(this.quatB),this.userMouse.set(e,n));break;case 2:var a=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,c=Math.sqrt(a*a+r*r);this.addZoomDelta(this.userMouse.pinchDistance-c)}},onMouseUp:function(){this.dragging=!1},onMouseWheel:function(t){t.preventDefault(),t.stopPropagation();var e=10;void 0!==t.wheelDelta?e+=t.wheelDelta:void 0!==t.detail&&(e+=-t.detail),this.addZoomDelta(e),this.onUpdateCallback()},addZoomDelta:function(t){var e=this.material.uniforms,i=.1*this.size,n=10*this.size;e.zoom.value+=t,e.zoom.value<=i?e.zoom.value=i:e.zoom.value>=n&&(e.zoom.value=n)},onUpdateCallback:function(){this.frameId=window.requestAnimationFrame(this.onUpdateCallback.bind(this)),this.quatSlerp.slerp(this.quatCur,.1),this.material&&this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp),!this.dragging&&1-this.quatSlerp.clone().dot(this.quatCur)<this.EPS&&window.cancelAnimationFrame(this.frameId)},reset:function(){this.quatCur.set(0,0,0,1),this.quatSlerp.set(0,0,0,1),this.onUpdateCallback()},onLoad:function(t){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight,this.registerMouseEvents(),this.onUpdateCallback(),this.dispatchEvent({type:"panolens-viewer-handler",method:"disableControl"}),M.prototype.onLoad.call(this,t)},onLeave:function(){this.unregisterMouseEvents(),this.dispatchEvent({type:"panolens-viewer-handler",method:"enableControl",data:h.ORBIT}),window.cancelAnimationFrame(this.frameId),M.prototype.onLeave.call(this)},onWindowResize:function(){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight},onContextMenu:function(){this.dragging=!1},dispose:function(){this.unregisterMouseEvents(),M.prototype.dispose.call(this)}}),T.prototype=Object.assign(Object.create(j.prototype),{constructor:T,onLoad:function(t){this.updateTexture(t),j.prototype.onLoad.call(this,t)},updateTexture:function(t){t.minFilter=t.magFilter=i.LinearFilter,this.material.uniforms.tDiffuse.value=t},dispose:function(){var t=this.material.uniforms.tDiffuse;t&&t.value&&t.value.dispose(),j.prototype.dispose.call(this)}}),D.prototype=Object.assign(Object.create(w.prototype),{constructor:D,onPanolensContainer:function(t){var e=t.container;this.media.setContainer(e)},onPanolensScene:function(t){var e=t.scene;this.media.setScene(e)},start:function(){return this.media.start()},stop:function(){this.media.stop()}}),k.prototype=Object.assign(Object.create(i.EventDispatcher.prototype),{constructor:k}),P.prototype=Object.assign(Object.create(i.EventDispatcher.prototype),{constructor:P});var U=function(t){var e=new i.StereoCamera;e.aspect=.5;var n=new i.Vector2;this.setEyeSeparation=function(t){e.eyeSep=t},this.setSize=function(e,i){t.setSize(e,i)},this.render=function(i,s){i.updateMatrixWorld(),null===s.parent&&s.updateMatrixWorld(),e.update(s),t.getSize(n),t.autoClear&&t.clear(),t.setScissorTest(!0),t.setScissor(0,0,n.width/2,n.height),t.setViewport(0,0,n.width/2,n.height),t.render(i,e.cameraL),t.setScissor(n.width/2,0,n.width/2,n.height),t.setViewport(n.width/2,0,n.width/2,n.height),t.render(i,e.cameraR),t.setScissorTest(!1)}};function N(t){var e;(t=t||{}).controlBar=void 0===t.controlBar||t.controlBar,t.controlButtons=t.controlButtons||["fullscreen","setting","video"],t.autoHideControlBar=void 0!==t.autoHideControlBar&&t.autoHideControlBar,t.autoHideInfospot=void 0===t.autoHideInfospot||t.autoHideInfospot,t.horizontalView=void 0!==t.horizontalView&&t.horizontalView,t.clickTolerance=t.clickTolerance||10,t.cameraFov=t.cameraFov||60,t.reverseDragging=t.reverseDragging||!1,t.enableReticle=t.enableReticle||!1,t.dwellTime=t.dwellTime||1500,t.autoReticleSelect=void 0===t.autoReticleSelect||t.autoReticleSelect,t.viewIndicator=void 0!==t.viewIndicator&&t.viewIndicator,t.indicatorSize=t.indicatorSize||30,t.output=t.output?t.output:"none",t.autoRotate=t.autoRotate||!1,t.autoRotateSpeed=t.autoRotateSpeed||2,t.autoRotateActivationDuration=t.autoRotateActivationDuration||5e3,this.options=t,t.container?((e=t.container)._width=e.clientWidth,e._height=e.clientHeight):((e=document.createElement("div")).classList.add("panolens-container"),e.style.width="100%",e.style.height="100%",e._width=window.innerWidth,e._height=window.innerHeight,document.body.appendChild(e)),this.container=e,this.camera=t.camera||new i.PerspectiveCamera(this.options.cameraFov,this.container.clientWidth/this.container.clientHeight,1,2e4),this.scene=t.scene||new i.Scene,this.renderer=t.renderer||new i.WebGLRenderer({alpha:!0,antialias:!0}),this.sceneReticle=new i.Scene,this.viewIndicatorSize=this.options.indicatorSize,this.reticle={},this.tempEnableReticle=this.options.enableReticle,this.mode=l.NORMAL,this.panorama=null,this.widget=null,this.hoverObject=null,this.infospot=null,this.pressEntityObject=null,this.pressObject=null,this.raycaster=new i.Raycaster,this.raycasterPoint=new i.Vector2,this.userMouse=new i.Vector2,this.updateCallbacks=[],this.requestAnimationId=null,this.cameraFrustum=new i.Frustum,this.cameraViewProjectionMatrix=new i.Matrix4,this.autoRotateRequestId=null,this.outputDivElement=null,this.touchSupported="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,this.HANDLER_MOUSE_DOWN=this.onMouseDown.bind(this),this.HANDLER_MOUSE_UP=this.onMouseUp.bind(this),this.HANDLER_MOUSE_MOVE=this.onMouseMove.bind(this),this.HANDLER_WINDOW_RESIZE=this.onWindowResize.bind(this),this.HANDLER_KEY_DOWN=this.onKeyDown.bind(this),this.HANDLER_KEY_UP=this.onKeyUp.bind(this),this.HANDLER_TAP=this.onTap.bind(this,{clientX:this.container.clientWidth/2,clientY:this.container.clientHeight/2}),this.OUTPUT_INFOSPOT=!1,this.tweenLeftAnimation=new A.Tween,this.tweenUpAnimation=new A.Tween,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,this.renderer.domElement.classList.add("panolens-canvas"),this.renderer.domElement.style.display="block",this.container.style.backgroundColor="#000",this.container.appendChild(this.renderer.domElement),this.OrbitControls=new k(this.camera,this.container),this.OrbitControls.id="orbit",this.OrbitControls.minDistance=1,this.OrbitControls.noPan=!0,this.OrbitControls.autoRotate=this.options.autoRotate,this.OrbitControls.autoRotateSpeed=this.options.autoRotateSpeed,this.DeviceOrientationControls=new P(this.camera,this.container),this.DeviceOrientationControls.id="device-orientation",this.DeviceOrientationControls.enabled=!1,this.camera.position.z=1,this.options.passiveRendering&&console.warn("passiveRendering is now deprecated"),this.controls=[this.OrbitControls,this.DeviceOrientationControls],this.control=this.OrbitControls,this.CardboardEffect=new H(this.renderer),this.CardboardEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.StereoEffect=new U(this.renderer),this.StereoEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.effect=this.CardboardEffect,this.addReticle(),this.options.horizontalView&&(this.OrbitControls.minPolarAngle=Math.PI/2,this.OrbitControls.maxPolarAngle=Math.PI/2),!1!==this.options.controlBar&&this.addDefaultControlBar(this.options.controlButtons),this.options.viewIndicator&&this.addViewIndicator(),this.options.reverseDragging&&this.reverseDraggingDirection(),this.options.enableReticle?this.enableReticleControl():this.registerMouseAndTouchEvents(),"overlay"===this.options.output&&this.addOutputElement(),this.registerEventListeners(),this.animate.call(this)}N.prototype=Object.assign(Object.create(i.EventDispatcher.prototype),{constructor:N,add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}this.scene.add(t),t.addEventListener&&t.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),t instanceof w&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:this.container}),t instanceof D&&t.dispatchEvent({type:"panolens-scene",scene:this.scene}),"panorama"===t.type&&(this.addPanoramaEventListener(t),this.panorama||this.setPanorama(t))},remove:function(t){t.removeEventListener&&t.removeEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),this.scene.remove(t)},addDefaultControlBar:function(t){if(this.widget)console.warn("Default control bar exists");else{var e=new E(this.container);e.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),e.addControlBar(),t.forEach((function(t){e.addControlButton(t)})),this.widget=e}},getPosition:function(){var t,e,n,s;return(t=this.raycaster.intersectObject(this.panorama,!0)).length>0&&(e=t[0].point,n=this.panorama.getWorldPosition(new i.Vector3),s=new i.Vector3(-(e.x-n.x).toFixed(2),(e.y-n.y).toFixed(2),(e.z-n.z).toFixed(2))),s},setPanorama:function(t){var e=this.panorama;if("panorama"===t.type&&e!==t){this.hideInfospot();var i=function i(){e&&e.onLeave(),t.removeEventListener("enter-fade-start",i)};t.addEventListener("enter-fade-start",i),(this.panorama=t).onEnter()}},eventHandler:function(t){t.method&&this[t.method]&&this[t.method](t.data)},dispatchEventToChildren:function(t){this.scene.traverse((function(e){e.dispatchEvent&&e.dispatchEvent(t)}))},activateWidgetItem:function(t,e){var i,n=this.widget.mainMenu,s=n.children[0],o=n.children[1];if(void 0!==t&&(i=1===t?s.subMenu.children[2]:s.subMenu.children[1],s.subMenu.setActiveItem(i),s.setSelectionTitle(i.textContent)),void 0!==e){switch(e){case l.CARDBOARD:i=o.subMenu.children[2];break;case l.STEREO:i=o.subMenu.children[3];break;default:i=o.subMenu.children[1]}o.subMenu.setActiveItem(i),o.setSelectionTitle(i.textContent)}},enableEffect:function(t){if(this.mode!==t)if(t!==l.NORMAL){this.mode=t;var e=this.camera.fov;switch(t){case l.CARDBOARD:this.effect=this.CardboardEffect,this.enableReticleControl();break;case l.STEREO:this.effect=this.StereoEffect,this.enableReticleControl();break;default:this.effect=null,this.disableReticleControl()}this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.camera.fov=e+.01,this.effect.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.camera.fov=e,this.dispatchEvent({type:"mode-change",mode:this.mode})}else this.disableEffect()},disableEffect:function(){this.mode!==l.NORMAL&&(this.mode=l.NORMAL,this.disableReticleControl(),this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.dispatchEvent({type:"mode-change",mode:this.mode}))},enableReticleControl:function(){this.reticle.visible||(this.tempEnableReticle=!0,this.unregisterMouseAndTouchEvents(),this.reticle.show(),this.registerReticleEvent(),this.updateReticleEvent())},disableReticleControl:function(){this.tempEnableReticle=!1,this.options.enableReticle?this.updateReticleEvent():(this.reticle.hide(),this.unregisterReticleEvent(),this.registerMouseAndTouchEvents())},enableAutoRate:function(){this.options.autoRotate=!0,this.OrbitControls.autoRotate=!0},disableAutoRate:function(){clearTimeout(this.autoRotateRequestId),this.options.autoRotate=!1,this.OrbitControls.autoRotate=!1},toggleVideoPlay:function(t){this.panorama instanceof x&&this.panorama.dispatchEvent({type:"video-toggle",pause:t})},setVideoCurrentTime:function(t){this.panorama instanceof x&&this.panorama.dispatchEvent({type:"video-time",percentage:t})},onVideoUpdate:function(t){var e=this.widget;e&&e.dispatchEvent({type:"video-update",percentage:t})},addUpdateCallback:function(t){t&&this.updateCallbacks.push(t)},removeUpdateCallback:function(t){var e=this.updateCallbacks.indexOf(t);t&&e>=0&&this.updateCallbacks.splice(e,1)},showVideoWidget:function(){var t=this.widget;t&&t.dispatchEvent({type:"video-control-show"})},hideVideoWidget:function(){var t=this.widget;t&&t.dispatchEvent({type:"video-control-hide"})},updateVideoPlayButton:function(t){var e=this.widget;e&&e.videoElement&&e.videoElement.controlButton&&e.videoElement.controlButton.update(t)},addPanoramaEventListener:function(t){t.addEventListener("enter-fade-start",this.setCameraControl.bind(this)),t instanceof x&&(t.addEventListener("enter-fade-start",this.showVideoWidget.bind(this)),t.addEventListener("leave",function(){this.panorama instanceof x||this.hideVideoWidget.call(this)}.bind(this)))},setCameraControl:function(){this.OrbitControls.target.copy(this.panorama.position)},getControl:function(){return this.control},getScene:function(){return this.scene},getCamera:function(){return this.camera},getRenderer:function(){return this.renderer},getContainer:function(){return this.container},getControlId:function(){return this.control.id},getNextControlId:function(){return this.controls[this.getNextControlIndex()].id},getNextControlIndex:function(){var t=this.controls,e=this.control,i=t.indexOf(e)+1;return i>=t.length?0:i},setCameraFov:function(t){this.camera.fov=t,this.camera.updateProjectionMatrix()},enableControl:function(t){switch(t=t>=0&&t<this.controls.length?t:0,this.control.enabled=!1,this.control=this.controls[t],this.control.enabled=!0,t){case h.ORBIT:this.camera.position.copy(this.panorama.position),this.camera.position.z+=1;break;case h.DEVICEORIENTATION:this.camera.position.copy(this.panorama.position)}this.control.update(),this.activateWidgetItem(t,void 0)},disableControl:function(){this.control.enabled=!1},toggleNextControl:function(){this.enableControl(this.getNextControlIndex())},getScreenVector:function(t){var e=t.clone(),i=this.container.clientWidth/2,n=this.container.clientHeight/2;return e.project(this.camera),e.x=e.x*i+i,e.y=-e.y*n+n,e.z=0,e},checkSpriteInViewport:function(t){return this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld),this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix),t.visible&&this.cameraFrustum.intersectsSprite(t)},reverseDraggingDirection:function(){this.OrbitControls.rotateSpeed*=-1,this.OrbitControls.momentumScalingFactor*=-1},addReticle:function(){this.reticle=new g(16777215,!0,this.options.dwellTime),this.reticle.hide(),this.camera.add(this.reticle),this.sceneReticle.add(this.camera)},tweenControlCenter:function(t,e,n){var s,o,a,r,c,h,l,d,u,p;this.control===this.OrbitControls&&(t instanceof Array&&(e=t[1],n=t[2],t=t[0]),e=void 0!==e?e:1e3,n=n||A.Easing.Exponential.Out,s=this,c=(r=this.camera.getWorldDirection(new i.Vector3)).clone(),d=this.panorama.getWorldPosition(new i.Vector3).sub(this.camera.getWorldPosition(new i.Vector3)),(h=t.clone()).x*=-1,h.add(d).normalize(),l=h.clone(),r.y=0,h.y=0,o=(o=(o=Math.atan2(h.z,h.x)-Math.atan2(r.z,r.x))>Math.PI?o-2*Math.PI:o)<-Math.PI?o+2*Math.PI:o,a=Math.abs(c.angleTo(r)+(c.y*l.y<=0?l.angleTo(h):-l.angleTo(h))),a*=l.y<c.y?1:-1,u={left:0,up:0},p={left:0,up:0},this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.tweenLeftAnimation=new A.Tween(u).to({left:o},e).easing(n).onUpdate((function(t){s.control.rotateLeft(t.left-p.left),p.left=t.left})).start(),this.tweenUpAnimation=new A.Tween(u).to({up:a},e).easing(n).onUpdate((function(t){s.control.rotateUp(t.up-p.up),p.up=t.up})).start())},tweenControlCenterByObject:function(t,e,n){var s=!1;if(t.traverseAncestors((function(t){t.scalePlaceHolder&&(s=!0)})),s){var o=new i.Vector3(-1,1,1);this.tweenControlCenter(t.getWorldPosition(new i.Vector3).multiply(o),e,n)}else this.tweenControlCenter(t.getWorldPosition(new i.Vector3),e,n)},onWindowResize:function(t,e){var i,n,s=this.container.classList.contains("panolens-container")||this.container.isFullscreen;if(void 0!==t&&void 0!==e)i=t,n=e,this.container._width=t,this.container._height=e;else{var o=/(android)/i.test(window.navigator.userAgent),a=o?Math.min(document.documentElement.clientWidth,window.innerWidth||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=o?Math.min(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientHeight,window.innerHeight||0);i=s?a:this.container.clientWidth,n=s?r:this.container.clientHeight,this.container._width=i,this.container._height=n}this.camera.aspect=i/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(i,n),(this.options.enableReticle||this.tempEnableReticle)&&this.updateReticleEvent(),this.dispatchEvent({type:"window-resize",width:i,height:n}),this.scene.traverse((function(t){t.dispatchEvent&&t.dispatchEvent({type:"window-resize",width:i,height:n})}))},addOutputElement:function(){var t=document.createElement("div");t.style.position="absolute",t.style.right="10px",t.style.top="10px",t.style.color="#fff",this.container.appendChild(t),this.outputDivElement=t},outputPosition:function(){var t=this.raycaster.intersectObject(this.panorama,!0);if(t.length>0){var e=t[0].point.clone(),n=new i.Vector3(-1,1,1),s=this.panorama.getWorldPosition(new i.Vector3);e.sub(s).multiply(n);var o={x:e.x.toFixed(2),y:e.y.toFixed(2),z:e.z.toFixed(2)},a="".concat(o.x,", ").concat(o.y,", ").concat(o.z);if(0===e.length())return;switch(this.options.output){case"event":this.dispatchEvent({type:"position-output",position:o});break;case"console":console.info(a);break;case"overlay":this.outputDivElement.textContent=a}}},onMouseDown:function(t){t.preventDefault(),this.userMouse.x=t.clientX>=0?t.clientX:t.touches[0].clientX,this.userMouse.y=t.clientY>=0?t.clientY:t.touches[0].clientY,this.userMouse.type="mousedown",this.onTap(t)},onMouseMove:function(t){t.preventDefault(),this.userMouse.type="mousemove",this.onTap(t)},onMouseUp:function(t){var e=!1;this.userMouse.type="mouseup";var i=this.userMouse.x>=t.clientX-this.options.clickTolerance&&this.userMouse.x<=t.clientX+this.options.clickTolerance&&this.userMouse.y>=t.clientY-this.options.clickTolerance&&this.userMouse.y<=t.clientY+this.options.clickTolerance||t.changedTouches&&this.userMouse.x>=t.changedTouches[0].clientX-this.options.clickTolerance&&this.userMouse.x<=t.changedTouches[0].clientX+this.options.clickTolerance&&this.userMouse.y>=t.changedTouches[0].clientY-this.options.clickTolerance&&this.userMouse.y<=t.changedTouches[0].clientY+this.options.clickTolerance?"click":void 0;if((!t||!t.target||t.target.classList.contains("panolens-canvas"))&&(t.preventDefault(),e=t.changedTouches&&1===t.changedTouches.length?this.onTap({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY},i):this.onTap(t,i),this.userMouse.type="none",!e&&"click"===i)){var n=this.options,s=n.autoHideInfospot,o=n.autoHideControlBar,a=this.panorama,r=this.toggleControlBar;s&&a&&a.toggleInfospotVisibility(),o&&r()}},onTap:function(t,e){var i=this.container.getBoundingClientRect(),n=i.left,s=i.top,o=this.container,a=o.clientWidth,r=o.clientHeight;if(this.raycasterPoint.x=(t.clientX-n)/a*2-1,this.raycasterPoint.y=-(t.clientY-s)/r*2+1,this.raycaster.setFromCamera(this.raycasterPoint,this.camera),this.panorama){("mousedown"!==t.type&&this.touchSupported||this.OUTPUT_INFOSPOT)&&this.outputPosition();var c=this.raycaster.intersectObjects(this.panorama.children,!0),h=this.getConvertedIntersect(c),l=c.length>0?c[0].object:void 0;if("mouseup"===this.userMouse.type&&(h&&this.pressEntityObject===h&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),"mouseup"===this.userMouse.type&&(l&&this.pressObject===l&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0),"click"===e?(this.panorama.dispatchEvent({type:"click",intersects:c,mouseEvent:t}),h&&h.dispatchEvent&&h.dispatchEvent({type:"click-entity",mouseEvent:t}),l&&l.dispatchEvent&&l.dispatchEvent({type:"click",mouseEvent:t})):(this.panorama.dispatchEvent({type:"hover",intersects:c,mouseEvent:t}),(this.hoverObject&&c.length>0&&this.hoverObject!==h||this.hoverObject&&0===c.length)&&(this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverleave",mouseEvent:t}),this.reticle.end()),this.hoverObject=void 0),h&&c.length>0&&(this.hoverObject!==h&&(this.hoverObject=h,this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverenter",mouseEvent:t}),(this.options.autoReticleSelect&&this.options.enableReticle||this.tempEnableReticle)&&this.reticle.start(this.onTap.bind(this,t,"click")))),"mousedown"===this.userMouse.type&&this.pressEntityObject!=h&&(this.pressEntityObject=h,this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstart-entity",mouseEvent:t})),"mousedown"===this.userMouse.type&&this.pressObject!=l&&(this.pressObject=l,this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstart",mouseEvent:t})),("mousemove"===this.userMouse.type||this.options.enableReticle)&&(l&&l.dispatchEvent&&l.dispatchEvent({type:"hover",mouseEvent:t}),this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressmove-entity",mouseEvent:t}),this.pressObject&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressmove",mouseEvent:t}))),!h&&this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&(this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),!l&&this.pressObject&&this.pressObject.dispatchEvent&&(this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0)),l&&l instanceof b){if(this.infospot=l,"click"===e)return!0}else this.infospot&&this.hideInfospot();this.options.autoRotate&&"mousemove"!==this.userMouse.type&&(clearTimeout(this.autoRotateRequestId),this.control===this.OrbitControls&&(this.OrbitControls.autoRotate=!1,this.autoRotateRequestId=window.setTimeout(this.enableAutoRate.bind(this),this.options.autoRotateActivationDuration)))}},getConvertedIntersect:function(t){for(var e,i=0;i<t.length;i++)if(t[i].distance>=0&&t[i].object&&!t[i].object.passThrough){if(t[i].object.entity&&t[i].object.entity.passThrough)continue;if(t[i].object.entity&&!t[i].object.entity.passThrough){e=t[i].object.entity;break}e=t[i].object;break}return e},hideInfospot:function(){this.infospot&&(this.infospot.onHoverEnd(),this.infospot=void 0)},toggleControlBar:function(){var t=this.widget;t&&t.dispatchEvent({type:"control-bar-toggle"})},onKeyDown:function(t){this.options.output&&"none"!==this.options.output&&"Control"===t.key&&(this.OUTPUT_INFOSPOT=!0)},onKeyUp:function(){this.OUTPUT_INFOSPOT=!1},update:function(){A.update(),this.updateCallbacks.forEach((function(t){t()})),this.control.update(),this.scene.traverse(function(t){if(t instanceof b&&t.element&&(this.hoverObject===t||"none"!==t.element.style.display||t.element.left&&"none"!==t.element.left.style.display||t.element.right&&"none"!==t.element.right.style.display))if(this.checkSpriteInViewport(t)){var e=this.getScreenVector(t.getWorldPosition(new i.Vector3)),n=e.x,s=e.y;t.translateElement(n,s)}else t.onDismiss()}.bind(this))},render:function(){this.mode===l.CARDBOARD||this.mode===l.STEREO?(this.renderer.clear(),this.effect.render(this.scene,this.camera),this.effect.render(this.sceneReticle,this.camera)):(this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.sceneReticle,this.camera))},animate:function(){this.requestAnimationId=window.requestAnimationFrame(this.animate.bind(this)),this.onChange()},onChange:function(){this.update(),this.render()},registerMouseAndTouchEvents:function(){var t={passive:!1};this.container.addEventListener("mousedown",this.HANDLER_MOUSE_DOWN,t),this.container.addEventListener("mousemove",this.HANDLER_MOUSE_MOVE,t),this.container.addEventListener("mouseup",this.HANDLER_MOUSE_UP,t),this.container.addEventListener("touchstart",this.HANDLER_MOUSE_DOWN,t),this.container.addEventListener("touchend",this.HANDLER_MOUSE_UP,t)},unregisterMouseAndTouchEvents:function(){this.container.removeEventListener("mousedown",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("mousemove",this.HANDLER_MOUSE_MOVE,!1),this.container.removeEventListener("mouseup",this.HANDLER_MOUSE_UP,!1),this.container.removeEventListener("touchstart",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("touchend",this.HANDLER_MOUSE_UP,!1)},registerReticleEvent:function(){this.addUpdateCallback(this.HANDLER_TAP)},unregisterReticleEvent:function(){this.removeUpdateCallback(this.HANDLER_TAP)},updateReticleEvent:function(){var t=this.container.clientWidth/2+this.container.offsetLeft,e=this.container.clientHeight/2;this.removeUpdateCallback(this.HANDLER_TAP),this.HANDLER_TAP=this.onTap.bind(this,{clientX:t,clientY:e}),this.addUpdateCallback(this.HANDLER_TAP)},registerEventListeners:function(){window.addEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.addEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.addEventListener("keyup",this.HANDLER_KEY_UP,!0)},unregisterEventListeners:function(){window.removeEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.removeEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.removeEventListener("keyup",this.HANDLER_KEY_UP,!0)},dispose:function(){function t(e){for(var i=e.children.length-1;i>=0;i--)t(e.children[i]),e.remove(e.children[i]);e instanceof w||e instanceof b?(e.dispose(),e=null):e.dispatchEvent&&e.dispatchEvent("dispose")}this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.unregisterEventListeners(),t(this.scene),this.widget&&(this.widget.dispose(),this.widget=null),i.Cache&&i.Cache.enabled&&i.Cache.clear()},destroy:function(){this.dispose(),this.render(),window.cancelAnimationFrame(this.requestAnimationId)},onPanoramaDispose:function(t){t instanceof x&&this.hideVideoWidget(),t===this.panorama&&(this.panorama=null)},loadAsyncRequest:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=new window.XMLHttpRequest;i.onloadend=function(t){e(t)},i.open("GET",t,!0),i.send(null)},addViewIndicator:function(){var t=this;function e(e){if(0!==e.loaded){var n=e.target.responseXML.documentElement;n.style.width=t.viewIndicatorSize+"px",n.style.height=t.viewIndicatorSize+"px",n.style.position="absolute",n.style.top="10px",n.style.left="10px",n.style.opacity="0.5",n.style.cursor="pointer",n.id="panolens-view-indicator-container",t.container.appendChild(n);var s=n.querySelector("#indicator"),o=function(){t.radius=.225*t.viewIndicatorSize,t.currentPanoAngle=t.camera.rotation.y-i.Math.degToRad(90),t.fovAngle=i.Math.degToRad(t.camera.fov),t.leftAngle=-t.currentPanoAngle-t.fovAngle/2,t.rightAngle=-t.currentPanoAngle+t.fovAngle/2,t.leftX=t.radius*Math.cos(t.leftAngle),t.leftY=t.radius*Math.sin(t.leftAngle),t.rightX=t.radius*Math.cos(t.rightAngle),t.rightY=t.radius*Math.sin(t.rightAngle),t.indicatorD="M "+t.leftX+" "+t.leftY+" A "+t.radius+" "+t.radius+" 0 0 1 "+t.rightX+" "+t.rightY,t.leftX&&t.leftY&&t.rightX&&t.rightY&&t.radius&&s.setAttribute("d",t.indicatorD)};t.addUpdateCallback(o);var a=function(){this.style.opacity="1"},r=function(){this.style.opacity="0.5"};n.addEventListener("mouseenter",a),n.addEventListener("mouseleave",r)}}this.loadAsyncRequest(d.ViewIndicator,e)},appendControlItem:function(t){var e=this.widget.createCustomItem(t);return"video"===t.group?this.widget.videoElement.appendChild(e):this.widget.barElement.appendChild(e),e},clearAllCache:function(){i.Cache.clear()}}),i.REVISION!=r&&console.warn("three.js version is not matched. Please consider use the target revision ".concat(r)),window.TWEEN=A,e.BasicPanorama=I,e.CONTROLS=h,e.CameraPanorama=D,e.CubePanorama=O,e.CubeTextureLoader=m,e.DataImage=d,e.EmptyPanorama=C,e.GoogleStreetviewPanorama=R,e.ImageLittlePlanet=T,e.ImageLoader=u,e.ImagePanorama=M,e.Infospot=b,e.Hotspot=y,e.LittlePlanet=j,e.MODES=l,e.Media=v,e.Panorama=w,e.REVISION=o,e.Reticle=g,e.THREE_REVISION=r,e.THREE_VERSION=c,e.TextureLoader=p,e.VERSION=a,e.VideoPanorama=x,e.Viewer=N,e.Widget=E,Object.defineProperty(e,"__esModule",{value:!0})}(e,i(11))}).call(this,i(60))},92:function(t,e,i){"use strict";i.r(e),e.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAACLUlEQVRo3u2ZPS8EQRjHf85LISovifcSPZEo+Q5CiA8g0a9PgB45olZJKLw0kvsAQiMaOlwUXiqKOwWK2U0ua4a5vWdnVtw/+Td3z97+nmfnZmafgbrq+t9qEPqdRmAcmARGgRGgB2gLv38DHoBr4AIoAGfAh+8CDABrQBH4rNL3wCrQ7wO8C9gGygnA4y4DeaDTFfwc8CIAHvczMJsmeDOwkwJ43FvhvUTVCpw4gI98HN5TrPIu4SOfAi0SCbgYNibna4Wf9wgfeSYpfAfwlIEEXkg4xW5nAD7yZrXw/cgsUlIuA4M60JwhgSWEZgAhtQCLtsE51D7Fd9XjLqI2jb9qIgOwJo/rqh3XpOSzF9aUTQJjvil/0KhNAkOGi9+BAOgLvRx+5jJ22CZL01Y50MQGjmOfbBIwzf89mthux7GleKBpHdBJ9/7c6Dj2m3QJvBliFyw/SzP21SapK8zLeQD0hg4wD7e0Yi9tEtg3XJwF78VhdUPo3CZLT/rGpkug4JvyB1mx5YA7/A+XuG91Bdc9gQ9g13epNdqlilZk1l5oSqhtRlXKZwA88nqSR9ZONl7qn6mhbzqbgQSmk8JH2vIIv1ErPKiN1YEH+COgSSIBUI3WY4fwhwg2dyM142Zm2pCsvE4zpDM7PSLwh7VVB6rdVxIAL6Hm+XZX8JXqQx3UJdk73QErJFhhKyV1zJpDtWOmUK2P4RCs8pi1CNygtsQF1HGr92PWuur66/oCexhw1JCuN5cAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMTEtMTdUMjE6MTA6MjYrMDA6MDAP7Xq1AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTExLTE3VDIxOjEwOjI2KzAwOjAwfrDCCQAAAABJRU5ErkJggg=="}},[[261,1,2]]]);
//# sourceMappingURL=main.b5809f87.chunk.js.map