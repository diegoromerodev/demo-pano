{"version":3,"sources":["images sync /^/.*$","images/nwq0ch7-360-panorama-office-interior.jpeg","images/pixexid-0dd33da2-d75b-43a6-b960-873085130d0f.jpeg","images/pixexid-cae8e9c2-31bf-45a8-92c5-92e8fc7fe3e4.jpeg","images/pixexid-eee4a7fe-3715-4f06-ad24-17633cd2245c.jpeg","images/pixexid-fbea04c4-40ac-4817-8e93-8921b23aa342.jpeg","images/qfl0cv2-360-panorama-lombard-street-san-francisco.jpeg","images/tj110cok-360-panorama-kitchen.jpeg","images/tu09tpc-a-large-bed-in-a-room.jpeg","circle.png","components/Thumb.js","components/Home.js","components/Hero.js","components/NavBar.js","GlobalStyles.js","components/ThumbText.js","components/InfoSpot.js","components/FloorPlan.js","panos.js","components/Pano.js","App.js","index.js","images/city-pan.jpeg","dependencies/panolens.js","components/91381.png"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","styled","div","img","h4","p","AllPanos","section","main","FullBar","h2","nav","Logo","h3","SignedInAs","NavBar","navigate","useNavigate","onClick","createGlobalStyle","RoundedCont","PanoName","PanoDetailsCont","ThumbText","infospot","deleteInfo","quantity","type","style","cursor","background","uuid","width","height","viewBox","fill","d","MorePanos","SidePanos","InfoSpot","infospots","deleteInfospot","console","log","i","index","FloorPlanContainer","Point","props","top","left","FloorPlan","handleClick","useState","x","y","points","src","panosList","PANOLENS","PanoPageContainer","CreatorDetails","PanoContainer","FlexContainer","StyledPicker","ChromePicker","StyledButton","button","toSwitchPano","panoImg","Pano","panoRef","useRef","viewer","setViewer","controls","setControls","color","setColors","isEditing","currentPano","setCurrentPano","setInfospots","setHotspots","addMode","setAddMode","lastIndex","setLastIndex","placeHotspots","hotspot","require","default","clickedPos","getPosition","position","set","parseFloat","z","addScalar","customMaterial","THREE","uniforms","s","value","b","glowColor","vertexShader","document","getElementById","textContent","fragmentShader","side","blending","transparent","depthFunc","geometry","hotspotAccent","renderOrder","scale","values","scene","add","setContainer","renderer","domElement","addEventListener","panorama","update","toggleInfospotVisibility","prevState","placeInfoSpots","infospotId","children","filter","c","length","container","createElement","infoElement","transform","backgroundColor","padding","borderRadius","boxShadow","title","moreInfo","appendChild","addHoverElement","useEffect","newViewer","current","controlBar","autoRotate","dampingFactor","autoHideInfospot","output","window","scrollTo","panos","light","getControl","includes","replaceColor","image","colors","targetColor","err","jimpObject","a","getBase64Async","imgData","texture","newImg","Image","onload","forEach","info","needsUpdate","material","_listeners","click","bind","tweenControlCenter","setCameraFov","rotateSpeed","ref","indexPano","Math","floor","random","setPanorama","display","gap","className","onChangeComplete","pickedColor","hex","App","GlobalStyles","path","element","ReactDOM","render","version","dependencies","three","REVISION","split","VERSION","THREE_REVISION","THREE_VERSION","replace","CONTROLS","ORBIT","DEVICEORIENTATION","MODES","UNKNOWN","NORMAL","CARDBOARD","STEREO","DataImage","Info","Arrow","FullscreenEnter","FullscreenLeave","VideoPlay","VideoPause","WhiteTile","Setting","ChevronRight","Check","ViewIndicator","ImageLoader","load","url","cached","request","arrayBufferView","blob","urlCreator","reference","onLoad","onProgress","onError","iconName","Cache","enabled","hasOwnProperty","undefined","get","setTimeout","loaded","total","URL","webkitURL","createElementNS","onImageLoaded","revokeObjectURL","indexOf","crossOrigin","this","XMLHttpRequest","open","process","npm_lifecycle_event","onreadystatechange","readyState","status","responseType","event","lengthComputable","response","currentTarget","Uint8Array","Blob","createObjectURL","send","TextureLoader","Texture","isJPEG","search","format","RGBFormat","RGBAFormat","CubeTextureLoader","urls","progress","all","loadings","CubeTexture","images","Media","constraints","defaultConstraints","video","ideal","facingMode","exact","audio","assign","devices","stream","ratioScalar","videoDeviceIndex","Reticle","autoSelect","dwellTime","dpr","devicePixelRatio","createCanvas","canvas","context","SpriteMaterial","createCanvasTexture","Sprite","call","canvasWidth","canvasHeight","Color","rippleDuration","center","startTimestamp","timerId","callback","frustumCulled","updateCanvasArcByProgress","createCommonjsModule","fn","prototype","create","EventDispatcher","setScene","enumerateDevices","resolvedPromise","Promise","navigator","mediaDevices","switchNextVideoDevice","stop","start","setVideDeviceIndex","getDevices","then","validate","_devices","device","push","reg","RegExp","test","kind","getUserMedia","setMediaStream","playVideo","onCatchError","error","warn","catch","targetDevice","onVideoDevices","deviceId","createVideoElement","active","getTracks","removeEventListener","onWindowResize","srcObject","createVideoTexture","play","dispatchEvent","pauseVideo","pause","VideoTexture","generateMipmaps","minFilter","LinearFilter","magFilter","canPlay","setAttribute","objectPosition","objectFit","videoWidth","videoHeight","clientWidth","clientHeight","ratio","repeat","constructor","setColor","copy","CanvasTexture","getContext","shadowBlur","shadowColor","degree","PI","getStyle","lineWidth","clearRect","beginPath","arc","fillStyle","strokeStyle","stroke","closePath","ripple","duration","timestamp","performance","now","requestAnimationFrame","opacity","radius","r","g","cancelAnimationFrame","show","visible","hide","end","Tween","_Group","_tweens","_tweensAddedDuringUpdate","getAll","tweenId","removeAll","tween","getId","remove","time","preserve","tweenIds","TWEEN","_isPlaying","Group","_nextId","nextId","self","hrtime","Date","getTime","object","group","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_repeatDelayTime","_yoyo","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onRepeatCallback","_onCompleteCallback","_onStopCallback","_group","_id","isPlaying","to","properties","property","Array","concat","stopChainedTweens","Infinity","numChainedTweens","delay","amount","times","repeatDelay","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","arguments","onStart","onUpdate","onRepeat","onComplete","onStop","elapsed","charAt","isFinite","tmp","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","sin","Exponential","pow","Circular","sqrt","Elastic","Back","Bounce","v","m","f","Utils","Bezier","n","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","p2","p3","v0","v1","t2","Infospot","imageSrc","animated","scaleFactor","isHovering","toPanorama","cursorStyle","mode","rotation","originalRaycast","raycast","HANDLER_FOCUS","DoubleSide","depthTest","scaleUpAnimation","scaleDownAnimation","postLoad","textureScale","Vector3","naturalWidth","naturalHeight","showAnimation","enableRaycast","hideAnimation","onHover","onHoverStart","onHoverEnd","onDualEyeEffect","onDismiss","setFocusMethod","Hotspot","Mesh","castShadow","CylinderGeometry","translate","MeshBasicMaterial","AlwaysDepth","Widget","DEFAULT_TRANSITION","TOUCH_ENABLED","DocumentTouch","PREVENT_EVENT_HANDLER","preventDefault","stopPropagation","barElement","fullscreenElement","videoElement","settingElement","mainMenu","activeMainItem","activeSubMenu","mask","Panorama","ImageQualityLow","ImageQualityFair","ImageQualityMedium","ImageQualityHigh","ImageQualitySuperHigh","animationDuration","defaultInfospotSize","linkedSpots","isInfospotVisible","linkingImageURL","linkingImageScale","BackSide","infospotAnimation","fadeIn","setupTransitions","ImagePanorama","_geometry","_material","SphereBufferGeometry","EmptyPanorama","BufferGeometry","addAttribute","BufferAttribute","Float32Array","CubePanorama","edgeLength","shader","ShaderLib","BoxBufferGeometry","ShaderMaterial","BasicPanorama","VideoPanorama","options","loop","muted","autoplay","playsinline","videoProgress","resumeVideoProgress","toggleVideo","setVideoCurrentTime","GoogleStreetviewLoader","gl","parameters","_parameters","_zoom","_panoId","_panoClient","google","maps","StreetViewService","_count","_total","_canvas","_ctx","_wc","_hc","result","copyright","onSizeChange","onPanoramaLoad","levelsW","levelsH","widths","heights","maxW","maxH","max","getParameter","MAX_TEXTURE_SIZE","GoogleStreetviewPanorama","panoId","apiKey","gsvLoader","loadRequested","setupGoogleMapAPI","data","HTMLElement","getContainer","lockHoverElement","unlockHoverElement","mouseEvent","clientX","clientY","right","_width","_height","locked","halfWidth","halfHeight","cloneNode","translateElement","delta","verticalDelta","setElementStyle","webkitTransform","msTransform","setText","text","setCursorHoverStyle","addHoverText","maxWidth","maxHeight","textShadow","fontFamily","classList","el","removeHoverElement","removeChild","method","focus","dispose","parent","addControlBar","bar","styleTranslate","styleOpacity","gradientStyle","scope","float","transition","pointerEvents","isHidden","toggle","menu","createDefaultMenu","createMainMenu","createMask","deactivate","handler","subMenu","addControlButton","name","createFullscreenButton","createSettingButton","createVideoControl","item","onTap","activated","activate","createCustomItem","backgroundImage","webkitTransition","changeSize","unslideAll","stylesheetId","isFullscreen","tapSkipped","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","onFullScreenChange","querySelector","sheet","innerHTML","body","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","controlButton","paused","createVideoControlButton","seekBar","createVideoControlSeekbar","progressElement","progressElementControl","mouseX","percentageNow","percentageNext","isDragging","onMouseDown","changedTouches","parseInt","addControlListeners","onVideoControlDrag","setProgress","onVideoControlStop","removeControlListeners","passive","target","percentage","pageX","getBoundingClientRect","offsetX","onDispose","marginTop","createMenuItem","textDecoration","slide","unslide","setIcon","icon","setSelectionTitle","selection","addSelection","fontSize","fontWeight","addIcon","flip","backgroundSize","addSubMenu","items","createSubMenu","createMenuItemHeader","header","borderBottom","paddingBottom","menus","createMenu","onNextTick","slideAll","parentElement","addItem","paddingLeft","setActiveItem","activeItem","addHeader","bottom","visibility","overflow","willChange","backgroundRepeat","backgroundPosition","webkitUserSelect","MozUserSelect","userSelect","webkitFilter","mergeStyleOptions","invertedObject","vector","Object3D","scalePlaceHolder","intersects","traverse","child","getZoomLevel","innerWidth","updateTexture","isVisible","setLinkingImage","link","pano","imageScale","spot","reset","fadeInAnimation","fadeOutAnimation","enterTransition","leaveTransition","onFadeAnimationUpdate","alpha","fadeOut","onEnter","onLeave","recursiveDispose","HTMLImageElement","tCube","isMobile","check","userAgent","vendor","opera","substr","onloadeddata","setVideoTexture","querySelectorAll","source","currentTime","resetVideo","videoTexture","isVideoPaused","Number","isNaN","onSuccess","isVideoMuted","muteVideo","unmuteVideo","getVideoElement","adaptTextureToZoom","w","h","ceil","composeFromTile","px","py","drawImage","zoom","composePanorama","useWebGL","panoid","loadPano","getPanoramaById","StreetViewStatus","OK","location","setZoom","loadGSVLoader","script","setGSVLoader","getGSVLoader","StereographicShader","Matrix4","join","LittlePlanet","size","createGeometry","createMaterial","EPS","frameId","dragging","userMouse","Vector2","quatA","Quaternion","quatB","quatCur","quatSlerp","vectorX","vectorY","ImageLittlePlanet","CameraPanorama","media","onPanolensContainer","onPanolensScene","OrbitControls","noZoom","zoomSpeed","minDistance","maxDistance","minZoom","maxZoom","noRotate","noPan","keyPanSpeed","autoRotateSpeed","minPolarAngle","maxPolarAngle","momentumDampingFactor","momentumScalingFactor","momentumKeydownFactor","minFov","maxFov","minAzimuthAngle","maxAzimuthAngle","noKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ZOOM","MIDDLE","PAN","eventPrevious","keyUp","keyBottom","keyLeft","keyRight","MEPS","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","panOffset","offset","dollyStart","dollyEnd","dollyDelta","theta","phi","phiDelta","thetaDelta","pan","lastPosition","lastQuaternion","momentumLeft","momentumUp","momentumOn","STATE","NONE","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","state","target0","clone","position0","zoom0","quat","setFromUnitVectors","up","quatInverse","inverse","changeEvent","startEvent","endEvent","getAutoRotationAngle","getZoomScale","onMouseMove","onMouseUp","subVectors","rotateLeft","rotateUp","dollyIn","dollyOut","onMouseWheel","wheelDelta","detail","fov","updateProjectionMatrix","onKeyUp","keyCode","onKeyDown","touchstart","touches","pageY","dx","dy","distance","touchmove","touchend","setLastQuaternion","quaternion","getLastPosition","angle","panLeft","te","matrix","elements","multiplyScalar","panUp","deltaX","deltaY","PerspectiveCamera","targetDistance","sub","tan","OrthographicCamera","momentum","abs","dollyScale","min","ignoreUpdate","applyQuaternion","atan2","lookAt","distanceToSquared","dot","getPolarAngle","getAzimuthalAngle","DeviceOrientationControls","camera","rotY","rotX","tempX","tempY","reorder","deviceOrientation","screenOrientation","alphaOffsetAngle","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","orientation","onTouchStartEvent","onTouchMoveEvent","degToRad","updateAlphaOffsetAngle","setCameraQuaternion","beta","gamma","orient","vectorFingerY","zee","euler","Euler","q0","q1","fingerQY","fingerQX","setFromAxisAngle","multiply","setFromEuler","connect","disconnect","CardboardEffect","_camera","_scene","Scene","_stereo","StereoCamera","aspect","_params","NearestFilter","_renderTarget","WebGLRenderTarget","scissorTest","distortion","PlaneBufferGeometry","removeAttribute","toNonIndexed","positions","attributes","array","uvs","uv","count","positions2","uvs2","l","scalar","mesh","setSize","pixelRatio","getPixelRatio","updateMatrixWorld","autoClear","clear","scissor","viewport","setRenderTarget","cameraL","clearDepth","cameraR","registerMouseEvents","onContextMenu","unregisterMouseEvents","pinchDistance","onUpdateCallback","angleX","angleY","addZoomDelta","lowerBound","upperBound","slerp","makeRotationFromQuaternion","resolution","tDiffuse","StereoEffect","setEyeSeparation","eyeSep","getSize","setScissorTest","setScissor","setViewport","Viewer","controlButtons","autoHideControlBar","horizontalView","clickTolerance","cameraFov","reverseDragging","enableReticle","autoReticleSelect","viewIndicator","indicatorSize","autoRotateActivationDuration","innerHeight","WebGLRenderer","antialias","sceneReticle","viewIndicatorSize","reticle","tempEnableReticle","widget","hoverObject","pressEntityObject","pressObject","raycaster","Raycaster","raycasterPoint","updateCallbacks","requestAnimationId","cameraFrustum","Frustum","cameraViewProjectionMatrix","autoRotateRequestId","outputDivElement","touchSupported","HANDLER_MOUSE_DOWN","HANDLER_MOUSE_UP","HANDLER_MOUSE_MOVE","HANDLER_WINDOW_RESIZE","HANDLER_KEY_DOWN","HANDLER_KEY_UP","HANDLER_TAP","OUTPUT_INFOSPOT","tweenLeftAnimation","tweenUpAnimation","setPixelRatio","setClearColor","passiveRendering","control","effect","addReticle","addDefaultControlBar","addViewIndicator","reverseDraggingDirection","enableReticleControl","registerMouseAndTouchEvents","addOutputElement","registerEventListeners","animate","eventHandler","addPanoramaEventListener","buttonName","point","panoramaWorldPosition","outputPosition","intersectObject","getWorldPosition","toFixed","leavingPanorama","hideInfospot","afterEnterComplete","dispatchEventToChildren","activateWidgetItem","controlIndex","ControlMenuItem","ModeMenuItem","enableEffect","disableReticleControl","disableEffect","unregisterMouseAndTouchEvents","registerReticleEvent","updateReticleEvent","unregisterReticleEvent","enableAutoRate","disableAutoRate","clearTimeout","toggleVideoPlay","onVideoUpdate","addUpdateCallback","removeUpdateCallback","splice","showVideoWidget","hideVideoWidget","updateVideoPlayButton","setCameraControl","getScene","getCamera","getRenderer","getControlId","getNextControlId","getNextControlIndex","nextIndex","enableControl","disableControl","toggleNextControl","getScreenVector","worldVector","widthHalf","heightHalf","project","checkSpriteInViewport","sprite","matrixWorldInverse","getInverse","matrixWorld","multiplyMatrices","projectionMatrix","setFromMatrix","intersectsSprite","ha","va","chv","cvv","hv","vv","vptc","ov","nv","getWorldDirection","normalize","angleTo","tweenControlCenterByObject","isUnderScalePlaceHolder","traverseAncestors","ancestor","invertXVector","windowWidth","windowHeight","expand","contains","isAndroid","adjustWidth","documentElement","adjustHeight","converter","world","message","onTarget","toggleControlBar","setFromCamera","intersectObjects","intersect_entity","getConvertedIntersect","intersect","passThrough","entity","key","onChange","offsetLeft","unregisterEventListeners","destroy","onPanoramaDispose","loadAsyncRequest","onloadend","loadViewIndicator","asyncEvent","viewIndicatorDiv","responseXML","indicator","setIndicatorD","currentPanoAngle","fovAngle","leftAngle","rightAngle","leftX","leftY","rightX","rightY","indicatorD","indicatorOnMouseEnter","indicatorOnMouseLeave","appendControlItem","option","clearAllCache","defineProperty","factory"],"mappings":"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","file":"static/js/main.b5809f87.chunk.js","sourcesContent":["var map = {\n\t\"./city-pan.jpeg\": 61,\n\t\"./nwq0ch7-360-panorama-office-interior.jpeg\": 115,\n\t\"./pixexid-0dd33da2-d75b-43a6-b960-873085130d0f.jpeg\": 116,\n\t\"./pixexid-cae8e9c2-31bf-45a8-92c5-92e8fc7fe3e4.jpeg\": 117,\n\t\"./pixexid-eee4a7fe-3715-4f06-ad24-17633cd2245c.jpeg\": 118,\n\t\"./pixexid-fbea04c4-40ac-4817-8e93-8921b23aa342.jpeg\": 119,\n\t\"./qfl0cv2-360-panorama-lombard-street-san-francisco.jpeg\": 120,\n\t\"./tj110cok-360-panorama-kitchen.jpeg\": 121,\n\t\"./tu09tpc-a-large-bed-in-a-room.jpeg\": 122\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 114;","export default __webpack_public_path__ + \"static/media/nwq0ch7-360-panorama-office-interior.de441855.jpeg\";","export default __webpack_public_path__ + \"static/media/pixexid-0dd33da2-d75b-43a6-b960-873085130d0f.40324b46.jpeg\";","export default __webpack_public_path__ + \"static/media/pixexid-cae8e9c2-31bf-45a8-92c5-92e8fc7fe3e4.5966a102.jpeg\";","export default __webpack_public_path__ + \"static/media/pixexid-eee4a7fe-3715-4f06-ad24-17633cd2245c.8ff3cd33.jpeg\";","export default __webpack_public_path__ + \"static/media/pixexid-fbea04c4-40ac-4817-8e93-8921b23aa342.be22bed6.jpeg\";","export default __webpack_public_path__ + \"static/media/qfl0cv2-360-panorama-lombard-street-san-francisco.1f46be57.jpeg\";","export default __webpack_public_path__ + \"static/media/tj110cok-360-panorama-kitchen.70e0196a.jpeg\";","export default __webpack_public_path__ + \"static/media/tu09tpc-a-large-bed-in-a-room.f4e8def6.jpeg\";","export default __webpack_public_path__ + \"static/media/circle.9ee1d232.png\";","import React from \"react\";\nimport { useNavigate } from \"react-router\";\nimport styled from \"styled-components\";\n\nconst RoundedCont = styled.div`\n  border-radius: 1rem;\n  box-shadow: 0 0 20px rgba(222, 222, 222, 0.9);\n  overflow: hidden;\n  height: 20vh;\n  display: grid;\n  grid-template-rows: 1.5fr 1fr;\n  cursor: pointer;\n  border: 2px solid #ddd;\n  background: linear-gradient(180deg, #fafafa, #fdfdfd);\n  &:hover img {\n    animation: panothumb 4s ease-in-out infinite alternate;\n  }\n  @keyframes panothumb {\n    from {\n      left: 0;\n    }\n    to {\n      left: -100%;\n    }\n  }\n`;\n\nconst PanoThumbCont = styled.div`\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n  border-radius: 0 0 5px 5px;\n`;\n\nconst ImgThumb = styled.img`\n  object-fit: fill;\n  width: 200%;\n  position: absolute;\n  top: -80%;\n  transition: all 2s ease;\n`;\n\nconst PanoName = styled.h4`\n  color: #333;\n`;\n\nconst PanoDetailsCont = styled.div`\n  padding: 1rem;\n`;\nconst PanoAuthor = styled.p`\n  font-weight: 500;\n`;\n\nconst Thumb = ({ pano }) => {\n  const navigate = useNavigate();\n  const panoThumb = require(`../images/${pano.image}`).default;\n  return (\n    <RoundedCont onClick={() => navigate(\"/testroutes-panorama\")}>\n      <PanoThumbCont>\n        <ImgThumb src={panoThumb} />\n      </PanoThumbCont>\n\n      <PanoDetailsCont>\n        <PanoName>{pano.title}</PanoName>\n        <PanoAuthor>{pano.user}</PanoAuthor>\n      </PanoDetailsCont>\n    </RoundedCont>\n  );\n};\n\nexport default Thumb;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Thumb from \"./Thumb\";\nimport Hero from \"./Hero\";\n\nconst panos = [\n  {\n    user: \"Diego Romero\",\n    image: \"city-pan.jpeg\",\n    title: \"A beautiful day in the city\",\n    id: 1,\n  },\n  {\n    user: \"Arturo Romero\",\n    image: \"pixexid-eee4a7fe-3715-4f06-ad24-17633cd2245c.jpeg\",\n    title: \"Nice panoramic view\",\n    id: 2,\n  },\n  {\n    user: \"Daniel Joseph\",\n    image: \"pixexid-fbea04c4-40ac-4817-8e93-8921b23aa342.jpeg\",\n    title: \"Strolling freely\",\n    id: 3,\n  },\n  {\n    user: \"Daniel Joseph\",\n    image: \"pixexid-cae8e9c2-31bf-45a8-92c5-92e8fc7fe3e4.jpeg\",\n    title: \"I love this one\",\n    id: 4,\n  },\n  {\n    user: \"Diego Romero\",\n    image: \"pixexid-0dd33da2-d75b-43a6-b960-873085130d0f.jpeg\",\n    title: \"Check out my collection\",\n    id: 5,\n  },\n  {\n    user: \"Diego Romero\",\n    image: \"city-pan.jpeg\",\n    title: \"A beautiful day in the city\",\n    id: 6,\n  },\n  {\n    user: \"Arturo Romero\",\n    image: \"pixexid-eee4a7fe-3715-4f06-ad24-17633cd2245c.jpeg\",\n    title: \"Nice panoramic view\",\n    id: 7,\n  },\n  {\n    user: \"Daniel Joseph\",\n    image: \"pixexid-fbea04c4-40ac-4817-8e93-8921b23aa342.jpeg\",\n    title: \"Strolling freely\",\n    id: 8,\n  },\n  {\n    user: \"Daniel Joseph\",\n    image: \"pixexid-cae8e9c2-31bf-45a8-92c5-92e8fc7fe3e4.jpeg\",\n    title: \"I love this one\",\n    id: 9,\n  },\n  {\n    user: \"Diego Romero\",\n    image: \"pixexid-0dd33da2-d75b-43a6-b960-873085130d0f.jpeg\",\n    title: \"Check out my collection\",\n    id: 10,\n  },\n  {\n    user: \"Arturo Romero\",\n    image: \"pixexid-eee4a7fe-3715-4f06-ad24-17633cd2245c.jpeg\",\n    title: \"Nice panoramic view\",\n    id: 11,\n  },\n  {\n    user: \"Daniel Joseph\",\n    image: \"pixexid-fbea04c4-40ac-4817-8e93-8921b23aa342.jpeg\",\n    title: \"Strolling freely\",\n    id: 12,\n  },\n];\n\nconst HomeCont = styled.div`\n  padding: 2rem;\n`;\n\nexport const AllPanos = styled.main`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2rem;\n`;\n\nconst Newest = styled.h2`\n  padding: 1rem 0;\n  font-size: 2rem;\n`;\n\nconst Home = () => {\n  return (\n    <HomeCont>\n      <Hero />\n      <Newest>Newest panoramas</Newest>\n      <AllPanos>\n        {panos.map((p) => {\n          return <Thumb key={p.id} pano={p} />;\n        })}\n      </AllPanos>\n    </HomeCont>\n  );\n};\n\nexport default Home;\n","import React, { useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport * as PANOLENS from \"../dependencies/panolens\";\n\nconst HeroPanoCont = styled.section`\n  border-radius: 1rem;\n  height: 40vh;\n  overflow: hidden;\n  position: relative;\n  margin-bottom: 2rem;\n`;\n\nconst HeroTextCont = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  & h3 {\n    color: #fafafa;\n    font-size: 4rem;\n    position: relative;\n    text-shadow: 0 0 20px #333;\n  }\n  &::before {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    opacity: 0.5;\n    background-color: #333;\n    content: \" \";\n    top: 0;\n    left: 0;\n    z-index: 0;\n  }\n`;\n\nconst HeroPano = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n`;\n\nconst Hero = () => {\n  const heroPanoRef = useRef();\n  useEffect(() => {\n    const panoHeroImg = new PANOLENS.ImagePanorama(\n      require(\"../images/city-pan.jpeg\").default\n    );\n    const viewer = new PANOLENS.Viewer({\n      container: heroPanoRef.current,\n      controlBar: false,\n      autoRotate: true,\n    });\n    viewer.add(panoHeroImg);\n  }, []);\n  return (\n    <HeroPanoCont>\n      <HeroPano ref={heroPanoRef} />\n      <HeroTextCont>\n        <h3>OVER 1000+ PANORAMAS</h3>\n      </HeroTextCont>\n    </HeroPanoCont>\n  );\n};\n\nexport default Hero;\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport { useNavigate } from \"react-router\"\n\nconst FullBar = styled.nav`\n    background-color: #fafafa;\n    box-shadow: 0 4px 10px rgba(222,222,222, 0.9);\n    padding: 10px 3rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n`\n\nconst Logo = styled.h3`\n    font-family: Inter, sans-serif;\n    font-weight: 700;\n    font-size: 2.5rem;\n    letter-spacing: -2px;\n    cursor: pointer;\n    color: #333;\n`\n\nconst SignedInAs = styled.div`\n    border-radius: 5px;\n    background-color: #333;\n    padding: 0.6rem 1rem;\n    color: #fafafa;\n`\n\nconst NavBar = () => {\n    const navigate = useNavigate();\n    return (\n        <FullBar>\n            <Logo onClick={() => navigate(\"/\")}>panorama.</Logo>\n            <SignedInAs>\n                <p>Signed in as Diego Romero</p>\n            </SignedInAs>\n        </FullBar>\n    )\n}\n\nexport default NavBar","import { createGlobalStyle } from \"styled-components\";\n\nexport default createGlobalStyle`\n    *, *::before, *::after {\n        margin: 0;\n        padding: 0;\n        border: none;\n        box-sizing: border-box;\n    }\n\n    body {\n        font-family: Inter;\n        background-color: #f9f9f9;\n        overflow-y: scroll;\n        overflow-x: hidden;\n    }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst RoundedCont = styled.div`\n  border-radius: 1rem;\n  box-shadow: 0 0 20px rgba(222, 222, 222, 0.9);\n  overflow: hidden;\n  display: grid;\n  border: 2px solid #f0117a;\n`;\n\nconst PanoName = styled.h4`\n  color: #333;\n`;\n\nconst PanoDetailsCont = styled.div`\n  padding: 10px;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst ThumbText = ({ infospot, deleteInfo, quantity }) => {\n  return (\n    <RoundedCont>\n      <PanoDetailsCont>\n        <PanoName>\n          <p>{`Infospot #${quantity + 1}`}</p>\n        </PanoName>\n        <button\n          type=\"button\"\n          style={{ cursor: \"pointer\", background: \"transparent\" }}\n          onClick={() => deleteInfo(infospot.uuid)}\n        >\n          <svg style={{ width: 24, height: 24 }} viewBox=\"0 0 24 24\">\n            <path\n              fill=\"red\"\n              d=\"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z\"\n            />\n          </svg>\n        </button>\n      </PanoDetailsCont>\n    </RoundedCont>\n  );\n};\n\nexport default ThumbText;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport ThumbText from \"./ThumbText\";\n\nconst AllPanos = styled.main`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  box-sizing: border-box;\n`;\n\nconst MorePanos = styled.div`\n  padding: 2rem 2rem;\n  & h3 {\n    font-weight: 200;\n    font-size: 2rem;\n    margin-bottom: 1rem;\n    letter-spacing: -2px;\n  }\n`;\nconst SidePanos = styled(AllPanos)`\n  grid-template-columns: repeat(1, 1fr);\n  max-height: 50vh;\n  overflow-y: scroll;\n`;\n\nconst InfoSpot = ({ infospots, deleteInfospot }) => {\n  console.log(infospots);\n  return (\n    <>\n      <MorePanos>\n        <SidePanos>\n          {infospots.map((i, index) => {\n            return (\n              <ThumbText\n                key={i.uuid}\n                deleteInfo={deleteInfospot}\n                infospot={i}\n                quantity={index}\n              />\n            );\n          })}\n        </SidePanos>\n      </MorePanos>\n    </>\n  );\n};\n\nexport default InfoSpot;\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst FloorPlanContainer = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  transition: all 0.5s ease;\r\n  transform: scale(50%);\r\n  transform-origin: bottom left;\r\n  opacity: 0.5;\r\n  :hover {\r\n    transform: scale(100%);\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\nconst Point = styled.div`\r\n  position: absolute;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  border: 2px solid #333;\r\n  background-color: #f02211;\r\n  top: ${(props) => props.top}px;\r\n  left: ${(props) => props.left}px;\r\n  box-shadow: 5px 1px 10px #000;\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst FloorPlan = ({ handleClick }) => {\r\n  const [points, setPoints] = useState([\r\n    { x: 60, y: 200 },\r\n    { x: 60, y: 50 },\r\n    { x: 100, y: 220 },\r\n    { x: 230, y: 200 },\r\n    { x: 120, y: 20 },\r\n    { x: 400, y: 300 },\r\n    { x: 500, y: 300 },\r\n  ]);\r\n  return (\r\n    <FloorPlanContainer>\r\n      <img src=\"https://www.verisk.com/contentassets/075f440842ac4502ad5023697c4d446d/aerial-imagery-property-survey.jpg?v=0\" />\r\n      {points.map((p) => (\r\n        // <Point onClick={() => handleClick(p)} top={p.y} left={p.x} />\r\n        <Point onClick={handleClick} top={p.y} left={p.x} />\r\n      ))}\r\n    </FloorPlanContainer>\r\n  );\r\n};\r\nexport default FloorPlan;\r\n","import * as PANOLENS from \"./dependencies/panolens\";\r\n\r\nconst panosList = [\r\n  new PANOLENS.ImagePanorama(\r\n    \"https://pchen66.github.io/Panolens/examples/asset/textures/equirectangular/tunnel.jpg\"\r\n  ),\r\n  new PANOLENS.ImagePanorama(\r\n    \"https://pchen66.github.io/Panolens/examples/asset/textures/equirectangular/sunset.jpg\"\r\n  ),\r\n  new PANOLENS.ImagePanorama(\r\n    \"https://pchen66.github.io/Panolens/examples/asset/textures/equirectangular/road.jpg\"\r\n  ),\r\n  new PANOLENS.ImagePanorama(\"https://i.imgur.com/bmMcne9.jpg\"),\r\n  new PANOLENS.ImagePanorama(\"https://i.imgur.com/02bDVAA.jpg\"),\r\n  new PANOLENS.ImagePanorama(\"https://i.imgur.com/b7iEM1x.jpg\"),\r\n];\r\n\r\nexport default panosList;\r\n","import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport replaceColor from \"replace-color\";\nimport * as THREE from \"three\";\nimport { ChromePicker } from \"react-color\";\nimport * as PANOLENS from \"../dependencies/panolens\";\nimport { AllPanos } from \"./Home\";\nimport InfoSpot from \"./InfoSpot\";\nimport FloorPlan from \"./FloorPlan\";\nimport panos from \"../panos\";\n\nconst PanoPageContainer = styled.div`\n  border-radius: 1rem;\n  flex: 6;\n  box-shadow: 0 0 20px #3333334a;\n  margin: 0 auto;\n  overflow: hidden;\n  margin: 2rem 0 0 2rem;\n`;\n\nconst CreatorDetails = styled.div`\n  padding: 1rem 2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  & h1 {\n    font-weight: 600;\n    letter-spacing: -2px;\n  }\n`;\n\nconst MorePanos = styled.div`\n  padding: 2rem 2rem;\n  & h4 {\n    text-align: center;\n    font-weight: 200;\n    font-size: 1.2rem;\n    margin: 0;\n  }\n`;\n\nconst PanoContainer = styled.div`\n  border-radius: 10px;\n  height: 80vh;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst FlexContainer = styled.div`\n  display: grid;\n  grid-template-columns: 80vw 20vw;\n`;\n\nconst SidePanos = styled(AllPanos)`\n  grid-template-columns: repeat(1, 1fr);\n`;\n\nconst StyledPicker = styled(ChromePicker)`\n  width: 100% !important;\n  *,\n  *::before,\n  *::after {\n    font-family: \"Segoe UI\";\n  }\n`;\n\nconst StyledButton = styled.button`\n  background-color: #fafafa;\n  color: #333;\n  padding: 0.5rem;\n  border: 1px solid #333;\n  cursor: pointer;\n  font-family: \"Segoe UI\";\n  flex: 1;\n  border-radius: 5px;\n  :hover {\n    background-color: #d0d0d0;\n  }\n  &.selected {\n    background-color: #333;\n    color: #fafafa;\n  }\n`;\n\nconst toSwitchPano = new PANOLENS.ImagePanorama(\n  \"https://drive.google.com/uc?export=view&id=1vfp5U50s7PnUXUcXEKeXDwSE4fLKfprX\"\n);\n\nconst panoImg = new PANOLENS.ImagePanorama(\"https://i.imgur.com/EcefCFb.jpg\");\n\nconst Pano = () => {\n  const panoRef = useRef();\n  const [viewer, setViewer] = useState();\n  const [controls, setControls] = useState();\n  const [color, setColors] = useState(\"#FAFAFA\");\n  const [isEditing, setIsEditing] = useState(true);\n  const [currentPano, setCurrentPano] = useState(true);\n  const [infospots, setInfospots] = useState([]);\n  const [hotspots, setHotspots] = useState([]);\n  const [addMode, setAddMode] = useState(\"infospot\");\n  const [lastIndex, setLastIndex] = useState();\n\n  const deleteInfospot = (uuid) => {\n    viewer.panorama.children = viewer.panorama.children.filter(\n      (e) => e.uuid !== uuid\n    );\n    setInfospots((prevState) => prevState.filter((i) => i.uuid !== uuid));\n  };\n\n  useEffect(() => {\n    const newViewer = new PANOLENS.Viewer({\n      container: panoRef.current,\n      controlBar: false,\n      autoRotate: false,\n      dampingFactor: 0,\n      autoHideInfospot: false,\n      output: \"console\",\n    });\n    newViewer.isEditing = isEditing;\n    window.scrollTo(0, 0);\n    newViewer.add(panoImg, toSwitchPano, ...panos);\n    const light = new THREE.AmbientLight(0x404040); // soft white light\n    newViewer.scene.add(light);\n    setViewer(newViewer);\n    setControls(newViewer.getControl());\n  }, []);\n\n  function handleClick() {\n    let indexPano;\n    do {\n      indexPano = Math.floor(Math.random() * panos.length);\n    } while (indexPano === lastIndex);\n    setLastIndex(indexPano);\n    viewer.setPanorama(panos[indexPano]);\n  }\n\n  function placeHotspots() {\n    if (!viewer.isEditing) return;\n    const hotspot = new PANOLENS.Hotspot(150, require(\"../circle.png\").default);\n    const clickedPos = viewer.getPosition();\n    hotspot.position.set(-clickedPos.x, parseFloat(clickedPos.y), clickedPos.z);\n    hotspot.position.addScalar(2);\n\n    const customMaterial = new THREE.ShaderMaterial({\n      uniforms: {\n        s: { type: \"f\", value: -0.5 },\n        b: { type: \"f\", value: 1.0 },\n        p: { type: \"f\", value: 3.0 },\n        glowColor: { type: \"c\", value: new THREE.Color(0xf0f0f0) },\n      },\n      vertexShader: document.getElementById(\"vertexShader\").textContent,\n      fragmentShader: document.getElementById(\"fragmentShader\").textContent,\n      side: THREE.FrontSide,\n      blending: THREE.NormalBlending,\n      transparent: true,\n      depthFunc: THREE.AlwaysDepth,\n    });\n    const geometry = new THREE.CylinderGeometry(5, 5, 20, 32);\n    const hotspotAccent = new THREE.Mesh(geometry, customMaterial);\n    hotspotAccent.renderOrder = -10;\n    hotspotAccent.scale.set(180, 10, 180);\n    hotspotAccent.position.set(...Object.values(hotspot.position));\n    viewer.scene.add(hotspotAccent);\n\n    hotspot.setContainer(viewer.renderer.domElement);\n    hotspot.addEventListener(\"click\", () => {\n      console.log(\"CLICKED ON HOTSPOT\");\n      console.log(currentPano);\n      console.log(setCurrentPano(!currentPano));\n    });\n    // hotspot.material = customMaterial;\n    viewer.panorama.add(hotspot);\n    viewer.update();\n    viewer.panorama.toggleInfospotVisibility(true);\n    setHotspots((prevState) => {\n      return [...prevState, hotspot];\n    });\n  }\n\n  function placeInfoSpots() {\n    if (!viewer.isEditing) return;\n    const infospot = new PANOLENS.Infospot(600, require(\"./91381.png\").default);\n    const infospotId =\n      viewer.panorama.children.filter((c) => c instanceof PANOLENS.Infospot)\n        .length + 1;\n    const clickedPos = viewer.getPosition();\n    infospot.position.set(clickedPos.x, clickedPos.y, clickedPos.z);\n    const container = document.createElement(\"div\");\n    const infoElement = document.createElement(\"main\");\n    infoElement.style.transform = \"translateY(120px)\";\n    infoElement.style.backgroundColor = \"white\";\n    infoElement.style.padding = \"20px\";\n    infoElement.style.borderRadius = \"5px\";\n    infoElement.style.boxShadow = \"0 0 10px #3333337a\";\n    const title = document.createElement(\"h2\");\n    title.textContent = `Infospot #${infospotId}`;\n    const moreInfo = document.createElement(\"p\");\n    moreInfo.textContent =\n      \"This is an example text. Built from scratch in HTML.\";\n    infoElement.appendChild(title);\n    infoElement.appendChild(moreInfo);\n    container.appendChild(infoElement);\n    infospot.addHoverElement(container);\n    // infospot.material = customMaterial;\n    viewer.panorama.add(infospot);\n    viewer.update();\n    viewer.panorama.toggleInfospotVisibility(true);\n    console.log(infospot);\n    setInfospots((prevState) => {\n      return [...prevState, infospot];\n    });\n  }\n\n  useEffect(() => {\n    if (![4, 7].includes(color.length)) return;\n    replaceColor(\n      {\n        image: require(\"./91381.png\").default,\n        colors: {\n          type: \"hex\",\n          targetColor: \"#000000\",\n          replaceColor: color,\n        },\n      },\n      async (err, jimpObject) => {\n        const imgData = await jimpObject.getBase64Async(\"image/png\");\n        const texture = new THREE.Texture();\n        const newImg = new Image();\n        newImg.src = imgData;\n        newImg.onload = () => {\n          infospots.forEach((info) => {\n            texture.image = newImg;\n            texture.needsUpdate = true;\n            info.material.map = texture;\n            info.material.needsUpdate = true;\n          });\n        };\n      }\n    );\n  }, [color, infospots]);\n\n  useEffect(() => {\n    if (!viewer) return;\n    if (addMode === \"infospot\") {\n      viewer.panorama._listeners.click[1] = placeInfoSpots.bind(viewer);\n    } else {\n      viewer.panorama._listeners.click[1] = placeHotspots.bind(viewer);\n    }\n  }, [viewer, isEditing, addMode]);\n\n  useEffect(() => {\n    if (controls) {\n      viewer.tweenControlCenter(new THREE.Vector3(10, -2, 0), 0);\n      viewer.setCameraFov(70);\n      controls.rotateSpeed = -0.3;\n      viewer.update();\n    }\n  }, [controls]);\n\n  console.log(infospots);\n  return (\n    <FlexContainer>\n      <PanoPageContainer>\n        <CreatorDetails>\n          <h1>Pano Builder by Diego Romero</h1>\n        </CreatorDetails>\n        <PanoContainer ref={panoRef}>\n          <FloorPlan handleClick={handleClick} />\n        </PanoContainer>\n      </PanoPageContainer>\n      <MorePanos>\n        <SidePanos>\n          <div style={{ display: \"flex\", gap: 10 }}>\n            <StyledButton\n              className={addMode === \"hotspot\" && \"selected\"}\n              onClick={() => setAddMode(\"hotspot\")}\n            >\n              Hotspot\n            </StyledButton>\n            <StyledButton\n              className={addMode === \"infospot\" && \"selected\"}\n              onClick={() => setAddMode(\"infospot\")}\n            >\n              Infospot\n            </StyledButton>\n          </div>\n          <h4>Infospot colors</h4>\n          <StyledPicker\n            color={color}\n            onChangeComplete={(pickedColor) => setColors(pickedColor.hex)}\n          />\n          <InfoSpot infospots={infospots} deleteInfospot={deleteInfospot} />\n        </SidePanos>\n      </MorePanos>\n    </FlexContainer>\n  );\n};\n\nexport default Pano;\n","import { BrowserRouter, Route, Routes } from \"react-router-dom\";\nimport Home from \"./components/Home\";\nimport NavBar from \"./components/NavBar\";\nimport GlobalStyles from \"./GlobalStyles\";\nimport Pano from \"./components/Pano\";\n\nfunction App() {\n  return (\n    <>\n      <GlobalStyles />\n      <BrowserRouter>\n        <NavBar />\n        <Routes>\n          <Route path=\"/\" element={<Pano />} />\n        </Routes>\n      </BrowserRouter>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","export default __webpack_public_path__ + \"static/media/city-pan.7837cce3.jpeg\";","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('three')) :\n\ttypeof define === 'function' && define.amd ? define(['exports', 'three'], factory) :\n\t(global = global || self, factory(global.PANOLENS = {}, global.THREE));\n}(this, function (exports, THREE) { 'use strict';\n\n\tconst version=\"0.12.1\";const dependencies={three:\"^0.105.2\"};\n\n\t/**\n\t * REVISION\n\t * @module REVISION\n\t * @example PANOLENS.REVISION\n\t * @type {string} revision\n\t */\n\tconst REVISION = version.split( '.' )[ 1 ];\n\n\t/**\n\t * VERSION\n\t * @module VERSION\n\t * @example PANOLENS.VERSION\n\t * @type {string} version\n\t */\n\tconst VERSION = version;\n\n\t/**\n\t * THREEJS REVISION\n\t * @module THREE_REVISION\n\t * @example PANOLENS.THREE_REVISION\n\t * @type {string} threejs revision\n\t */\n\tconst THREE_REVISION = dependencies.three.split( '.' )[ 1 ];\n\n\t/**\n\t * THREEJS VERSION\n\t * @module THREE_VERSION\n\t * @example PANOLENS.THREE_VERSION\n\t * @type {string} threejs version\n\t */\n\tconst THREE_VERSION = dependencies.three.replace( /[^0-9.]/g, '' );\n\n\t/**\n\t * CONTROLS\n\t * @module CONTROLS\n\t * @example PANOLENS.CONTROLS.ORBIT\n\t * @property {number} ORBIT 0\n\t * @property {number} DEVICEORIENTATION 1\n\t */\n\tconst CONTROLS = { ORBIT: 0, DEVICEORIENTATION: 1 };\n\n\t/**\n\t * MODES\n\t * @module MODES\n\t * @example PANOLENS.MODES.UNKNOWN\n\t * @property {number} UNKNOWN 0\n\t * @property {number} NORMAL 1\n\t * @property {number} CARDBOARD 2\n\t * @property {number} STEREO 3\n\t */\n\tconst MODES = { UNKNOWN: 0, NORMAL: 1, CARDBOARD: 2, STEREO: 3 };\n\n\t/**\n\t * Data URI Images\n\t * @module DataImage\n\t * @example PANOLENS.DataImage.Info\n\t * @property {string} Info Information Icon\n\t * @property {string} Arrow Arrow Icon\n\t * @property {string} FullscreenEnter Fullscreen Enter Icon\n\t * @property {string} FullscreenLeave Fullscreen Leave Icon\n\t * @property {string} VideoPlay Video Play Icon\n\t * @property {string} VideoPause Video Pause Icon\n\t * @property {string} WhiteTile White Tile Icon\n\t * @property {string} Setting Settings Icon\n\t * @property {string} ChevronRight Chevron Right Icon\n\t * @property {string} Check Check Icon\n\t * @property {string} ViewIndicator View Indicator Icon\n\t */\n\tconst DataImage = {\n\t    Info: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADBklEQVR42u2bP08UQRiHnzFaSYCI/xoksdBIqGwIiYWRUBISExpCQ0ej38FWOmlIKKhoMPEbaCxsrrHiYrQgOSlQEaICrT+LHSPZzNzt3s3c3Hn7lHvLzvv82L2dm30XKioqKgYY062BJF0HpoA7wARwBbhsPz4DjoEG8AnYNcZ8Sx1Op8IXJM1KWpdUV3nq9m9nJV1I7VNGfEzSM0mNNqR9NOwxx1L7NRMflbQm6SSgeJ4TO8Zoat+8/LKkg4jieQ4kLaf2RtKwpJ0uiufZkTScSn5S0l5C+b/sSZrstvyMpKPU5uc4kjTTjkvpeYCkaeA1/+7hvcIZMGuMqUULQNIU8Aa4ltrWwyHwyBizGzwASSPAe+B2assW7AH3jTE/i+xcZoa12Qfy2Bo3i+5cKABl99zF1GYlWFTBeULLS0DZrOsDcDNggTXgc27bLWA64BhfgHvGmB8dHUXZ1DM0S45xliKMs9bKr+klIOkqsBrwv9JtVq1DewEAT4Ch1BYdMGQdygeg7Df4SmqDAKyoyXpCszPgITCeuvoAjFuX0gE8jljUdv7bCtiOOJ7XpdUZ8L/gdXHOA5QtYH5NXXVgbrgWWn1nwFTqaiPgdPIFcDd1tRFwOl307DwRuZgXwLvctgfA04hjOp18AcReZ6sZY16e3yDpUuQxnU6+S2AkcjEpcDr1zxOXSPgCKLSa0mc4nXwB/EpdbQScTr4AGqmrjYDTyRfAx9TVRsDp5Aug8LJyH+F0cgZg58z11BUHpO5ruGh2G3ybuuqAeF2aBfAqddUB8bq0OgP2U1cegH3aOQOMMb+BrdTVB2DLupQLwLIOnKY26IBT6+ClaQDGmO/ARmqLDtiwDn7HVkcY+EdjNoTlCI+tYhO2iUppm6HKslPUq2qQKHpUe8AFsjaUXuUQWCgqXyoAG8IuME/WkNRrnAHzZfqDSgdgQ6gBc2Td3b3CMTBXtkOsIzTIjZLnQhjcVtlcEIPZLJ0LoVvt8s/Va+3yuSAG84UJRxB98cpM9dJURUVFxSDzBxKde4Lk3/h2AAAAAElFTkSuQmCC', \n\t    Arrow: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADPklEQVR42u2bMUscQRiG30/SRaJEI1ZKUiRErNIELRUbQYSAnX8hpVUgkDYp0wgWVjYW+QcJaQzYpLojJIXhtDDEKBpj65ti58ixmdmb2ZvZ7+T2AUHudmfmeXf2bnb3O6CmpqZmgJGqOiI5AWAWwEMA0wDuArht3r4CcAagBeAbgIaI/NQOp1fhIZKLJN+SbDKcptl3keSQtk+I+BjJVyRbJaRdtEybY9p+ReKjJN+QvIwonufS9DGq7ZuXXyd5nFA8zzHJdW1vkLxDcrdC8Ty7JO9oyc+QPFCUb3NAcqZq+TmSp9rmHZySnCvjErwOIPkUwHv8+w7vF64ALIrIfrIASM4C+ADgnratgxMACyLSiB4AyREAnwE80LbswgGAJyJy4bNxyApr6wbIw4xxy3djrwCYfeeuaZsFsEbPdULXU4DZqusLgMkEA21P05EEbf8A8FhEzos28pkBLxLKL5s/r/M1kEkz9vKQHGeatf05yfmOfubNa7G5JDle5NhtBjwHMBz5yFwAWBaRT+0XzP8pZsKwcQiH2fX8Ycojb+kzxUw4ZJn7CSQXqpRPHMKCq7+iZJ71Mvdy/DftXSQ6HcJdSDaqPPKW/mPOBO+lcbvzCU35RCFM2PpwnQKzZQfdgfe0dxH5dLA6uQJ4pC2fIASrkyuA6X6QjxyC1ckVQNn7bNHlI4ZgdXIFUObiJJl8pBCsTjGfuIwA2Cv4FN7xbYjkjqsRAHuIePXoCiDF1Zk2VidXAL+1R5sAq5MrgJb2aBNgdXIF8FV7tAmwOrkCCFs73wysTtYATHFCU3vEEWm6Ci6KvgY/ao86Ik6XogDeaY86Ik6XbjPgSHvkEThCwQy45XpDRK5JbgN4GWkgUyR9H65MRQxgW0SunZ5FezK7pfwd8e8MV8UfAPdF5Jdrg8JrAbPjprZFD2wWyQP6j8ZSEufRmGlgQ9umBBvd5IOgbjFUKLu+XnWBhG+rpsFVZGUo/coJgFVf+aAATAgNACvICpL6jSsAKyH1QcEBmBD2ASwhq+7uF84ALIVWiPUEB7lQsiOEwS2VzQUxmMXSuRCqKpd/zX4rl88FMZg/mLAEcSN+MlP/aKqmpqZmkPkL0hSjwOpNKxwAAAAASUVORK5CYII=',\n\t    FullscreenEnter: 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=',\n\t    FullscreenLeave: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=',\n\t    VideoPlay: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==',\n\t    VideoPause: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==',\n\t    WhiteTile: 'data:image/png;base64,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',\n\t    Setting: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADn0lEQVR42u2bzUsVURjGnyO6CPzAMnTjppAo3LTwH1CqTfaxbeOiRS37A0wXtROFVi1aRBs3LWohSIGbQAQXViBGRhG0UIRKUCpK7q/FnOB2uc6cOXNmRnGe3eW+H8/7zLln3vNxpQoVKlQ4wjBFJAFOSRqX1O7osivpvjHmU1nChBZglvSYLYJbS0EanCvIJzWK+gnsyH34/8OuMaYjb265jwCgz6N4SWq3vodbAEmnS/KtBDgoAgyU5BteAOAkMAPcBroc7PskDWfgN+wyDwBdltMMcDI3tYBnde/pHeARMNTErgd4APzweP834oeN1dMkz5DlsFNn/yyv4kdiSK4At4AO4CqwGaDwRmza2B0210qM7YhrXU59ANAq6bWkwQTTn5KO5fIE0uVYlXTeGLOXFMx1DrjlULwKKN41x6DlnIjEEQCckPRe0okCiguJr5LOGGO+xhm5jICJQ1i8LOeJJKPYEQAMKvrtt5ZdjSf2FM0Fq/sZJI2A6UNcvCz36TiDfUcAcE1SPu/U6Mm8k/TFfu6XdFb5iX3dGPM8lQfwNod3+TowBnQ3yddtv1vPIe+b1JIBiwEJ1IAJ208k5W21trWA+V/5CHAcmAtU/A2P/DcCiTAHHE8tgCVhgLvAXgYCk17Jo/yTGfLuWe7Zd72AC8CWB4n3OAz7mLytNkZabAEXMhfeQKYfWEpJZCxA3rGUOZeA/qDF15FpAz47EvlNk9neI2e3jeWCz0BbmvipNkSMMX8kuSZYM8Z8zyqAjbHmaN5mOeYjgIXrU93MWrxHrNQjrqiDkQMLHwG+OdqF3NN3jeXKzU8AoF1SzdH8XKhJUO7HZDXLMbwAwICkJUULFxe0SbqSVQAbw3Xi7Ze0ZLmGAzAKbHs0JGU1QtvAaIjCW4B7ZOvJy2qFa5a730RPtBiaz0CgnkiZi6F5fBZDVMvho7EhcuS3xJJ2hV9IupgTqaLw0hhzab8vq23xOG/r+LDsKjLgYVzxUnU0ltwK2wDezUyJmEwqXgp/PL4rvxthaeCSI+zxuA10J8ZkWdJNSb2SLkvayKHwDRu71+ZajrG941J8agALDQ3GU/a/IvMkYCPzmCbtLNEVmacNtgs5iP9fYVNEV1Q6Hez7yNZSL+J2SarTcpqiyV2iUkG0IvPFvbz5FbEn+KEk3wMjwMeSfCsBXFBdly9CAPk9ydyffpECuB5tZfVJjaKWueOSfinln6YK4lahQoUKRxd/AcRPGTcQCAUQAAAAAElFTkSuQmCC',\n\t    ChevronRight: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguNTksMTYuNThMMTMuMTcsMTJMOC41OSw3LjQxTDEwLDZMMTYsMTJMMTAsMThMOC41OSwxNi41OFoiIC8+PC9zdmc+',\n\t    Check: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDdMOSwxOUwzLjUsMTMuNUw0LjkxLDEyLjA5TDksMTYuMTdMMTkuNTksNS41OUwyMSw3WiIgLz48L3N2Zz4=',\n\t    ViewIndicator: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0idmlldy1pbmRpY2F0b3IiIGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgdmlld0JveD0iLTIuNSAtMSAzMCAzMCI+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7ZmlsbDpub25lO30uc3Qxe3N0cm9rZS13aWR0aDo2O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCTwvc3R5bGU+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNIDEyLjUgMCBBIDEyLjUgMTIuNSAwIDAgMCAtMTIuNSAwIEEgMTIuNSAxMi41IDAgMCAwIDEyLjUgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0gMTMgMCBMIDEwIDIgTCAxNiAyIFoiPjwvcGF0aD4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNIDIgMCBBIDIgMiAwIDAgMCAtMiAwIEEgMiAyIDAgMCAwIDIgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGlkPSJpbmRpY2F0b3IiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTMsMTUuNSkiPjwvcGF0aD4KCTwvZz4KPC9zdmc+'\n\t};\n\n\t/**\n\t * @module ImageLoader\n\t * @description Image loader with progress based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/ImageLoader.js}\n\t */\n\tconst ImageLoader = {\n\n\t    /**\n\t     * Load image\n\t     * @example PANOLENS.ImageLoader.load( IMAGE_URL )\n\t     * @method load\n\t     * @param  {string}   url        - An image url\n\t     * @param  {function} onLoad     - On load callback\n\t     * @param  {function} onProgress - In progress callback\n\t     * @param  {function} onError    - On error callback\n\t     */\n\t    load: function ( url, onLoad = () => {}, onProgress = () => {}, onError = () => {} ) {\n\n\t        // Enable cache\n\t        THREE.Cache.enabled = true;\n\n\t        let cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n\t        // Reference key\n\t        for (let iconName in DataImage) {\n\n\t            if (DataImage.hasOwnProperty(iconName) && url === DataImage[iconName]) {\n\n\t                reference = iconName;\n\n\t            }\n\n\t        }\n\n\t        // Cached\n\t        cached = THREE.Cache.get(reference ? reference : url);\n\n\t        if (cached !== undefined) {\n\n\t            if (onLoad) {\n\n\t                setTimeout(function () {\n\n\t                    onProgress({loaded: 1, total: 1});\n\t                    onLoad(cached);\n\n\t                }, 0);\n\n\t            }\n\n\t            return cached;\n\n\t        }\n\n\t        // Construct a new XMLHttpRequest\n\t        urlCreator = window.URL || window.webkitURL;\n\t        image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n\t        // Add to cache\n\t        THREE.Cache.add(reference ? reference : url, image);\n\n\t        const onImageLoaded = () => {\n\n\t            urlCreator.revokeObjectURL(image.src);\n\t            onLoad(image);\n\n\t        };\n\n\t        if (url.indexOf('data:') === 0) {\n\n\t            image.addEventListener('load', onImageLoaded, false);\n\t            image.src = url;\n\t            return image;\n\t        }\n\n\t        image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n\t        request = new window.XMLHttpRequest();\n\t        request.open('GET', url, true);\n\t        if (process.env.npm_lifecycle_event !== 'test') {\n\t            /* istanbul ignore next */\n\t            request.onreadystatechange = function () {\n\t                if (this.readyState === 4 && this.status >= 400) {\n\t                    onError();\n\t                }\n\t            };\n\t        }\n\t        request.responseType = 'arraybuffer';\n\t        request.addEventListener( 'error', onError );\n\t        request.addEventListener( 'progress', event => {\n\n\t            if  ( !event ) return;\n\n\t            const { loaded, total, lengthComputable } = event;\n\t            \n\t            if ( lengthComputable ) {\n\t\t\n\t                onProgress( { loaded, total } );\n\t\t\n\t            }\n\t\t\n\t        } );\n\t        \n\t        request.addEventListener( 'loadend', event => {\n\n\t            if  ( !event ) return;\n\t            const { currentTarget: { response } } = event;\n\n\t            arrayBufferView = new Uint8Array( response );\n\t            blob = new window.Blob( [ arrayBufferView ] );\n\t\t\t\t\t\n\t            image.addEventListener( 'load', onImageLoaded, false );\n\t            image.src = urlCreator.createObjectURL( blob );\n\t\t\n\t        } );\n\t\t\n\t        request.send(null);\n\t\t\n\t    }\n\n\t};\n\n\t/**\n\t * @module TextureLoader\n\t * @description Texture loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js}\n\t */\n\tconst TextureLoader = {\n\n\t    /**\n\t     * Load image texture\n\t     * @example PANOLENS.TextureLoader.load( IMAGE_URL )\n\t     * @method load\n\t     * @param  {string}   url        - An image url\n\t     * @param  {function} onLoad     - On load callback\n\t     * @param  {function} onProgress - In progress callback\n\t     * @param  {function} onError    - On error callback\n\t     * @return {THREE.Texture}   \t - Image texture\n\t     */\n\t    load: function ( url, onLoad = () => {}, onProgress, onError ) {\n\n\t        var texture = new THREE.Texture(); \n\n\t        ImageLoader.load( url, function ( image ) {\n\n\t            texture.image = image;\n\n\t            // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t            const isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t            texture.format = isJPEG ? THREE.RGBFormat : THREE.RGBAFormat;\n\t            texture.needsUpdate = true;\n\n\t            onLoad( texture );\n\n\t        }, onProgress, onError );\n\n\t        return texture;\n\n\t    }\n\n\t};\n\n\t/**\n\t * @module CubeTextureLoader\n\t * @description Cube Texture Loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/CubeTextureLoader.js}\n\t */\n\tconst CubeTextureLoader = {\n\n\t    /**\n\t     * Load 6 images as a cube texture\n\t     * @example PANOLENS.CubeTextureLoader.load( [ 'px.png', 'nx.png', 'py.png', 'ny.png', 'pz.png', 'nz.png' ] )\n\t     * @method load\n\t     * @param  {array}   urls        - array of 6 urls to images, one for each side of the CubeTexture. The urls should be specified in the following order: pos-x, neg-x, pos-y, neg-y, pos-z, neg-z\n\t     * @param  {function} onLoad     - On load callback\n\t     * @param  {function} onProgress - In progress callback\n\t     * @param  {function} onError    - On error callback\n\t     * @return {THREE.CubeTexture}   - Cube texture\n\t     */\n\t    load: function ( urls, onLoad = () => {}, onProgress = () => {}, onError ) {\n\n\t\t   var texture, loaded, progress, all, loadings;\n\n\t\t   texture = new THREE.CubeTexture( [] );\n\n\t\t   loaded = 0;\n\t\t   progress = {};\n\t\t   all = {};\n\n\t\t   urls.map( function ( url, index ) {\n\n\t\t\t   ImageLoader.load( url, function ( image ) {\n\n\t\t\t\t   texture.images[ index ] = image;\n\n\t\t\t\t   loaded++;\n\n\t\t\t\t   if ( loaded === 6 ) {\n\n\t\t\t\t\t   texture.needsUpdate = true;\n\n\t\t\t\t\t   onLoad( texture );\n\n\t\t\t\t   }\n\n\t\t\t   }, function ( event ) {\n\n\t\t\t\t   progress[ index ] = { loaded: event.loaded, total: event.total };\n\n\t\t\t\t   all.loaded = 0;\n\t\t\t\t   all.total = 0;\n\t\t\t\t   loadings = 0;\n\n\t\t\t\t   for ( var i in progress ) {\n\n\t\t\t\t\t   loadings++;\n\t\t\t\t\t   all.loaded += progress[ i ].loaded;\n\t\t\t\t\t   all.total += progress[ i ].total;\n\n\t\t\t\t   }\n\n\t\t\t\t   if ( loadings < 6 ) {\n\n\t\t\t\t\t   all.total = all.total / loadings * 6;\n\n\t\t\t\t   }\n\n\t\t\t\t   onProgress( all );\n\n\t\t\t   }, onError );\n\n\t\t   } );\n\n\t\t   return texture;\n\n\t    }\n\n\t};\n\n\t/**\n\t * @classdesc User Media\n\t * @constructor\n\t * @param {object} [constraints={ video: { width: { ideal: 1920 }, height: { ideal: 1080 }, facingMode: { exact: 'environment' } }, audio: false }]\n\t */\n\tfunction Media ( constraints ) {\n\n\t    const defaultConstraints = { video: { width: { ideal: 1920 }, height: { ideal: 1080 }, facingMode: { exact: 'environment' } }, audio: false };\n\n\t    this.constraints = Object.assign( defaultConstraints, constraints );\n\n\t    this.container = null;\n\t    this.scene = null;\n\t    this.element = null;\n\t    this.devices = [];\n\t    this.stream = null;\n\t    this.ratioScalar = 1;\n\t    this.videoDeviceIndex = 0;\n\n\t}\n\tMedia.prototype = Object.assign( Object.create( THREE.EventDispatcher.prototype ), {\n\n\t    setContainer: function ( container ) {\n\n\t        this.container = container;\n\n\t    },\n\n\t    setScene: function ( scene ) {\n\n\t        this.scene = scene;\n\n\t    },\n\n\t    /**\n\t     * Enumerate devices\n\t     * @memberOf Media\n\t     * @instance\n\t     * @returns {Promise}\n\t     */\n\t    enumerateDevices: function () {\n\n\t        const devices = this.devices;\n\t        const resolvedPromise = new Promise( resolve => { resolve( devices ); } );\n\n\t        return devices.length > 0 ? resolvedPromise : window.navigator.mediaDevices.enumerateDevices();\n\n\t    },\n\n\t    /**\n\t     * Switch to next available video device\n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    switchNextVideoDevice: function () {\n\n\t        const stop = this.stop.bind( this );\n\t        const start = this.start.bind( this );\n\t        const setVideDeviceIndex = this.setVideDeviceIndex.bind( this );\n\n\t        let index = this.videoDeviceIndex;\n\n\t        this.getDevices( 'video' )\n\t            .then( devices => {\n\t                stop();\n\t                index++;\n\t                if ( index >= devices.length ) {\n\t                    setVideDeviceIndex( 0 );\n\t                    index--;\n\t                } else {\n\t                    setVideDeviceIndex( index );\n\t                }\n\n\t                start( devices[ index ] );\n\t            \n\n\t            } );\n\n\t    },\n\n\t    /**\n\t     * Get devices\n\t     * @param {string} type - type keyword to match device.kind\n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    getDevices: function ( type = 'video' ) {\n\n\t        const devices = this.devices;\n\t        const validate = _devices => {\n\n\t            return _devices.map( device => { \n\t                \n\t                if ( !devices.includes( device ) ) { devices.push( device ); }\n\t                return device; \n\t            \n\t            } );\n\t            \n\t        };\n\t        const filter = _devices => {\n\n\t            const reg = new RegExp( type, 'i' );\n\t            return _devices.filter( device => reg.test( device.kind ) );\n\n\t        };\n\n\t        return this.enumerateDevices()\n\t            .then( validate )\n\t            .then( filter );\n\n\t    },\n\n\t    /**\n\t     * Get user media\n\t     * @param {MediaStreamConstraints} constraints\n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    getUserMedia: function ( constraints ) {\n\n\t        const setMediaStream = this.setMediaStream.bind( this );\n\t        const playVideo = this.playVideo.bind( this );\n\t        const onCatchError = error => { console.warn( `PANOLENS.Media: ${error}` ); };\n\n\t        return window.navigator.mediaDevices.getUserMedia( constraints )\n\t            .then( setMediaStream )\n\t            .then( playVideo )\n\t            .catch( onCatchError );\n\n\t    },\n\n\t    /**\n\t     * Set video device index\n\t     * @param {number} index \n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    setVideDeviceIndex: function ( index ) {\n\n\t        this.videoDeviceIndex = index;\n\n\t    },\n\n\t    /**\n\t     * Start streaming\n\t     * @param {MediaDeviceInfo} [targetDevice]\n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    start: function( targetDevice ) {\n\n\t        const constraints = this.constraints;\n\t        const getUserMedia = this.getUserMedia.bind( this );\n\t        const onVideoDevices = devices => {\n\n\t            if ( !devices || devices.length === 0 ) {\n\n\t                throw Error( 'no video device found' );\n\n\t            }\n\n\t            const device = targetDevice || devices[ 0 ];\n\t            constraints.video.deviceId = device.deviceId;\n\n\t            return getUserMedia( constraints );\n\n\t        };\n\n\t        this.element = this.createVideoElement();\n\n\t        return this.getDevices().then( onVideoDevices );\n\n\t    },\n\n\t    /**\n\t     * Stop streaming\n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    stop: function () {\n\n\t        const stream = this.stream;\n\n\t        if ( stream && stream.active ) {\n\n\t            const track = stream.getTracks()[ 0 ];\n\n\t            track.stop();\n\n\t            window.removeEventListener( 'resize', this.onWindowResize.bind( this ) );\n\n\t            this.element = null;\n\t            this.stream = null;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set media stream\n\t     * @param {MediaStream} stream \n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    setMediaStream: function ( stream ) {\n\n\t        this.stream = stream;\n\t        this.element.srcObject = stream;\n\n\t        if ( this.scene ) {\n\n\t            this.scene.background = this.createVideoTexture();\n\n\t        }\n\t        \n\t        window.addEventListener( 'resize', this.onWindowResize.bind( this ) );\n\n\t    },\n\n\t    /**\n\t     * Play video element\n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    playVideo: function () {\n\n\t        const { element } = this;\n\n\t        if ( element ) {\n\n\t            element.play();\n\t            this.dispatchEvent( { type: 'play' } );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Pause video element\n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    pauseVideo: function () {\n\n\t        const { element } = this;\n\n\t        if ( element ) {\n\n\t            element.pause();\n\t            this.dispatchEvent( { type: 'pause' } );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Create video texture\n\t     * @memberOf Media\n\t     * @instance\n\t     * @returns {THREE.VideoTexture}\n\t     */\n\t    createVideoTexture: function () {\n\n\t        const video = this.element;\n\t        const texture = new THREE.VideoTexture( video );\n\n\t        texture.generateMipmaps = false;\n\t        texture.minFilter = THREE.LinearFilter;\n\t        texture.magFilter = THREE.LinearFilter;\n\t        texture.format = THREE.RGBFormat;\n\t        texture.center.set( 0.5, 0.5 );\n\n\t        video.addEventListener( 'canplay', this.onWindowResize.bind( this ) );\n\n\t        return texture;\n\n\t    },\n\n\t    /**\n\t     * Create video element\n\t     * @memberOf Media\n\t     * @instance\n\t     * @returns {HTMLVideoElement}\n\t     * @fires Media#canplay\n\t     */\n\t    createVideoElement: function() {\n\n\t        const dispatchEvent = this.dispatchEvent.bind( this );\n\t        const video = document.createElement( 'video' );\n\n\t        /**\n\t         * Video can play event\n\t         * @type {object}\n\t         * @event Media#canplay\n\t         */\n\t        const canPlay = () => dispatchEvent( { type: 'canplay' } );\n\t        \n\t        video.setAttribute( 'autoplay', '' );\n\t        video.setAttribute( 'muted', '' );\n\t        video.setAttribute( 'playsinline', '' );\n\n\t        video.style.position = 'absolute';\n\t        video.style.top = '0';\n\t        video.style.left = '0';\n\t        video.style.width = '100%';\n\t        video.style.height = '100%';\n\t        video.style.objectPosition = 'center';\n\t        video.style.objectFit = 'cover';\n\t        video.style.display = this.scene ? 'none' : '';\n\n\t        video.addEventListener( 'canplay', canPlay );\n\n\t        return video;\n\n\t    },\n\n\t    /**\n\t     * On window resize event\n\t     * @param {Event} event \n\t     * @memberOf Media\n\t     * @instance\n\t     */\n\t    onWindowResize: function () {\n\n\t        if ( this.element && this.element.videoWidth && this.element.videoHeight && this.scene ) {\n\n\t            const { clientWidth: width, clientHeight: height } = this.container;\n\t            const texture = this.scene.background;\n\t            const { videoWidth, videoHeight } = this.element;\n\t            const cameraRatio = videoHeight / videoWidth;\n\t            const viewportRatio = this.container ? width / height : 1.0;\n\t            const ratio = cameraRatio * viewportRatio * this.ratioScalar;\n\n\t            if ( width > height ) {\n\t                texture.repeat.set( ratio, 1 );\n\t            } else {\n\t                texture.repeat.set( 1, 1 / ratio );\n\t            }\n\n\t        }\n\n\t    }\n\n\t} );\n\n\t/**\n\t * @classdesc Reticle 3D Sprite\n\t * @constructor\n\t * @param {THREE.Color} [color=0xffffff] - Color of the reticle sprite\n\t * @param {boolean} [autoSelect=true] - Auto selection\n\t * @param {number} [dwellTime=1500] - Duration for dwelling sequence to complete\n\t */\n\n\tfunction Reticle ( color = 0xffffff, autoSelect = true, dwellTime = 1500 ) {\n\n\t    this.dpr = window.devicePixelRatio;\n\n\t    const { canvas, context } = this.createCanvas();\n\t    const material = new THREE.SpriteMaterial( { color, map: this.createCanvasTexture( canvas ) } );\n\n\t    THREE.Sprite.call( this, material );\n\n\t    this.canvasWidth = canvas.width;\n\t    this.canvasHeight = canvas.height;\n\t    this.context = context;\n\t    this.color = color instanceof THREE.Color ? color : new THREE.Color( color );    \n\n\t    this.autoSelect = autoSelect;\n\t    this.dwellTime = dwellTime;\n\t    this.rippleDuration = 500;\n\t    this.position.z = -10;\n\t    this.center.set( 0.5, 0.5 );\n\t    this.scale.set( 0.5, 0.5, 1 );\n\n\t    this.startTimestamp = null;\n\t    this.timerId = null;\n\t    this.callback = null;\n\n\t    this.frustumCulled = false;\n\n\t    this.updateCanvasArcByProgress( 0 );\n\n\t}\n\tReticle.prototype = Object.assign( Object.create( THREE.Sprite.prototype ), {\n\n\t    constructor: Reticle,\n\n\t    /**\n\t     * Set material color\n\t     * @param {THREE.Color} color \n\t     * @memberOf Reticle\n\t     * @instance\n\t     */\n\t    setColor: function ( color ) {\n\n\t        this.material.color.copy( color instanceof THREE.Color ? color : new THREE.Color( color ) );\n\n\t    },\n\n\t    /**\n\t     * Create canvas texture\n\t     * @param {HTMLCanvasElement} canvas \n\t     * @memberOf Reticle\n\t     * @instance\n\t     * @returns {THREE.CanvasTexture}\n\t     */\n\t    createCanvasTexture: function ( canvas ) {\n\n\t        const texture = new THREE.CanvasTexture( canvas );\n\t        texture.minFilter = THREE.LinearFilter;\n\t        texture.magFilter = THREE.LinearFilter;\n\t        texture.generateMipmaps = false;\n\n\t        return texture;\n\n\t    },\n\n\t    /**\n\t     * Create canvas element\n\t     * @memberOf Reticle\n\t     * @instance\n\t     * @returns {object} object\n\t     * @returns {HTMLCanvasElement} object.canvas\n\t     * @returns {CanvasRenderingContext2D} object.context\n\t     */\n\t    createCanvas: function () {\n\n\t        const width = 32;\n\t        const height = 32;\n\t        const canvas = document.createElement( 'canvas' );\n\t        const context = canvas.getContext( '2d' );\n\t        const dpr = this.dpr;\n\n\t        canvas.width = width * dpr;\n\t        canvas.height = height * dpr;\n\t        context.scale( dpr, dpr );\n\n\t        context.shadowBlur = 5;\n\t        context.shadowColor = 'rgba(200,200,200,0.9)';\n\n\t        return { canvas, context };\n\n\t    },\n\n\t    /**\n\t     * Update canvas arc by progress\n\t     * @param {number} progress \n\t     * @memberOf Reticle\n\t     * @instance\n\t     */\n\t    updateCanvasArcByProgress: function ( progress ) {\n\n\t        const context = this.context;\n\t        const { canvasWidth, canvasHeight, material } = this;\n\t        const dpr = this.dpr;\n\t        const degree = progress * Math.PI * 2;\n\t        const color = this.color.getStyle();\n\t        const x = canvasWidth * 0.5 / dpr;\n\t        const y = canvasHeight * 0.5 / dpr;\n\t        const lineWidth = 3;\n\t        \n\t        context.clearRect( 0, 0, canvasWidth, canvasHeight );\n\t        context.beginPath();\n\n\t        if ( progress === 0 ) {\n\t            context.arc( x, y, canvasWidth / 16, 0, 2 * Math.PI );\n\t            context.fillStyle = color;\n\t            context.fill();\n\t        } else {\n\t            context.arc( x, y, canvasWidth / 4 - lineWidth, -Math.PI / 2, -Math.PI / 2 + degree );\n\t            context.strokeStyle = color;\n\t            context.lineWidth = lineWidth;\n\t            context.stroke();\n\t        }\n\n\t        context.closePath();\n\n\t        material.map.needsUpdate = true;\n\n\t    },\n\n\t    /**\n\t     * Ripple effect\n\t     * @memberOf Reticle\n\t     * @instance\n\t     * @fires Reticle#reticle-ripple-start\n\t     * @fires Reticle#reticle-ripple-end\n\t     */\n\t    ripple: function () {\n\n\t        const context = this.context;\n\t        const { canvasWidth, canvasHeight, material } = this;\n\t        const duration = this.rippleDuration;\n\t        const timestamp = performance.now();\n\t        const color = this.color;\n\t        const dpr = this.dpr;\n\t        const x = canvasWidth * 0.5 / dpr;\n\t        const y = canvasHeight * 0.5 / dpr;\n\n\t        const update = () => {\n\n\t            const timerId = window.requestAnimationFrame( update );\n\t            const elapsed = performance.now() - timestamp;\n\t            const progress = elapsed / duration;\n\t            const opacity = 1.0 - progress > 0 ? 1.0 - progress : 0;\n\t            const radius = progress * canvasWidth * 0.5 / dpr;\n\n\t            context.clearRect( 0, 0, canvasWidth, canvasHeight );\n\t            context.beginPath();\n\t            context.arc( x, y, radius, 0, Math.PI * 2 );\n\t            context.fillStyle = `rgba(${color.r * 255}, ${color.g * 255}, ${color.b * 255}, ${opacity})`;\n\t            context.fill();\n\t            context.closePath();\n\n\t            if ( progress >= 1.0 ) {\n\n\t                window.cancelAnimationFrame( timerId );\n\t                this.updateCanvasArcByProgress( 0 );\n\n\t                /**\n\t                 * Reticle ripple end event\n\t                 * @type {object}\n\t                 * @event Reticle#reticle-ripple-end\n\t                 */\n\t                this.dispatchEvent( { type: 'reticle-ripple-end' } );\n\n\t            }\n\n\t            material.map.needsUpdate = true;\n\n\t        };\n\n\t        /**\n\t         * Reticle ripple start event\n\t         * @type {object}\n\t         * @event Reticle#reticle-ripple-start\n\t         */\n\t        this.dispatchEvent( { type: 'reticle-ripple-start' } );\n\n\t        update();\n\n\t    },\n\n\t    /**\n\t     * Make reticle visible\n\t     * @memberOf Reticle\n\t     * @instance\n\t     */\n\t    show: function () {\n\n\t        this.visible = true;\n\n\t    },\n\n\t    /**\n\t     * Make reticle invisible\n\t     * @memberOf Reticle\n\t     * @instance\n\t     */\n\t    hide: function () {\n\n\t        this.visible = false;\n\n\t    },\n\n\t    /**\n\t     * Start dwelling\n\t     * @param {function} callback \n\t     * @memberOf Reticle\n\t     * @instance\n\t     * @fires Reticle#reticle-start\n\t     */\n\t    start: function ( callback ) {\n\n\t        if ( !this.autoSelect ) {\n\n\t            return;\n\n\t        }\n\n\t        /**\n\t         * Reticle start event\n\t         * @type {object}\n\t         * @event Reticle#reticle-start\n\t         */\n\t        this.dispatchEvent( { type: 'reticle-start' } );\n\n\t        this.startTimestamp = performance.now();\n\t        this.callback = callback;\n\t        this.update();\n\n\t    },\n\n\t    /**\n\t     * End dwelling\n\t     * @memberOf Reticle\n\t     * @instance\n\t     * @fires Reticle#reticle-end\n\t     */\n\t    end: function(){\n\n\t        if ( !this.startTimestamp ) { return; }\n\n\t        window.cancelAnimationFrame( this.timerId );\n\n\t        this.updateCanvasArcByProgress( 0 );\n\t        this.callback = null;\n\t        this.timerId = null;\n\t        this.startTimestamp = null;\n\n\t        /**\n\t         * Reticle end event\n\t         * @type {object}\n\t         * @event Reticle#reticle-end\n\t         */\n\t        this.dispatchEvent( { type: 'reticle-end' } );\n\n\t    },\n\n\t    /**\n\t     * Update dwelling\n\t     * @memberOf Reticle\n\t     * @instance\n\t     * @fires Reticle#reticle-update\n\t     */\n\t    update: function () {\n\n\t        this.timerId = window.requestAnimationFrame( this.update.bind( this ) );\n\n\t        const elapsed = performance.now() - this.startTimestamp;\n\t        const progress = elapsed / this.dwellTime;\n\n\t        this.updateCanvasArcByProgress( progress );\n\n\t        /**\n\t         * Reticle update event\n\t         * @type {object}\n\t         * @event Reticle#reticle-update\n\t         */\n\t        this.dispatchEvent( { type: 'reticle-update', progress } );\n\n\t        if ( progress >= 1.0 ) {\n\n\t            window.cancelAnimationFrame( this.timerId );\n\t            if ( this.callback ) { this.callback(); }\n\t            this.end();\n\t            this.ripple();\n\n\t        }\n\n\t    }\n\n\t} );\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar Tween = createCommonjsModule(function (module, exports) {\n\t/**\n\t * Tween.js - Licensed under the MIT license\n\t * https://github.com/tweenjs/tween.js\n\t * ----------------------------------------------\n\t *\n\t * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n\t * Thank you all, you're awesome!\n\t */\n\n\n\tvar _Group = function () {\n\t\tthis._tweens = {};\n\t\tthis._tweensAddedDuringUpdate = {};\n\t};\n\n\t_Group.prototype = {\n\t\tgetAll: function () {\n\n\t\t\treturn Object.keys(this._tweens).map(function (tweenId) {\n\t\t\t\treturn this._tweens[tweenId];\n\t\t\t}.bind(this));\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tthis._tweens = {};\n\n\t\t},\n\n\t\tadd: function (tween) {\n\n\t\t\tthis._tweens[tween.getId()] = tween;\n\t\t\tthis._tweensAddedDuringUpdate[tween.getId()] = tween;\n\n\t\t},\n\n\t\tremove: function (tween) {\n\n\t\t\tdelete this._tweens[tween.getId()];\n\t\t\tdelete this._tweensAddedDuringUpdate[tween.getId()];\n\n\t\t},\n\n\t\tupdate: function (time, preserve) {\n\n\t\t\tvar tweenIds = Object.keys(this._tweens);\n\n\t\t\tif (tweenIds.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\t// Tweens are updated in \"batches\". If you add a new tween during an update, then the\n\t\t\t// new tween will be updated in the next batch.\n\t\t\t// If you remove a tween during an update, it may or may not be updated. However,\n\t\t\t// if the removed tween was added during the current batch, then it will not be updated.\n\t\t\twhile (tweenIds.length > 0) {\n\t\t\t\tthis._tweensAddedDuringUpdate = {};\n\n\t\t\t\tfor (var i = 0; i < tweenIds.length; i++) {\n\n\t\t\t\t\tvar tween = this._tweens[tweenIds[i]];\n\n\t\t\t\t\tif (tween && tween.update(time) === false) {\n\t\t\t\t\t\ttween._isPlaying = false;\n\n\t\t\t\t\t\tif (!preserve) {\n\t\t\t\t\t\t\tdelete this._tweens[tweenIds[i]];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttweenIds = Object.keys(this._tweensAddedDuringUpdate);\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n\tvar TWEEN = new _Group();\n\n\tTWEEN.Group = _Group;\n\tTWEEN._nextId = 0;\n\tTWEEN.nextId = function () {\n\t\treturn TWEEN._nextId++;\n\t};\n\n\n\t// Include a performance.now polyfill.\n\t// In node.js, use process.hrtime.\n\tif (typeof (self) === 'undefined' && typeof (process) !== 'undefined' && process.hrtime) {\n\t\tTWEEN.now = function () {\n\t\t\tvar time = process.hrtime();\n\n\t\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t\t};\n\t}\n\t// In a browser, use self.performance.now if it is available.\n\telse if (typeof (self) !== 'undefined' &&\n\t         self.performance !== undefined &&\n\t\t\t self.performance.now !== undefined) {\n\t\t// This must be bound, because directly assigning this function\n\t\t// leads to an invocation exception in Chrome.\n\t\tTWEEN.now = self.performance.now.bind(self.performance);\n\t}\n\t// Use Date.now if it is available.\n\telse if (Date.now !== undefined) {\n\t\tTWEEN.now = Date.now;\n\t}\n\t// Otherwise, use 'new Date().getTime()'.\n\telse {\n\t\tTWEEN.now = function () {\n\t\t\treturn new Date().getTime();\n\t\t};\n\t}\n\n\n\tTWEEN.Tween = function (object, group) {\n\t\tthis._object = object;\n\t\tthis._valuesStart = {};\n\t\tthis._valuesEnd = {};\n\t\tthis._valuesStartRepeat = {};\n\t\tthis._duration = 1000;\n\t\tthis._repeat = 0;\n\t\tthis._repeatDelayTime = undefined;\n\t\tthis._yoyo = false;\n\t\tthis._isPlaying = false;\n\t\tthis._reversed = false;\n\t\tthis._delayTime = 0;\n\t\tthis._startTime = null;\n\t\tthis._easingFunction = TWEEN.Easing.Linear.None;\n\t\tthis._interpolationFunction = TWEEN.Interpolation.Linear;\n\t\tthis._chainedTweens = [];\n\t\tthis._onStartCallback = null;\n\t\tthis._onStartCallbackFired = false;\n\t\tthis._onUpdateCallback = null;\n\t\tthis._onRepeatCallback = null;\n\t\tthis._onCompleteCallback = null;\n\t\tthis._onStopCallback = null;\n\t\tthis._group = group || TWEEN;\n\t\tthis._id = TWEEN.nextId();\n\n\t};\n\n\tTWEEN.Tween.prototype = {\n\t\tgetId: function () {\n\t\t\treturn this._id;\n\t\t},\n\n\t\tisPlaying: function () {\n\t\t\treturn this._isPlaying;\n\t\t},\n\n\t\tto: function (properties, duration) {\n\n\t\t\tthis._valuesEnd = Object.create(properties);\n\n\t\t\tif (duration !== undefined) {\n\t\t\t\tthis._duration = duration;\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tduration: function duration(d) {\n\t\t\tthis._duration = d;\n\t\t\treturn this;\n\t\t},\n\n\t\tstart: function (time) {\n\n\t\t\tthis._group.add(this);\n\n\t\t\tthis._isPlaying = true;\n\n\t\t\tthis._onStartCallbackFired = false;\n\n\t\t\tthis._startTime = time !== undefined ? typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time : TWEEN.now();\n\t\t\tthis._startTime += this._delayTime;\n\n\t\t\tfor (var property in this._valuesEnd) {\n\n\t\t\t\t// Check if an Array was provided as property value\n\t\t\t\tif (this._valuesEnd[property] instanceof Array) {\n\n\t\t\t\t\tif (this._valuesEnd[property].length === 0) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\t\tthis._valuesEnd[property] = [this._object[property]].concat(this._valuesEnd[property]);\n\n\t\t\t\t}\n\n\t\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t\t// we should not set that property in the object\n\t\t\t\tif (this._object[property] === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Save the starting value.\n\t\t\t\tthis._valuesStart[property] = this._object[property];\n\n\t\t\t\tif ((this._valuesStart[property] instanceof Array) === false) {\n\t\t\t\t\tthis._valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t\t}\n\n\t\t\t\tthis._valuesStartRepeat[property] = this._valuesStart[property] || 0;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tif (!this._isPlaying) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tthis._group.remove(this);\n\t\t\tthis._isPlaying = false;\n\n\t\t\tif (this._onStopCallback !== null) {\n\t\t\t\tthis._onStopCallback(this._object);\n\t\t\t}\n\n\t\t\tthis.stopChainedTweens();\n\t\t\treturn this;\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tthis.update(Infinity);\n\t\t\treturn this;\n\n\t\t},\n\n\t\tstopChainedTweens: function () {\n\n\t\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\tthis._chainedTweens[i].stop();\n\t\t\t}\n\n\t\t},\n\n\t\tgroup: function (group) {\n\t\t\tthis._group = group;\n\t\t\treturn this;\n\t\t},\n\n\t\tdelay: function (amount) {\n\n\t\t\tthis._delayTime = amount;\n\t\t\treturn this;\n\n\t\t},\n\n\t\trepeat: function (times) {\n\n\t\t\tthis._repeat = times;\n\t\t\treturn this;\n\n\t\t},\n\n\t\trepeatDelay: function (amount) {\n\n\t\t\tthis._repeatDelayTime = amount;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tyoyo: function (yoyo) {\n\n\t\t\tthis._yoyo = yoyo;\n\t\t\treturn this;\n\n\t\t},\n\n\t\teasing: function (easingFunction) {\n\n\t\t\tthis._easingFunction = easingFunction;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tinterpolation: function (interpolationFunction) {\n\n\t\t\tthis._interpolationFunction = interpolationFunction;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tchain: function () {\n\n\t\t\tthis._chainedTweens = arguments;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tonStart: function (callback) {\n\n\t\t\tthis._onStartCallback = callback;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tonUpdate: function (callback) {\n\n\t\t\tthis._onUpdateCallback = callback;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tonRepeat: function onRepeat(callback) {\n\n\t\t\tthis._onRepeatCallback = callback;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tonComplete: function (callback) {\n\n\t\t\tthis._onCompleteCallback = callback;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tonStop: function (callback) {\n\n\t\t\tthis._onStopCallback = callback;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tupdate: function (time) {\n\n\t\t\tvar property;\n\t\t\tvar elapsed;\n\t\t\tvar value;\n\n\t\t\tif (time < this._startTime) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (this._onStartCallbackFired === false) {\n\n\t\t\t\tif (this._onStartCallback !== null) {\n\t\t\t\t\tthis._onStartCallback(this._object);\n\t\t\t\t}\n\n\t\t\t\tthis._onStartCallbackFired = true;\n\t\t\t}\n\n\t\t\telapsed = (time - this._startTime) / this._duration;\n\t\t\telapsed = (this._duration === 0 || elapsed > 1) ? 1 : elapsed;\n\n\t\t\tvalue = this._easingFunction(elapsed);\n\n\t\t\tfor (property in this._valuesEnd) {\n\n\t\t\t\t// Don't update properties that do not exist in the source object\n\t\t\t\tif (this._valuesStart[property] === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar start = this._valuesStart[property] || 0;\n\t\t\t\tvar end = this._valuesEnd[property];\n\n\t\t\t\tif (end instanceof Array) {\n\n\t\t\t\t\tthis._object[property] = this._interpolationFunction(end, value);\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Protect against non numeric properties.\n\t\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\t\tthis._object[property] = start + (end - start) * value;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this._onUpdateCallback !== null) {\n\t\t\t\tthis._onUpdateCallback(this._object, elapsed);\n\t\t\t}\n\n\t\t\tif (elapsed === 1) {\n\n\t\t\t\tif (this._repeat > 0) {\n\n\t\t\t\t\tif (isFinite(this._repeat)) {\n\t\t\t\t\t\tthis._repeat--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\t\tfor (property in this._valuesStartRepeat) {\n\n\t\t\t\t\t\tif (typeof (this._valuesEnd[property]) === 'string') {\n\t\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this._yoyo) {\n\t\t\t\t\t\t\tvar tmp = this._valuesStartRepeat[property];\n\n\t\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesEnd[property];\n\t\t\t\t\t\t\tthis._valuesEnd[property] = tmp;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._valuesStart[property] = this._valuesStartRepeat[property];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._yoyo) {\n\t\t\t\t\t\tthis._reversed = !this._reversed;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._repeatDelayTime !== undefined) {\n\t\t\t\t\t\tthis._startTime = time + this._repeatDelayTime;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._startTime = time + this._delayTime;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._onRepeatCallback !== null) {\n\t\t\t\t\t\tthis._onRepeatCallback(this._object);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (this._onCompleteCallback !== null) {\n\n\t\t\t\t\t\tthis._onCompleteCallback(this._object);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\t\tthis._chainedTweens[i].start(this._startTime + this._duration);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n\n\tTWEEN.Easing = {\n\n\t\tLinear: {\n\n\t\t\tNone: function (k) {\n\n\t\t\t\treturn k;\n\n\t\t\t}\n\n\t\t},\n\n\t\tQuadratic: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\treturn k * k;\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\treturn k * (2 - k);\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tif ((k *= 2) < 1) {\n\t\t\t\t\treturn 0.5 * k * k;\n\t\t\t\t}\n\n\t\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t\t}\n\n\t\t},\n\n\t\tCubic: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\treturn k * k * k;\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\treturn --k * k * k + 1;\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tif ((k *= 2) < 1) {\n\t\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t\t}\n\n\t\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t\t}\n\n\t\t},\n\n\t\tQuartic: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\treturn k * k * k * k;\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tif ((k *= 2) < 1) {\n\t\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t\t}\n\n\t\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t\t}\n\n\t\t},\n\n\t\tQuintic: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\treturn k * k * k * k * k;\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tif ((k *= 2) < 1) {\n\t\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t\t}\n\n\t\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t\t}\n\n\t\t},\n\n\t\tSinusoidal: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t\t}\n\n\t\t},\n\n\t\tExponential: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tif (k === 0) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tif (k === 1) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tif ((k *= 2) < 1) {\n\t\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t\t}\n\n\t\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t\t}\n\n\t\t},\n\n\t\tCircular: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tif ((k *= 2) < 1) {\n\t\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t\t}\n\n\t\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t\t}\n\n\t\t},\n\n\t\tElastic: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\tif (k === 0) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tif (k === 1) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\tif (k === 0) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tif (k === 1) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tif (k === 0) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tif (k === 1) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tk *= 2;\n\n\t\t\t\tif (k < 1) {\n\t\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t\t}\n\n\t\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t\t}\n\n\t\t},\n\n\t\tBack: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\tvar s = 1.70158;\n\n\t\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\tvar s = 1.70158;\n\n\t\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\t\tif ((k *= 2) < 1) {\n\t\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t\t}\n\n\t\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t\t}\n\n\t\t},\n\n\t\tBounce: {\n\n\t\t\tIn: function (k) {\n\n\t\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t\t},\n\n\t\t\tOut: function (k) {\n\n\t\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\t\treturn 7.5625 * k * k;\n\t\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t\t} else {\n\t\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tInOut: function (k) {\n\n\t\t\t\tif (k < 0.5) {\n\t\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t\t}\n\n\t\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tTWEEN.Interpolation = {\n\n\t\tLinear: function (v, k) {\n\n\t\t\tvar m = v.length - 1;\n\t\t\tvar f = m * k;\n\t\t\tvar i = Math.floor(f);\n\t\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn fn(v[0], v[1], f);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t\t}\n\n\t\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t\t},\n\n\t\tBezier: function (v, k) {\n\n\t\t\tvar b = 0;\n\t\t\tvar n = v.length - 1;\n\t\t\tvar pw = Math.pow;\n\t\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\t\tfor (var i = 0; i <= n; i++) {\n\t\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t\t}\n\n\t\t\treturn b;\n\n\t\t},\n\n\t\tCatmullRom: function (v, k) {\n\n\t\t\tvar m = v.length - 1;\n\t\t\tvar f = m * k;\n\t\t\tvar i = Math.floor(f);\n\t\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\t\tif (v[0] === v[m]) {\n\n\t\t\t\tif (k < 0) {\n\t\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t\t}\n\n\t\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t\t} else {\n\n\t\t\t\tif (k < 0) {\n\t\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t\t}\n\n\t\t\t\tif (k > 1) {\n\t\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t\t}\n\n\t\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t\t}\n\n\t\t},\n\n\t\tUtils: {\n\n\t\t\tLinear: function (p0, p1, t) {\n\n\t\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t\t},\n\n\t\t\tBernstein: function (n, i) {\n\n\t\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t\t},\n\n\t\t\tFactorial: (function () {\n\n\t\t\t\tvar a = [1];\n\n\t\t\t\treturn function (n) {\n\n\t\t\t\t\tvar s = 1;\n\n\t\t\t\t\tif (a[n]) {\n\t\t\t\t\t\treturn a[n];\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\t\ts *= i;\n\t\t\t\t\t}\n\n\t\t\t\t\ta[n] = s;\n\t\t\t\t\treturn s;\n\n\t\t\t\t};\n\n\t\t\t})(),\n\n\t\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\t\tvar t2 = t * t;\n\t\t\t\tvar t3 = t * t2;\n\n\t\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t// UMD (Universal Module Definition)\n\t(function (root) {\n\n\t\t{\n\n\t\t\t// Node.js\n\t\t\tmodule.exports = TWEEN;\n\n\t\t}\n\n\t})();\n\t});\n\n\t/**\n\t * @classdesc Information spot attached to panorama\n\t * @constructor\n\t * @param {number} [scale=300] - Default scale\n\t * @param {string} [imageSrc=PANOLENS.DataImage.Info] - Image overlay info\n\t * @param {boolean} [animated=true] - Enable default hover animation\n\t */\n\tfunction Infospot ( scale = 300, imageSrc, animated ) {\n\t\t\n\t    const duration = 500, scaleFactor = 1.3;\n\n\t    imageSrc = imageSrc || DataImage.Info;\n\n\t    THREE.Sprite.call( this );\n\n\t    this.type = 'infospot';\n\n\t    this.animated = animated !== undefined ? animated : true;\n\t    this.isHovering = false;\n\n\t    /*\n\t     * TODO: Three.js bug hotfix for sprite raycasting r104\n\t     * https://github.com/mrdoob/three.js/issues/14624\n\t     */\n\t    this.frustumCulled = false;\n\n\t    this.element = null;\n\t    this.toPanorama = null;\n\t    this.cursorStyle = \"pointer\";\n\n\t    this.mode = MODES.NORMAL;\n\n\t    this.scale.set( scale, scale, 1 );\n\t    this.rotation.y = Math.PI;\n\n\t    this.container = null;\n\n\t    this.originalRaycast = this.raycast;\n\n\t    // Event Handler\n\t    this.HANDLER_FOCUS = null;\t\n\n\t    this.material.side = THREE.DoubleSide;\n\t    this.material.depthTest = false;\n\t    this.material.transparent = true;\n\t    this.material.opacity = 0;\n\n\t    this.scaleUpAnimation = new Tween.Tween();\n\t    this.scaleDownAnimation = new Tween.Tween();\n\n\n\t    const postLoad = function ( texture ) {\n\n\t        if ( !this.material ) { return; }\n\n\t        const ratio = texture.image.width / texture.image.height;\n\t        const textureScale = new THREE.Vector3();\n\n\t        texture.image.width = texture.image.naturalWidth || 64;\n\t        texture.image.height = texture.image.naturalHeight || 64;\n\n\t        this.scale.set( ratio * scale, scale, 1 );\n\n\t        textureScale.copy( this.scale );\n\n\t        this.scaleUpAnimation = new Tween.Tween( this.scale )\n\t            .to( { x: textureScale.x * scaleFactor, y: textureScale.y * scaleFactor }, duration )\n\t            .easing( Tween.Easing.Elastic.Out );\n\n\t        this.scaleDownAnimation = new Tween.Tween( this.scale )\n\t            .to( { x: textureScale.x, y: textureScale.y }, duration )\n\t            .easing( Tween.Easing.Elastic.Out );\n\n\t        this.material.map = texture;\n\t        this.material.needsUpdate = true;\n\n\t    }.bind( this );\n\n\t    // Add show and hide animations\n\t    this.showAnimation = new Tween.Tween( this.material )\n\t        .to( { opacity: 1 }, duration )\n\t        .onStart( this.enableRaycast.bind( this, true ) )\n\t        .easing( Tween.Easing.Quartic.Out );\n\n\t    this.hideAnimation = new Tween.Tween( this.material )\n\t        .to( { opacity: 0.9 }, duration )\n\t        .onStart( this.enableRaycast.bind( this, false ) )\n\t        .easing( Tween.Easing.Quartic.Out );\n\n\t    // Attach event listeners\n\t    this.addEventListener( 'click', this.onClick );\n\t    this.addEventListener( 'hover', this.onHover );\n\t    this.addEventListener( 'hoverenter', this.onHoverStart );\n\t    this.addEventListener( 'hoverleave', this.onHoverEnd );\n\t    this.addEventListener( 'panolens-dual-eye-effect', this.onDualEyeEffect );\n\t    this.addEventListener( 'panolens-container', this.setContainer.bind( this ) );\n\t    this.addEventListener( 'dismiss', this.onDismiss );\n\t    this.addEventListener( 'panolens-infospot-focus', this.setFocusMethod );\n\n\t    TextureLoader.load( imageSrc, postLoad );\t\n\n\t}\n\tInfospot.prototype = Object.assign( Object.create( THREE.Sprite.prototype ), {\n\n\t    constructor: Infospot,\n\n\t    /**\n\t     * Set infospot container\n\t     * @param {HTMLElement|object} data - Data with container information\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setContainer: function ( data ) {\n\n\t        let container;\n\t\t\n\t        if ( data instanceof HTMLElement ) {\n\t\t\n\t            container = data;\n\t\t\n\t        } else if ( data && data.container ) {\n\t\t\n\t            container = data.container;\n\t\t\n\t        }\n\t\t\n\t        // Append element if exists\n\t        if ( container && this.element ) {\n\t\t\n\t            container.appendChild( this.element );\n\t\t\n\t        }\n\t\t\n\t        this.container = container;\n\t\t\n\t    },\n\n\t    /**\n\t     * Get container\n\t     * @memberOf Infospot\n\t     * @instance\n\t     * @return {HTMLElement} - The container of this infospot\n\t     */\n\t    getContainer: function () {\n\n\t        return this.container;\n\n\t    },\n\n\t    /**\n\t     * This will be called by a click event\n\t     * Translate and lock the hovering element if any\n\t     * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onClick: function ( event ) {\n\n\t        if ( this.element && this.getContainer() ) {\n\n\t            this.onHoverStart( event );\n\n\t            // Lock element\n\t            this.lockHoverElement();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Dismiss current element if any\n\t     * @param  {object} event - Dismiss event\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onDismiss: function () {\n\n\t        if ( this.element ) {\n\n\t            this.unlockHoverElement();\n\t            this.onHoverEnd();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * This will be called by a mouse hover event\n\t     * Translate the hovering element if any\n\t     * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onHover: function () {},\n\n\t    /**\n\t     * This will be called on a mouse hover start\n\t     * Sets cursor style to 'pointer', display the element and scale up the infospot\n\t     * @param {object} event\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onHoverStart: function ( event ) {\n\n\t        if ( !this.getContainer() ) { return; }\n\n\t        const cursorStyle = this.cursorStyle || ( this.mode === MODES.NORMAL ? 'pointer' : 'default' );\n\t        const { scaleDownAnimation, scaleUpAnimation, element } = this;\n\n\t        this.isHovering = true;\n\t        this.container.style.cursor = cursorStyle;\n\t\t\t\n\t        if ( this.animated ) {\n\n\t            scaleDownAnimation.stop();\n\t            scaleUpAnimation.start();\n\n\t        }\n\t\t\t\n\t        if ( element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0 ) {\n\n\t            const { left, right, style } = element;\n\n\t            if ( this.mode === MODES.CARDBOARD || this.mode === MODES.STEREO ) {\n\n\t                style.display = 'none';\n\t                left.style.display = 'block';\n\t                right.style.display = 'block';\n\n\t                // Store element width for reference\n\t                element._width = left.clientWidth;\n\t                element._height = left.clientHeight;\n\n\t            } else {\n\n\t                style.display = 'block';\n\t                if ( left ) { left.style.display = 'none'; }\n\t                if ( right ) { right.style.display = 'none'; }\n\n\t                // Store element width for reference\n\t                element._width = element.clientWidth;\n\t                element._height = element.clientHeight;\n\n\t            }\n\t\t\t\t\n\t        }\n\n\t    },\n\n\t    /**\n\t     * This will be called on a mouse hover end\n\t     * Sets cursor style to 'default', hide the element and scale down the infospot\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onHoverEnd: function () {\n\n\t        if ( !this.getContainer() ) { return; }\n\n\t        const { scaleDownAnimation, scaleUpAnimation, element } = this;\n\n\t        this.isHovering = false;\n\t        this.container.style.cursor = 'default';\n\n\t        if ( this.animated ) {\n\n\t            scaleUpAnimation.stop();\n\t            scaleDownAnimation.start();\n\n\t        }\n\n\t        if ( element && !this.element.locked ) {\n\n\t            const { left, right, style } = element;\n\n\t            style.display = 'none';\n\t            if ( left ) { left.style.display = 'none'; }\n\t            if ( right ) { right.style.display = 'none'; }\n\n\t            this.unlockHoverElement();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * On dual eye effect handler\n\t     * Creates duplicate left and right element\n\t     * @param  {object} event - panolens-dual-eye-effect event\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onDualEyeEffect: function ( event ) {\n\t\t\t\n\t        if ( !this.getContainer() ) { return; }\n\n\t        let element, halfWidth, halfHeight;\n\n\t        this.mode = event.mode;\n\n\t        element = this.element;\n\n\t        halfWidth = this.container.clientWidth / 2;\n\t        halfHeight = this.container.clientHeight / 2;\n\n\t        if ( !element ) {\n\n\t            return;\n\n\t        }\n\n\t        if ( !element.left && !element.right ) {\n\n\t            element.left = element.cloneNode( true );\n\t            element.right = element.cloneNode( true );\n\n\t        }\n\n\t        if ( this.mode === MODES.CARDBOARD || this.mode === MODES.STEREO ) {\n\n\t            element.left.style.display = element.style.display;\n\t            element.right.style.display = element.style.display;\n\t            element.style.display = 'none';\n\n\t        } else {\n\n\t            element.style.display = element.left.style.display;\n\t            element.left.style.display = 'none';\n\t            element.right.style.display = 'none';\n\n\t        }\n\n\t        // Update elements translation\n\t        this.translateElement( halfWidth, halfHeight );\n\n\t        this.container.appendChild( element.left );\n\t        this.container.appendChild( element.right );\n\n\t    },\n\n\t    /**\n\t     * Translate the hovering element by css transform\n\t     * @param  {number} x - X position on the window screen\n\t     * @param  {number} y - Y position on the window screen\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    translateElement: function ( x, y ) {\n\n\t        if ( !this.element._width || !this.element._height || !this.getContainer() ) {\n\n\t            return;\n\n\t        }\n\n\t        let left, top, element, width, height, delta, container;\n\n\t        container = this.container;\n\t        element = this.element;\n\t        width = element._width / 2;\n\t        height = element._height / 2;\n\t        delta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n\t        left = x - width;\n\t        top = y - height - delta;\n\n\t        if ( ( this.mode === MODES.CARDBOARD || this.mode === MODES.STEREO ) \n\t\t\t\t\t&& element.left && element.right\n\t\t\t\t\t&& !( x === container.clientWidth / 2 && y === container.clientHeight / 2 ) ) {\n\n\t            left = container.clientWidth / 4 - width + ( x - container.clientWidth / 2 );\n\t            top = container.clientHeight / 2 - height - delta + ( y - container.clientHeight / 2 );\n\n\t            this.setElementStyle( 'transform', element.left, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t            left += container.clientWidth / 2;\n\n\t            this.setElementStyle( 'transform', element.right, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t        } else {\n\n\t            this.setElementStyle( 'transform', element, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set vendor specific css\n\t     * @param {string} type - CSS style name\n\t     * @param {HTMLElement} element - The element to be modified\n\t     * @param {string} value - Style value\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setElementStyle: function ( type, element, value ) {\n\n\t        const style = element.style;\n\n\t        if ( type === 'transform' ) {\n\n\t            style.webkitTransform = style.msTransform = style.transform = value;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set hovering text content\n\t     * @param {string} text - Text to be displayed\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setText: function ( text ) {\n\n\t        if ( this.element ) {\n\n\t            this.element.textContent = text;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set cursor css style on hover\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setCursorHoverStyle: function ( style ) {\n\n\t        this.cursorStyle = style;\n\n\t    },\n\n\t    /**\n\t     * Add hovering text element\n\t     * @param {string} text - Text to be displayed\n\t     * @param {number} [delta=40] - Vertical delta to the infospot\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    addHoverText: function ( text, delta = 40 ) {\n\n\t        if ( !this.element ) {\n\n\t            this.element = document.createElement( 'div' );\n\t            this.element.style.display = 'none';\n\t            this.element.style.color = '#fff';\n\t            this.element.style.top = 0;\n\t            this.element.style.maxWidth = '50%';\n\t            this.element.style.maxHeight = '50%';\n\t            this.element.style.textShadow = '0 0 3px #000000';\n\t            this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n\t            this.element.style.position = 'absolute';\n\t            this.element.classList.add( 'panolens-infospot' );\n\t            this.element.verticalDelta = delta;\n\n\t        }\n\n\t        this.setText( text );\n\n\t    },\n\n\t    /**\n\t     * Add hovering element by cloning an element\n\t     * @param {HTMLDOMElement} el - Element to be cloned and displayed\n\t     * @param {number} [delta=40] - Vertical delta to the infospot\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    addHoverElement: function ( el, delta = 40 ) {\n\n\t        if ( !this.element ) { \n\n\t            this.element = el.cloneNode( true );\n\t            this.element.style.display = 'none';\n\t            this.element.style.top = 0;\n\t            this.element.style.position = 'absolute';\n\t            this.element.classList.add( 'panolens-infospot' );\n\t            this.element.verticalDelta = delta;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Remove hovering element\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    removeHoverElement: function () {\n\n\t        if ( this.element ) { \n\n\t            if ( this.element.left ) {\n\n\t                this.container.removeChild( this.element.left );\n\t                this.element.left = null;\n\n\t            }\n\n\t            if ( this.element.right ) {\n\n\t                this.container.removeChild( this.element.right );\n\t                this.element.right = null;\n\n\t            }\n\n\t            this.container.removeChild( this.element );\n\t            this.element = null;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Lock hovering element\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    lockHoverElement: function () {\n\n\t        if ( this.element ) { \n\n\t            this.element.locked = true;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Unlock hovering element\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    unlockHoverElement: function () {\n\n\t        if ( this.element ) { \n\n\t            this.element.locked = false;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Enable raycasting\n\t     * @param {boolean} [enabled=true]\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    enableRaycast: function ( enabled = true ) {\n\n\t        if ( enabled ) {\n\n\t            this.raycast = this.originalRaycast;\n\n\t        } else {\n\n\t            this.raycast = () => {};\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Show infospot\n\t     * @param  {number} [delay=0] - Delay time to show\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    show: function ( delay = 0 ) {\n\n\t        const { animated, hideAnimation, showAnimation, material } = this;\n\n\t        if ( animated ) {\n\n\t            hideAnimation.stop();\n\t            showAnimation.delay( delay ).start();\n\n\t        } else {\n\n\t            this.enableRaycast( true );\n\t            material.opacity = 1;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Hide infospot\n\t     * @param  {number} [delay=0] - Delay time to hide\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    hide: function ( delay = 0 ) {\n\n\t        const { animated, hideAnimation, showAnimation, material, element } = this;\n\n\t        if ( element ) {\n\t            const { style } = element;\n\t            style.display = 'none';\n\t        }\n\n\t        if ( animated ) {\n\n\t            showAnimation.stop();\n\t            hideAnimation.delay( delay ).start();\n\n\t        } else {\n\n\t            this.enableRaycast( false );\n\t            material.opacity = 0;\n\n\t        }\n\t\t\t\n\t    },\n\n\t    /**\n\t     * Set focus event handler\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setFocusMethod: function ( event ) {\n\n\t        if ( event ) {\n\n\t            this.HANDLER_FOCUS = event.method;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Focus camera center to this infospot\n\t     * @param {number} [duration=1000] - Duration to tween\n\t     * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    focus: function ( duration, easing ) {\n\n\t        if ( this.HANDLER_FOCUS ) {\n\n\t            this.HANDLER_FOCUS( this.position, duration, easing );\n\t            this.onDismiss();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Dispose\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    dispose: function () {\n\n\t        const { geometry, material } = this;\n\t        const { map } = material;\n\n\t        this.removeHoverElement();\n\n\t        if ( this.parent ) {\n\n\t            this.parent.remove( this );\n\n\t        }\n\n\t        if ( map ) { map.dispose(); material.map = null; }\n\t        if ( geometry ) { geometry.dispose(); this.geometry = null; }\n\t        if ( material ) { material.dispose(); this.material = null; }\n\n\t    }\n\n\t} );\n\n\t/**\n\t * @classdesc Hotspot attached to panorama\n\t * @constructor\n\t * @param {number} [scale=300] - Default scale\n\t * @param {string} [imageSrc=PANOLENS.DataImage.Info] - Image overlay info\n\t * @param {boolean} [animated=true] - Enable default hover animation\n\t */\n\tfunction Hotspot ( scale = 300, imageSrc, animated ) {\n\t\t\n\t    const duration = 500, scaleFactor = 1.3;\n\n\t    imageSrc = imageSrc || DataImage.Info;\n\n\t    THREE.Mesh.call( this );\n\n\t    this.type = 'infospot';\n\n\t    this.animated = animated !== undefined ? animated : true;\n\t    this.isHovering = false;\n        this.castShadow = true;\n\n\t    /*\n\t     * TODO: Three.js bug hotfix for sprite raycasting r104\n\t     * https://github.com/mrdoob/three.js/issues/14624\n\t     */\n\t    this.frustumCulled = false;\n\n\t    this.element = null;\n\t    this.toPanorama = null;\n\t    this.cursorStyle = \"pointer\";\n\n\t    this.mode = MODES.NORMAL;\n\n\t    this.scale.set( scale, scale, scale );\n\t    this.rotation.y = Math.PI;\n\n\t    this.container = null;\n\n\t    this.originalRaycast = this.raycast;\n\n\t    // Event Handler\n\t    this.HANDLER_FOCUS = null;\t\n\n\t    this.material.side = THREE.DoubleSide;\n\t    this.material.transparent = true;\n\t    this.material.opacity = 0;\n\n\t    this.scaleUpAnimation = new Tween.Tween();\n\t    this.scaleDownAnimation = new Tween.Tween();\n\n\n\t    const postLoad = function ( texture ) {\n\n\t        if ( !this.material ) { return; }\n\n\t        const ratio = texture.image.width / texture.image.height;\n\t        const textureScale = new THREE.Vector3();\n\n\t        texture.image.width = texture.image.naturalWidth || 64;\n\t        texture.image.height = texture.image.naturalHeight || 64;\n\n\t        this.scale.set( ratio * scale, 0.1, ratio * scale );\n\n\t        textureScale.copy( this.scale );\n\n\t        this.scaleUpAnimation = new Tween.Tween( this.scale )\n\t            .to( { x: textureScale.x * scaleFactor, \n                    y: 10,\n                z: textureScale.z * scaleFactor }, duration )\n\t            .easing( Tween.Easing.Elastic.Out );\n\n\t        this.scaleDownAnimation = new Tween.Tween( this.scale )\n\t            .to( { x: textureScale.x, y: textureScale.y,\n                       z: textureScale.z}, duration )\n\t            .easing( Tween.Easing.Elastic.Out );\n\n            this.geometry = new THREE.CylinderGeometry( 5, 5, 0, 32 );\n            this.geometry.translate( 0, 0.5, 0 );\n            \n            this.material = new THREE.MeshBasicMaterial( { map: texture, \n                color: \"white\", transparent: true } );\n            this.material.depthFunc = THREE.AlwaysDepth;\n\t        // this.material.map = texture;\n\t        this.material.needsUpdate = true;\n\n\t    }.bind( this );\n\n\t    // Add show and hide animations\n\t    this.showAnimation = new Tween.Tween( this.material )\n\t        .to( { opacity: 1 }, duration )\n\t        .onStart( this.enableRaycast.bind( this, true ) )\n\t        .easing( Tween.Easing.Quartic.Out );\n\n\t    this.hideAnimation = new Tween.Tween( this.material )\n\t        .to( { opacity: 0.9 }, duration )\n\t        .onStart( this.enableRaycast.bind( this, false ) )\n\t        .easing( Tween.Easing.Quartic.Out );\n\n\t    // Attach event listeners\n\t    this.addEventListener( 'click', this.onClick );\n\t    this.addEventListener( 'hover', this.onHover );\n\t    this.addEventListener( 'hoverenter', this.onHoverStart );\n\t    this.addEventListener( 'hoverleave', this.onHoverEnd );\n\t    this.addEventListener( 'panolens-dual-eye-effect', this.onDualEyeEffect );\n\t    this.addEventListener( 'panolens-container', this.setContainer.bind( this ) );\n\t    this.addEventListener( 'dismiss', this.onDismiss );\n\t    this.addEventListener( 'panolens-infospot-focus', this.setFocusMethod );\n\n\t    TextureLoader.load( imageSrc, postLoad );\t\n\n\t}\n\tHotspot.prototype = Object.assign( Object.create( THREE.Mesh.prototype ), {\n\n\t    constructor: Hotspot,\n\n\t    /**\n\t     * Set infospot container\n\t     * @param {HTMLElement|object} data - Data with container information\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setContainer: function ( data ) {\n\n\t        let container;\n\t\t\n\t        if ( data instanceof HTMLElement ) {\n\t\t\n\t            container = data;\n\t\t\n\t        } else if ( data && data.container ) {\n\t\t\n\t            container = data.container;\n\t\t\n\t        }\n\t\t\n\t        // Append element if exists\n\t        if ( container && this.element ) {\n\t\t\n\t            container.appendChild( this.element );\n\t\t\n\t        }\n\t\t\n\t        this.container = container;\n\t\t\n\t    },\n\n\t    /**\n\t     * Get container\n\t     * @memberOf Infospot\n\t     * @instance\n\t     * @return {HTMLElement} - The container of this infospot\n\t     */\n\t    getContainer: function () {\n\n\t        return this.container;\n\n\t    },\n\n\t    /**\n\t     * This will be called by a click event\n\t     * Translate and lock the hovering element if any\n\t     * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onClick: function ( event ) {\n\n\t        if ( this.element && this.getContainer() ) {\n\n\t            this.onHoverStart( event );\n\n\t            // Lock element\n\t            this.lockHoverElement();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Dismiss current element if any\n\t     * @param  {object} event - Dismiss event\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onDismiss: function () {\n\n\t        if ( this.element ) {\n\n\t            this.unlockHoverElement();\n\t            this.onHoverEnd();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * This will be called by a mouse hover event\n\t     * Translate the hovering element if any\n\t     * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onHover: function () {},\n\n\t    /**\n\t     * This will be called on a mouse hover start\n\t     * Sets cursor style to 'pointer', display the element and scale up the infospot\n\t     * @param {object} event\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onHoverStart: function ( event ) {\n\n\t        if ( !this.getContainer() ) { return; }\n\n\t        const cursorStyle = \"pointer\";\n\t        const { scaleDownAnimation, scaleUpAnimation, element } = this;\n\n\t        this.isHovering = true;\n\t        this.container.style.cursor = cursorStyle;\n\t\t\t\n\t        if ( this.animated ) {\n\n\t            scaleDownAnimation.stop();\n\t            scaleUpAnimation.start();\n                \n\t        }\n\t\t\t\n\t        if ( element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0 ) {\n\n\t            const { left, right, style } = element;\n\n\t            if ( this.mode === MODES.CARDBOARD || this.mode === MODES.STEREO ) {\n\n\t                style.display = 'none';\n\t                left.style.display = 'block';\n\t                right.style.display = 'block';\n\n\t                // Store element width for reference\n\t                element._width = left.clientWidth;\n\t                element._height = left.clientHeight;\n\n\t            } else {\n\n\t                style.display = 'block';\n\t                if ( left ) { left.style.display = 'none'; }\n\t                if ( right ) { right.style.display = 'none'; }\n\n\t                // Store element width for reference\n\t                element._width = element.clientWidth;\n\t                element._height = element.clientHeight;\n\n\t            }\n\t\t\t\t\n\t        }\n\n\t    },\n\n\t    /**\n\t     * This will be called on a mouse hover end\n\t     * Sets cursor style to 'default', hide the element and scale down the infospot\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onHoverEnd: function () {\n\n\t        if ( !this.getContainer() ) { return; }\n\n\t        const { scaleDownAnimation, scaleUpAnimation, element } = this;\n\n\t        this.isHovering = false;\n\t        this.container.style.cursor = 'default';\n\n\t        if ( this.animated ) {\n\n\t            scaleUpAnimation.stop();\n\t            scaleDownAnimation.start();\n\n\t        }\n\n\t        if ( element && !this.element.locked ) {\n\n\t            const { left, right, style } = element;\n\n\t            style.display = 'none';\n\t            if ( left ) { left.style.display = 'none'; }\n\t            if ( right ) { right.style.display = 'none'; }\n\n\t            this.unlockHoverElement();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * On dual eye effect handler\n\t     * Creates duplicate left and right element\n\t     * @param  {object} event - panolens-dual-eye-effect event\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    onDualEyeEffect: function ( event ) {\n\t\t\t\n\t        if ( !this.getContainer() ) { return; }\n\n\t        let element, halfWidth, halfHeight;\n\n\t        this.mode = event.mode;\n\n\t        element = this.element;\n\n\t        halfWidth = this.container.clientWidth / 2;\n\t        halfHeight = this.container.clientHeight / 2;\n\n\t        if ( !element ) {\n\n\t            return;\n\n\t        }\n\n\t        if ( !element.left && !element.right ) {\n\n\t            element.left = element.cloneNode( true );\n\t            element.right = element.cloneNode( true );\n\n\t        }\n\n\t        if ( this.mode === MODES.CARDBOARD || this.mode === MODES.STEREO ) {\n\n\t            element.left.style.display = element.style.display;\n\t            element.right.style.display = element.style.display;\n\t            element.style.display = 'none';\n\n\t        } else {\n\n\t            element.style.display = element.left.style.display;\n\t            element.left.style.display = 'none';\n\t            element.right.style.display = 'none';\n\n\t        }\n\n\t        // Update elements translation\n\t        this.translateElement( halfWidth, halfHeight );\n\n\t        this.container.appendChild( element.left );\n\t        this.container.appendChild( element.right );\n\n\t    },\n\n\t    /**\n\t     * Translate the hovering element by css transform\n\t     * @param  {number} x - X position on the window screen\n\t     * @param  {number} y - Y position on the window screen\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    translateElement: function ( x, y ) {\n\n\t        if ( !this.element._width || !this.element._height || !this.getContainer() ) {\n\n\t            return;\n\n\t        }\n\n\t        let left, top, element, width, height, delta, container;\n\n\t        container = this.container;\n\t        element = this.element;\n\t        width = element._width / 2;\n\t        height = element._height / 2;\n\t        delta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n\t        left = x - width;\n\t        top = y - height - delta;\n\n\t        if ( ( this.mode === MODES.CARDBOARD || this.mode === MODES.STEREO ) \n\t\t\t\t\t&& element.left && element.right\n\t\t\t\t\t&& !( x === container.clientWidth / 2 && y === container.clientHeight / 2 ) ) {\n\n\t            left = container.clientWidth / 4 - width + ( x - container.clientWidth / 2 );\n\t            top = container.clientHeight / 2 - height - delta + ( y - container.clientHeight / 2 );\n\n\t            this.setElementStyle( 'transform', element.left, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t            left += container.clientWidth / 2;\n\n\t            this.setElementStyle( 'transform', element.right, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t        } else {\n\n\t            this.setElementStyle( 'transform', element, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set vendor specific css\n\t     * @param {string} type - CSS style name\n\t     * @param {HTMLElement} element - The element to be modified\n\t     * @param {string} value - Style value\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setElementStyle: function ( type, element, value ) {\n\n\t        const style = element.style;\n\n\t        if ( type === 'transform' ) {\n\n\t            style.webkitTransform = style.msTransform = style.transform = value;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set hovering text content\n\t     * @param {string} text - Text to be displayed\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setText: function ( text ) {\n\n\t        if ( this.element ) {\n\n\t            this.element.textContent = text;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set cursor css style on hover\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setCursorHoverStyle: function ( style ) {\n\n\t        this.cursorStyle = style;\n\n\t    },\n\n\t    /**\n\t     * Add hovering text element\n\t     * @param {string} text - Text to be displayed\n\t     * @param {number} [delta=40] - Vertical delta to the infospot\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    addHoverText: function ( text, delta = 40 ) {\n\n\t        if ( !this.element ) {\n\n\t            this.element = document.createElement( 'div' );\n\t            this.element.style.display = 'none';\n\t            this.element.style.color = '#fff';\n\t            this.element.style.top = 0;\n\t            this.element.style.maxWidth = '50%';\n\t            this.element.style.maxHeight = '50%';\n\t            this.element.style.textShadow = '0 0 3px #000000';\n\t            this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n\t            this.element.style.position = 'absolute';\n\t            this.element.classList.add( 'panolens-infospot' );\n\t            this.element.verticalDelta = delta;\n\n\t        }\n\n\t        this.setText( text );\n\n\t    },\n\n\t    /**\n\t     * Add hovering element by cloning an element\n\t     * @param {HTMLDOMElement} el - Element to be cloned and displayed\n\t     * @param {number} [delta=40] - Vertical delta to the infospot\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    addHoverElement: function ( el, delta = 40 ) {\n\n\t        if ( !this.element ) { \n\n\t            this.element = el.cloneNode( true );\n\t            this.element.style.display = 'none';\n\t            this.element.style.top = 0;\n\t            this.element.style.position = 'absolute';\n\t            this.element.classList.add( 'panolens-infospot' );\n\t            this.element.verticalDelta = delta;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Remove hovering element\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    removeHoverElement: function () {\n\n\t        if ( this.element ) { \n\n\t            if ( this.element.left ) {\n\n\t                this.container.removeChild( this.element.left );\n\t                this.element.left = null;\n\n\t            }\n\n\t            if ( this.element.right ) {\n\n\t                this.container.removeChild( this.element.right );\n\t                this.element.right = null;\n\n\t            }\n\n\t            this.container.removeChild( this.element );\n\t            this.element = null;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Lock hovering element\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    lockHoverElement: function () {\n\n\t        if ( this.element ) { \n\n\t            this.element.locked = true;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Unlock hovering element\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    unlockHoverElement: function () {\n\n\t        if ( this.element ) { \n\n\t            this.element.locked = false;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Enable raycasting\n\t     * @param {boolean} [enabled=true]\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    enableRaycast: function ( enabled = true ) {\n\n\t        if ( enabled ) {\n\n\t            this.raycast = this.originalRaycast;\n\n\t        } else {\n\n\t            this.raycast = () => {};\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Show hotspot\n\t     * @param  {number} [delay=0] - Delay time to show\n\t     * @memberOf Hotspot\n\t     * @instance\n\t     */\n\t    show: function ( delay = 0 ) {\n\n\t        const { animated, hideAnimation, showAnimation, material } = this;\n\n\t        if ( animated ) {\n\n\t            hideAnimation.stop();\n\t            showAnimation.delay( delay ).start();\n\n\t        } else {\n\n\t            this.enableRaycast( true );\n\t            material.opacity = 1;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Hide infospot\n\t     * @param  {number} [delay=0] - Delay time to hide\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    hide: function ( delay = 0 ) {\n\n\t        const { animated, hideAnimation, showAnimation, material, element } = this;\n\n\t        if ( element ) {\n\t            const { style } = element;\n\t            style.display = 'none';\n\t        }\n\n\t        if ( animated ) {\n\n\t            showAnimation.stop();\n\t            hideAnimation.delay( delay ).start();\n\n\t        } else {\n\n\t            this.enableRaycast( false );\n\t            material.opacity = 0;\n\n\t        }\n\t\t\t\n\t    },\n\n\t    /**\n\t     * Set focus event handler\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    setFocusMethod: function ( event ) {\n\n\t        if ( event ) {\n\n\t            this.HANDLER_FOCUS = event.method;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Focus camera center to this infospot\n\t     * @param {number} [duration=1000] - Duration to tween\n\t     * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    focus: function ( duration, easing ) {\n\n\t        if ( this.HANDLER_FOCUS ) {\n\n\t            this.HANDLER_FOCUS( this.position, duration, easing );\n\t            this.onDismiss();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Dispose\n\t     * @memberOf Infospot\n\t     * @instance\n\t     */\n\t    dispose: function () {\n\n\t        const { geometry, material } = this;\n\t        const { map } = material;\n\n\t        this.removeHoverElement();\n\n\t        if ( this.parent ) {\n\n\t            this.parent.remove( this );\n\n\t        }\n\n\t        if ( map ) { map.dispose(); material.map = null; }\n\t        if ( geometry ) { geometry.dispose(); this.geometry = null; }\n\t        if ( material ) { material.dispose(); this.material = null; }\n\n\t    }\n\n\t} );\n\n\t/**\n\t * @classdesc Widget for controls\n\t * @constructor\n\t * @param {HTMLElement} container - A domElement where default control widget will be attached to\n\t */\n\tfunction Widget ( container ) {\n\n\t    if ( !container ) {\n\n\t        console.warn( 'PANOLENS.Widget: No container specified' );\n\n\t    }\n\n\t    THREE.EventDispatcher.call( this );\n\n\t    this.DEFAULT_TRANSITION  = 'all 0.27s ease';\n\t    this.TOUCH_ENABLED = !!(( 'ontouchstart' in window ) || window.DocumentTouch && document instanceof DocumentTouch);\n\t    this.PREVENT_EVENT_HANDLER = function ( event ) {\n\t        event.preventDefault();\n\t        event.stopPropagation();\n\t    };\n\n\t    this.container = container;\n\n\t    this.barElement = null;\n\t    this.fullscreenElement = null;\n\t    this.videoElement = null;\n\t    this.settingElement = null;\n\n\t    this.mainMenu = null;\n\n\t    this.activeMainItem = null;\n\t    this.activeSubMenu = null;\n\t    this.mask = null;\n\n\t}\n\n\tWidget.prototype = Object.assign( Object.create( THREE.EventDispatcher.prototype ), {\n\n\t    constructor: Widget,\n\n\t    /**\n\t     * Add control bar\n\t     * @memberOf Widget\n\t     * @instance\n\t     */\n\t    addControlBar: function () {\n\n\t        if ( !this.container ) {\n\n\t            console.warn( 'Widget container not set' ); \n\t            return; \n\t        }\n\n\t        var scope = this, bar, styleTranslate, styleOpacity, gradientStyle;\n\n\t        gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n\t        bar = document.createElement( 'div' );\n\t        bar.style.width = '100%';\n\t        bar.style.height = '44px';\n\t        bar.style.float = 'left';\n\t        bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n\t        bar.style.background = '-webkit-' + gradientStyle;\n\t        bar.style.background = '-moz-' + gradientStyle;\n\t        bar.style.background = '-o-' + gradientStyle;\n\t        bar.style.background = '-ms-' + gradientStyle;\n\t        bar.style.background = gradientStyle;\n\t        bar.style.transition = this.DEFAULT_TRANSITION;\n\t        bar.style.pointerEvents = 'none';\n\t        bar.isHidden = false;\n\t        bar.toggle = function () {\n\t            bar.isHidden = !bar.isHidden;\n\t            styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n\t            styleOpacity = bar.isHidden ? 0 : 1;\n\t            bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n\t            bar.style.opacity = styleOpacity;\n\t        };\n\n\t        // Menu\n\t        var menu = this.createDefaultMenu();\n\t        this.mainMenu = this.createMainMenu( menu );\n\t        bar.appendChild( this.mainMenu );\n\n\t        // Mask\n\t        var mask = this.createMask();\n\t        this.mask = mask;\n\t        this.container.appendChild( mask );\n\n\t        // Dispose\n\t        bar.dispose = function () {\n\n\t            if ( scope.fullscreenElement ) {\n\n\t                bar.removeChild( scope.fullscreenElement );\n\t                scope.fullscreenElement.dispose();\n\t                scope.fullscreenElement = null;\n\n\t            }\n\n\t            if ( scope.settingElement ) {\n\n\t                bar.removeChild( scope.settingElement );\n\t                scope.settingElement.dispose();\n\t                scope.settingElement = null;\n\n\t            }\n\n\t            if ( scope.videoElement ) {\n\n\t                bar.removeChild( scope.videoElement );\n\t                scope.videoElement.dispose();\n\t                scope.videoElement = null;\n\n\t            }\n\n\t        };\n\n\t        this.container.appendChild( bar );\n\n\t        // Mask events\n\t        this.mask.addEventListener( 'mousemove', this.PREVENT_EVENT_HANDLER, true );\n\t        this.mask.addEventListener( 'mouseup', this.PREVENT_EVENT_HANDLER, true );\n\t        this.mask.addEventListener( 'mousedown', this.PREVENT_EVENT_HANDLER, true );\n\t        this.mask.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', function ( event ) {\n\n\t            event.preventDefault();\n\t            event.stopPropagation();\n\n\t            scope.mask.hide();\n\t            scope.settingElement.deactivate();\n\n\t        }, false );\n\n\t        // Event listener\n\t        this.addEventListener( 'control-bar-toggle', bar.toggle );\n\n\t        this.barElement = bar;\n\n\t    },\n\n\t    /**\n\t     * Create default menu\n\t     * @memberOf Widget\n\t     * @instance\n\t     */\n\t    createDefaultMenu: function () {\n\n\t        var scope = this, handler;\n\n\t        handler = function ( method, data ) {\n\n\t            return function () {\n\n\t                scope.dispatchEvent( { \n\n\t                    type: 'panolens-viewer-handler', \n\t                    method: method, \n\t                    data: data \n\n\t                } ); \n\n\t            };\n\n\t        };\n\n\t        return [\n\n\t            { \n\t                title: 'Control', \n\t                subMenu: [ \n\t                    { \n\t                        title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse', \n\t                        handler: handler( 'enableControl', CONTROLS.ORBIT )\n\t                    },\n\t                    { \n\t                        title: 'Sensor', \n\t                        handler: handler( 'enableControl', CONTROLS.DEVICEORIENTATION ) \n\t                    } \n\t                ]\n\t            },\n\n\t            { \n\t                title: 'Mode', \n\t                subMenu: [ \n\t                    { \n\t                        title: 'Normal',\n\t                        handler: handler( 'disableEffect' )\n\t                    }, \n\t                    { \n\t                        title: 'Cardboard',\n\t                        handler: handler( 'enableEffect', MODES.CARDBOARD )\n\t                    },\n\t                    { \n\t                        title: 'Stereoscopic',\n\t                        handler: handler( 'enableEffect', MODES.STEREO )\n\t                    }\n\t                ]\n\t            }\n\n\t        ];\n\n\t    },\n\n\t    /**\n\t     * Add buttons on top of control bar\n\t     * @param {string} name - The control button name to be created\n\t     * @memberOf Widget\n\t     * @instance\n\t     */\n\t    addControlButton: function ( name ) {\n\n\t        let element;\n\n\t        switch( name ) {\n\n\t        case 'fullscreen':\n\n\t            element = this.createFullscreenButton();\n\t            this.fullscreenElement = element; \n\n\t            break;\n\n\t        case 'setting':\n\n\t            element = this.createSettingButton();\n\t            this.settingElement = element;\n\n\t            break;\n\n\t        case 'video':\n\n\t            element = this.createVideoControl();\n\t            this.videoElement = element;\n\n\t            break;\n\n\t        default:\n\n\t            return;\n\n\t        }\n\n\t        if ( !element ) {\n\n\t            return;\n\n\t        }\n\n\t        this.barElement.appendChild( element );\n\n\t    },\n\n\t    /**\n\t     * Create modal mask\n\t     * @memberOf Widget\n\t     * @instance\n\t     */\n\t    createMask: function () {\n\n\t        const element = document.createElement( 'div' );\n\t        element.style.position = 'absolute';\n\t        element.style.top = 0;\n\t        element.style.left = 0;\n\t        element.style.width = '100%';\n\t        element.style.height = '100%';\n\t        element.style.background = 'transparent';\n\t        element.style.display = 'none';\n\n\t        element.show = function () {\n\n\t            this.style.display = 'block';\n\n\t        };\n\n\t        element.hide = function () {\n\n\t            this.style.display = 'none';\n\n\t        };\n\n\t        return element;\n\n\t    },\n\n\t    /**\n\t     * Create Setting button to toggle menu\n\t     * @memberOf Widget\n\t     * @instance\n\t     */\n\t    createSettingButton: function () {\n\n\t        let scope = this, item;\n\n\t        function onTap ( event ) {\n\n\t            event.preventDefault();\n\t            event.stopPropagation();\n\n\t            scope.mainMenu.toggle();\n\n\t            if ( this.activated ) {\n\t\t\n\t                this.deactivate();\n\n\t            } else {\n\n\t                this.activate();\n\n\t            }\n\n\t        }\n\n\t        item = this.createCustomItem( { \n\n\t            style: { \n\n\t                backgroundImage: 'url(\"' + DataImage.Setting + '\")',\n\t                webkitTransition: this.DEFAULT_TRANSITION,\n\t                transition: this.DEFAULT_TRANSITION\n\n\t            },\n\n\t            onTap: onTap\n\n\t        } );\n\n\t        item.activate = function () {\n\n\t            this.style.transform = 'rotate3d(0,0,1,90deg)';\n\t            this.activated = true;\n\t            scope.mask.show();\n\n\t        };\n\n\t        item.deactivate = function () {\n\n\t            this.style.transform = 'rotate3d(0,0,0,0)';\n\t            this.activated = false;\n\t            scope.mask.hide();\n\n\t            if ( scope.mainMenu && scope.mainMenu.visible ) {\n\n\t                scope.mainMenu.hide();\n\t\t\t\t\t\n\t            }\n\n\t            if ( scope.activeSubMenu && scope.activeSubMenu.visible ) {\n\n\t                scope.activeSubMenu.hide();\n\n\t            }\n\n\t            if ( scope.mainMenu && scope.mainMenu._width ) {\n\n\t                scope.mainMenu.changeSize( scope.mainMenu._width );\n\t                scope.mainMenu.unslideAll();\n\n\t            }\n\t\t\t\t\n\t        };\n\n\t        item.activated = false;\n\n\t        return item;\n\n\t    },\n\n\t    /**\n\t     * Create Fullscreen button\n\t     * @return {HTMLSpanElement} - The dom element icon for fullscreen\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @fires Widget#panolens-viewer-handler\n\t     */\n\t    createFullscreenButton: function () {\n\n\t        let scope = this, item, isFullscreen = false, tapSkipped = true, stylesheetId;\n\n\t        const { container } = this;\n\n\t        stylesheetId = 'panolens-style-addon';\n\n\t        // Don't create button if no support\n\t        if ( !document.fullscreenEnabled       && \n\t\t\t\t!document.webkitFullscreenEnabled &&\n\t\t\t\t!document.mozFullScreenEnabled    &&\n\t\t\t\t!document.msFullscreenEnabled ) {\n\t            return;\n\t        }\n\n\t        function onTap ( event ) {\n\n\t            event.preventDefault();\n\t            event.stopPropagation();\n\n\t            tapSkipped = false;\n\n\t            if ( !isFullscreen ) {\n\n\t                if ( container.requestFullscreen ) { container.requestFullscreen(); }\n\t                if ( container.msRequestFullscreen ) { container.msRequestFullscreen(); }\n\t                if ( container.mozRequestFullScreen ) { container.mozRequestFullScreen(); }\n\t                if ( container.webkitRequestFullscreen ) { container.webkitRequestFullscreen( Element.ALLOW_KEYBOARD_INPUT ); }\n\t              \n\t                isFullscreen = true;\n\n\t            } else {\n\n\t                if ( document.exitFullscreen ) { document.exitFullscreen(); }\n\t                if ( document.msExitFullscreen ) { document.msExitFullscreen(); }\n\t                if ( document.mozCancelFullScreen ) { document.mozCancelFullScreen(); }\n\t                if ( document.webkitExitFullscreen ) { document.webkitExitFullscreen( ); }\n\n\t                isFullscreen = false;\n\n\t            }\n\n\t            this.style.backgroundImage = ( isFullscreen ) \n\t                ? 'url(\"' + DataImage.FullscreenLeave + '\")' \n\t                : 'url(\"' + DataImage.FullscreenEnter + '\")';\n\n\t        }\n\n\t        function onFullScreenChange () {\n\n\t            if ( tapSkipped ) {\n\n\t                isFullscreen = !isFullscreen; \n\n\t                item.style.backgroundImage = ( isFullscreen ) \n\t                    ? 'url(\"' + DataImage.FullscreenLeave + '\")' \n\t                    : 'url(\"' + DataImage.FullscreenEnter + '\")';\n\n\t            }\n\n\t            /**\n\t             * Viewer handler event\n\t             * @type {object}\n\t             * @event Widget#panolens-viewer-handler\n\t             * @property {string} method - 'onWindowResize' function call on Viewer\n\t             */\n\t            scope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onWindowResize' } );\n\n\t            tapSkipped = true;\n\n\t        }\n\n\t        document.addEventListener( 'fullscreenchange', onFullScreenChange, false );\n\t        document.addEventListener( 'webkitfullscreenchange', onFullScreenChange, false );\n\t        document.addEventListener( 'mozfullscreenchange', onFullScreenChange, false );\n\t        document.addEventListener( 'MSFullscreenChange', onFullScreenChange, false );\n\n\t        item = this.createCustomItem( { \n\n\t            style: { \n\n\t                backgroundImage: 'url(\"' + DataImage.FullscreenEnter + '\")' \n\n\t            },\n\n\t            onTap: onTap\n\n\t        } );\n\n\t        // Add fullscreen stlye if not exists\n\t        if ( !document.querySelector( stylesheetId ) ) {\n\t            const sheet = document.createElement( 'style' );\n\t            sheet.id = stylesheetId;\n\t            sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n\t            document.body.appendChild( sheet );\n\t        }\n\t\t\t\n\t        return item;\n\n\t    },\n\n\t    /**\n\t     * Create video control container\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLSpanElement} - The dom element icon for video control\n\t     */\n\t    createVideoControl: function () {\n\n\t        const item = document.createElement( 'span' );\n\t        item.style.display = 'none';\n\t        item.show = function () { \n\n\t            item.style.display = '';\n\n\t        };\n\n\t        item.hide = function () { \n\n\t            item.style.display = 'none';\n\t            item.controlButton.paused = true;\n\t            item.controlButton.update();\n\n\t        };\n\n\t        item.controlButton = this.createVideoControlButton();\n\t        item.seekBar = this.createVideoControlSeekbar();\n\t\t\t\n\t        item.appendChild( item.controlButton );\n\t        item.appendChild( item.seekBar );\n\n\t        item.dispose = function () {\n\n\t            item.removeChild( item.controlButton );\n\t            item.removeChild( item.seekBar );\n\n\t            item.controlButton.dispose();\n\t            item.controlButton = null;\n\n\t            item.seekBar.dispose();\n\t            item.seekBar = null;\n\n\t        };\n\n\t        this.addEventListener( 'video-control-show', item.show );\n\t        this.addEventListener( 'video-control-hide', item.hide );\n\n\t        return item;\n\n\t    },\n\n\t    /**\n\t     * Create video control button\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLSpanElement} - The dom element icon for video control\n\t     * @fires Widget#panolens-viewer-handler\n\t     */\n\t    createVideoControlButton: function () {\n\n\t        const scope = this;\n\n\t        function onTap ( event ) {\n\n\t            event.preventDefault();\n\t            event.stopPropagation();\n\n\t            /**\n\t             * Viewer handler event\n\t             * @type {object}\n\t             * @event Widget#panolens-viewer-handler\n\t             * @property {string} method - 'toggleVideoPlay' function call on Viewer\n\t             */\n\t            scope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused } );\n\n\t            this.paused = !this.paused;\n\n\t            item.update();\n\n\t        }\n\t        const item = this.createCustomItem( { \n\n\t            style: { \n\n\t                float: 'left',\n\t                backgroundImage: 'url(\"' + DataImage.VideoPlay + '\")'\n\n\t            },\n\n\t            onTap: onTap\n\n\t        } );\n\n\t        item.paused = true;\n\n\t        item.update = function ( paused ) {\n\n\t            this.paused = paused !== undefined ? paused : this.paused;\n\n\t            this.style.backgroundImage = 'url(\"' + ( this.paused \n\t                ? DataImage.VideoPlay \n\t                : DataImage.VideoPause ) + '\")';\n\n\t        };\n\n\t        return item;\n\n\t    },\n\n\t    /**\n\t     * Create video seekbar\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLSpanElement} - The dom element icon for video seekbar\n\t     * @fires Widget#panolens-viewer-handler\n\t     */\n\t    createVideoControlSeekbar: function () {\n\n\t        let scope = this, item, progressElement, progressElementControl,\n\t            isDragging = false, mouseX, percentageNow, percentageNext;\n\n\t        progressElement = document.createElement( 'div' );\n\t        progressElement.style.width = '0%';\n\t        progressElement.style.height = '100%';\n\t        progressElement.style.backgroundColor = '#fff';\n\n\t        progressElementControl = document.createElement( 'div' );\n\t        progressElementControl.style.float = 'right';\n\t        progressElementControl.style.width = '14px';\n\t        progressElementControl.style.height = '14px';\n\t        progressElementControl.style.transform = 'translate(7px, -5px)';\n\t        progressElementControl.style.borderRadius = '50%';\n\t        progressElementControl.style.backgroundColor = '#ddd';\n\n\t        progressElementControl.addEventListener( 'mousedown', onMouseDown, { passive: true } );\n\t        progressElementControl.addEventListener( 'touchstart', onMouseDown,  { passive: true } );\n\n\t        function onMouseDown ( event ) {\n\n\t            event.stopPropagation();\n\t\t\t\t\n\t            isDragging = true;\n\t\t\t\t\n\t            mouseX = event.clientX || ( event.changedTouches && event.changedTouches[0].clientX );\n\n\t            percentageNow = parseInt( progressElement.style.width ) / 100;\n\n\t            addControlListeners();\n\t        }\n\n\t        function onVideoControlDrag ( event ) {\n\n\t            if( isDragging ){\n\n\t                const clientX = event.clientX || ( event.changedTouches && event.changedTouches[0].clientX );\n\t\t\t\t\t\n\t                percentageNext = ( clientX - mouseX ) / item.clientWidth;\n\n\t                percentageNext = percentageNow + percentageNext;\n\n\t                percentageNext = percentageNext > 1 ? 1 : ( ( percentageNext < 0 ) ? 0 : percentageNext );\n\n\t                item.setProgress ( percentageNext );\n\n\t                /**\n\t                 * Viewer handler event\n\t                 * @type {object}\n\t                 * @event Widget#panolens-viewer-handler\n\t                 * @property {string} method - 'setVideoCurrentTime' function call on Viewer\n\t                 * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t                 */\n\t                scope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext } );\n\n\t            }\n\n\t        }\n\n\t        function onVideoControlStop ( event ) {\n\n\t            event.stopPropagation();\n\n\t            isDragging = false;\n\n\t            removeControlListeners();\n\n\t        }\n\n\t        function addControlListeners () {\n\n\t            scope.container.addEventListener( 'mousemove', onVideoControlDrag, { passive: true } );\n\t            scope.container.addEventListener( 'mouseup', onVideoControlStop, { passive: true } );\n\t            scope.container.addEventListener( 'touchmove', onVideoControlDrag, { passive: true } );\n\t            scope.container.addEventListener( 'touchend', onVideoControlStop, { passive: true } );\n\n\n\t        }\n\n\t        function removeControlListeners () {\n\n\t            scope.container.removeEventListener( 'mousemove', onVideoControlDrag, false );\n\t            scope.container.removeEventListener( 'mouseup', onVideoControlStop, false );\n\t            scope.container.removeEventListener( 'touchmove', onVideoControlDrag, false );\n\t            scope.container.removeEventListener( 'touchend', onVideoControlStop, false );\n\n\t        }\n\n\t        function onTap ( event ) {\n\n\t            event.preventDefault();\n\t            event.stopPropagation();\n\n\t            if ( event.target === progressElementControl ) { return; }\n\n\t            const percentage = ( event.changedTouches && event.changedTouches.length > 0 )\n\t                ? ( event.changedTouches[0].pageX - event.target.getBoundingClientRect().left ) / this.clientWidth\n\t                : event.offsetX / this.clientWidth;\n\n\t            /**\n\t             * Viewer handler event\n\t             * @type {object}\n\t             * @property {string} method - 'setVideoCurrentTime' function call on Viewer\n\t             * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t             */\n\t            scope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage } );\n\n\t            item.setProgress( event.offsetX / this.clientWidth );\n\n\t        }\n\t        function onDispose () {\n\n\t            removeControlListeners();\n\t            progressElement = null;\n\t            progressElementControl = null;\n\n\t        }\n\n\t        progressElement.appendChild( progressElementControl );\n\n\t        item = this.createCustomItem( {\n\n\t            style: { \n\n\t                float: 'left',\n\t                width: '30%',\n\t                height: '4px',\n\t                marginTop: '20px',\n\t                backgroundColor: 'rgba(188,188,188,0.8)'\n\n\t            },\n\n\t            onTap: onTap,\n\t            onDispose: onDispose\n\n\t        } );\n\n\t        item.appendChild( progressElement );\n\n\t        item.setProgress = function( percentage ) {\n\n\t            progressElement.style.width = percentage * 100 + '%';\n\n\t        };\t\t\n\n\t        this.addEventListener( 'video-update', function ( event ) { \n\n\t            item.setProgress( event.percentage ); \n\n\t        } );\n\n\t        item.progressElement = progressElement;\n\t        item.progressElementControl = progressElementControl;\n\n\t        return item;\n\n\t    },\n\n\t    /**\n\t     * Create menu item\n\t     * @param  {string} title - Title to display\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLElement} - An anchor tag element\n\t     */\n\t    createMenuItem: function ( title ) {\n\n\t        const scope = this; \n\t        const item = document.createElement( 'a' );\n\t        item.textContent = title;\n\t        item.style.display = 'block';\n\t        item.style.padding = '10px';\n\t        item.style.textDecoration = 'none';\n\t        item.style.cursor = 'pointer';\n\t        item.style.pointerEvents = 'auto';\n\t        item.style.transition = this.DEFAULT_TRANSITION;\n\n\t        item.slide = function ( right ) {\n\n\t            this.style.transform = 'translateX(' + ( right ? '' : '-' ) + '100%)';\n\n\t        };\n\n\t        item.unslide = function () {\n\n\t            this.style.transform = 'translateX(0)';\n\n\t        };\n\n\t        item.setIcon = function ( url ) {\n\n\t            if ( this.icon ) {\n\n\t                this.icon.style.backgroundImage = 'url(' + url + ')';\n\n\t            }\n\n\t        };\n\n\t        item.setSelectionTitle = function ( title ) {\n\n\t            if ( this.selection ) {\n\n\t                this.selection.textContent = title;\n\n\t            }\n\n\t        };\n\n\t        item.addSelection = function ( name ) {\n\t\t\t\t\n\t            const selection = document.createElement( 'span' );\n\t            selection.style.fontSize = '13px';\n\t            selection.style.fontWeight = '300';\n\t            selection.style.float = 'right';\n\n\t            this.selection = selection;\n\t            this.setSelectionTitle( name );\n\t            this.appendChild( selection );\n\t\t\t\t\n\t            return this;\n\n\t        };\n\n\t        item.addIcon = function ( url = DataImage.ChevronRight, left = false, flip = false ) {\n\t\t\t\t\n\t            const element = document.createElement( 'span' );\n\t            element.style.float = left ? 'left' : 'right';\n\t            element.style.width = '17px';\n\t            element.style.height = '17px';\n\t            element.style[ 'margin' + ( left ? 'Right' : 'Left' ) ] = '12px';\n\t            element.style.backgroundSize = 'cover';\n\n\t            if ( flip ) {\n\n\t                element.style.transform = 'rotateZ(180deg)';\n\n\t            }\n\n\t            this.icon = element;\n\t            this.setIcon( url );\n\t            this.appendChild( element );\n\n\t            return this;\n\n\t        };\n\n\t        item.addSubMenu = function ( title, items ) {\n\n\t            this.subMenu = scope.createSubMenu( title, items );\n\n\t            return this;\n\n\t        };\n\n\t        item.addEventListener( 'mouseenter', function () {\n\t\t\t\t\n\t            this.style.backgroundColor = '#e0e0e0';\n\n\t        }, false );\n\n\t        item.addEventListener( 'mouseleave', function () {\n\t\t\t\t\n\t            this.style.backgroundColor = '#fafafa';\n\n\t        }, false );\n\n\t        return item;\n\n\t    },\n\n\t    /**\n\t     * Create menu item header\n\t     * @param  {string} title - Title to display\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLElement} - An anchor tag element\n\t     */\n\t    createMenuItemHeader: function ( title ) {\n\n\t        const header = this.createMenuItem( title );\n\n\t        header.style.borderBottom = '1px solid #333';\n\t        header.style.paddingBottom = '15px';\n\n\t        return header;\n\n\t    },\n\n\t    /**\n\t     * Create main menu\n\t     * @param  {array} menus - Menu array list\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLElement} - A span element\n\t     */\n\t    createMainMenu: function ( menus ) {\n\t\t\t\n\t        let scope = this, menu = this.createMenu();\n\n\t        menu._width = 200;\n\t        menu.changeSize( menu._width );\n\n\t        function onTap ( event ) {\n\n\t            event.preventDefault();\n\t            event.stopPropagation();\n\n\t            let mainMenu = scope.mainMenu, subMenu = this.subMenu;\n\n\t            function onNextTick () {\n\n\t                mainMenu.changeSize( subMenu.clientWidth );\n\t                subMenu.show();\n\t                subMenu.unslideAll();\n\n\t            }\n\n\t            mainMenu.hide();\n\t            mainMenu.slideAll();\n\t            mainMenu.parentElement.appendChild( subMenu );\n\n\t            scope.activeMainItem = this;\n\t            scope.activeSubMenu = subMenu;\n\n\t            window.requestAnimationFrame( onNextTick );\n\n\t        }\n\t        for ( var i = 0; i < menus.length; i++ ) {\n\n\t            var item = menu.addItem( menus[ i ].title );\n\n\t            item.style.paddingLeft = '20px';\n\n\t            item.addIcon()\n\t                .addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t            if ( menus[ i ].subMenu && menus[ i ].subMenu.length > 0 ) {\n\n\t                var title = menus[ i ].subMenu[ 0 ].title;\n\n\t                item.addSelection( title )\n\t                    .addSubMenu( menus[ i ].title, menus[ i ].subMenu );\n\n\t            }\n\n\t        }\n\n\t        return menu;\n\n\t    },\n\n\t    /**\n\t     * Create sub menu\n\t     * @param {string} title - Sub menu title\n\t     * @param {array} items - Item array list\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLElement} - A span element\n\t     */\n\t    createSubMenu: function ( title, items ) {\n\n\t        let scope = this, menu, subMenu = this.createMenu();\n\n\t        subMenu.items = items;\n\t        subMenu.activeItem = null;\n\n\t        function onTap ( event ) {\n\n\t            event.preventDefault();\n\t            event.stopPropagation();\n\n\t            menu = scope.mainMenu;\n\t            menu.changeSize( menu._width );\n\t            menu.unslideAll();\n\t            menu.show();\n\t            subMenu.slideAll( true );\n\t            subMenu.hide();\n\n\t            if ( this.type !== 'header' ) {\n\n\t                subMenu.setActiveItem( this );\n\t                scope.activeMainItem.setSelectionTitle( this.textContent );\n\n\t                if ( this.handler ) { this.handler(); }\n\n\t            }\n\n\t        }\n\n\t        subMenu.addHeader( title ).addIcon( undefined, true, true ).addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t        for ( let i = 0; i < items.length; i++ ) {\n\n\t            const item = subMenu.addItem( items[ i ].title );\n\n\t            item.style.fontWeight = 300;\n\t            item.handler = items[ i ].handler;\n\t            item.addIcon( ' ', true );\n\t            item.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t            if ( !subMenu.activeItem ) {\n\n\t                subMenu.setActiveItem( item );\n\n\t            }\n\n\t        }\n\n\t        subMenu.slideAll( true );\n\n\t        return subMenu;\n\t\t\t\n\t    },\n\n\t    /**\n\t     * Create general menu\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLElement} - A span element\n\t     */\n\t    createMenu: function () {\n\n\t        const scope = this;\n\t        const menu = document.createElement( 'span' );\n\t        const style = menu.style;\n\n\t        style.padding = '5px 0';\n\t        style.position = 'fixed';\n\t        style.bottom = '100%';\n\t        style.right = '14px';\n\t        style.backgroundColor = '#fafafa';\n\t        style.fontFamily = 'Helvetica Neue';\n\t        style.fontSize = '14px';\n\t        style.visibility = 'hidden';\n\t        style.opacity = 0;\n\t        style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n\t        style.borderRadius = '2px';\n\t        style.overflow = 'hidden';\n\t        style.willChange = 'width, height, opacity';\n\t        style.pointerEvents = 'auto';\n\t        style.transition = this.DEFAULT_TRANSITION;\n\n\t        menu.visible = false;\n\n\t        menu.changeSize = function ( width, height ) {\n\n\t            if ( width ) {\n\n\t                this.style.width = width + 'px';\n\n\t            }\n\n\t            if ( height ) {\n\n\t                this.style.height = height + 'px';\n\n\t            }\n\n\t        };\n\n\t        menu.show = function () {\n\n\t            this.style.opacity = 1;\n\t            this.style.visibility = 'visible';\n\t            this.visible = true;\n\n\t        };\n\n\t        menu.hide = function () {\n\n\t            this.style.opacity = 0;\n\t            this.style.visibility = 'hidden';\n\t            this.visible = false;\n\n\t        };\n\n\t        menu.toggle = function () {\n\n\t            if ( this.visible ) {\n\n\t                this.hide();\n\n\t            } else {\n\n\t                this.show();\n\n\t            }\n\n\t        };\n\n\t        menu.slideAll = function ( right ) {\n\n\t            for ( let i = 0; i < menu.children.length; i++ ){\n\n\t                if ( menu.children[ i ].slide ) {\n\n\t                    menu.children[ i ].slide( right );\n\n\t                }\n\n\t            }\n\n\t        };\n\n\t        menu.unslideAll = function () {\n\n\t            for ( let i = 0; i < menu.children.length; i++ ){\n\n\t                if ( menu.children[ i ].unslide ) {\n\n\t                    menu.children[ i ].unslide();\n\n\t                }\n\n\t            }\n\n\t        };\n\n\t        menu.addHeader = function ( title ) {\n\n\t            const header = scope.createMenuItemHeader( title );\n\t            header.type = 'header';\n\n\t            this.appendChild( header );\n\n\t            return header;\n\n\t        };\n\n\t        menu.addItem = function ( title ) {\n\n\t            const item = scope.createMenuItem( title );\n\t            item.type = 'item';\n\n\t            this.appendChild( item );\n\n\t            return item;\n\n\t        };\n\n\t        menu.setActiveItem = function ( item ) {\n\n\t            if ( this.activeItem ) {\n\n\t                this.activeItem.setIcon( ' ' );\n\n\t            }\n\n\t            item.setIcon( DataImage.Check );\n\n\t            this.activeItem = item;\n\n\t        };\n\n\t        menu.addEventListener( 'mousemove', this.PREVENT_EVENT_HANDLER, true );\n\t        menu.addEventListener( 'mouseup', this.PREVENT_EVENT_HANDLER, true );\n\t        menu.addEventListener( 'mousedown', this.PREVENT_EVENT_HANDLER, true );\n\n\t        return menu;\n\n\t    },\n\n\t    /**\n\t     * Create custom item element\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLSpanElement} - The dom element icon\n\t     */\n\t    createCustomItem: function ( options = {} ) {\n\n\t        const scope = this;\n\t        const item = options.element || document.createElement( 'span' );\n\t        const { onDispose } = options;\n\n\t        item.style.cursor = 'pointer';\n\t        item.style.float = 'right';\n\t        item.style.width = '44px';\n\t        item.style.height = '100%';\n\t        item.style.backgroundSize = '60%';\n\t        item.style.backgroundRepeat = 'no-repeat';\n\t        item.style.backgroundPosition = 'center';\n\t        item.style.webkitUserSelect = \n\t\t\titem.style.MozUserSelect = \n\t\t\titem.style.userSelect = 'none';\n\t        item.style.position = 'relative';\n\t        item.style.pointerEvents = 'auto';\n\n\t        // White glow on icon\n\t        item.addEventListener( scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function() {\n\t            item.style.filter = \n\t\t\t\titem.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n\t        }, { passive: true });\n\t        item.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function() {\n\t            item.style.filter = \n\t\t\t\titem.style.webkitFilter = '';\n\t        }, { passive: true });\n\n\t        this.mergeStyleOptions( item, options.style );\n\n\t        if ( options.onTap ) {\n\n\t            item.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false );\n\n\t        }\n\n\t        item.dispose = function () {\n\n\t            item.removeEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false );\n\n\t            if ( onDispose ) { options.onDispose(); }\n\n\t        };\n\t\t\t\n\t        return item;\n\n\t    },\n\n\t    /**\n\t     * Merge item css style\n\t     * @param  {HTMLElement} element - The element to be merged with style\n\t     * @param  {object} options - The style options\n\t     * @memberOf Widget\n\t     * @instance\n\t     * @return {HTMLElement} - The same element with merged styles\n\t     */\n\t    mergeStyleOptions: function ( element, options = {} ) {\n\n\t        for ( let property in options ){\n\n\t            if ( options.hasOwnProperty( property ) ) {\n\n\t                element.style[ property ] = options[ property ];\n\n\t            }\n\n\t        }\n\n\t        return element;\n\n\t    },\n\n\t    /**\n\t     * Dispose widgets by detaching dom elements from container\n\t     * @memberOf Widget\n\t     * @instance\n\t     */\n\t    dispose: function () {\n\n\t        if ( this.barElement ) {\n\t            this.container.removeChild( this.barElement );\n\t            this.barElement.dispose();\n\t            this.barElement = null;\n\n\t        }\n\n\t    }\n\t\t\n\t} );\n\n\t/**\n\t * @classdesc Base Panorama\n\t * @constructor\n\t * @param {THREE.Geometry} geometry - The geometry for this panorama\n\t * @param {THREE.Material} material - The material for this panorama\n\t */\n\tfunction Panorama ( geometry, material ) {\n\n\t    THREE.Mesh.call( this, geometry, material );\n\n\t    this.type = 'panorama';\n\n\t    this.ImageQualityLow = 1;\n\t    this.ImageQualityFair = 2;\n\t    this.ImageQualityMedium = 3;\n\t    this.ImageQualityHigh = 4;\n\t    this.ImageQualitySuperHigh = 5;\n\n\t    this.animationDuration = 1000;\n\n\t    this.defaultInfospotSize = 350;\n\n\t    this.container = undefined;\n\n\t    this.loaded = false;\n\n\t    this.linkedSpots = [];\n\n\t    this.isInfospotVisible = false;\n\t\t\n\t    this.linkingImageURL = undefined;\n\t    this.linkingImageScale = undefined;\n\n\t    this.material.side = THREE.BackSide;\n\t    this.material.opacity = 0;\n        this.material.transparent = 1;\n\n\t    this.scale.x *= -1;\n\t    this.renderOrder = -1;\n\n\t    this.active = false;\n\n\t    this.infospotAnimation = new Tween.Tween( this ).to( {}, this.animationDuration / 2 );\n\n\t    this.addEventListener( 'load', this.fadeIn.bind( this ) );\n\t    this.addEventListener( 'panolens-container', this.setContainer.bind( this ) );\n\t    this.addEventListener( 'click', this.onClick.bind( this ) );\n\n\t    this.setupTransitions();\n\n\t}\n\n\tPanorama.prototype = Object.assign( Object.create( THREE.Mesh.prototype ), {\n\n\t    constructor: Panorama,\n\n\t    /**\n\t     * Adding an object\n\t     * To counter the scale.x = -1, it will automatically add an \n\t     * empty object with inverted scale on x\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @param {THREE.Object3D} object - The object to be added\n\t     */\n\t    add: function ( object ) {\n\n\t        let invertedObject;\n\n\t        if ( arguments.length > 1 ) {\n\n\t            for ( var i = 0; i < arguments.length; i ++ ) {\n\n\t                this.add( arguments[ i ] );\n\n\t            }\n\n\t            return this;\n\n\t        }\n\n\t        // In case of infospots\n\t        if ( object instanceof Infospot ) {\n\n\t            invertedObject = object;\n\n\t            if ( object.dispatchEvent ) {\n\n\t                const { container } = this;\n\n\t                if ( container ) { object.dispatchEvent( { type: 'panolens-container', container } ); }\n\t\t\t\t\t\n\t                object.dispatchEvent( { type: 'panolens-infospot-focus', method: function ( vector, duration, easing ) {\n\n\t                    /**\n\t                     * Infospot focus handler event\n\t                     * @type {object}\n\t                     * @event Panorama#panolens-viewer-handler\n\t                     * @property {string} method - Viewer function name\n\t                     * @property {*} data - The argument to be passed into the method\n\t                     */\n\t                    this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [ vector, duration, easing ] } );\n\n\n\t                }.bind( this ) } );\n\t            }\n\n\t        } else {\n\n\t            // Counter scale.x = -1 effect\n\t            invertedObject = new THREE.Object3D();\n\t            invertedObject.scale.x = -1;\n\t            invertedObject.scalePlaceHolder = true;\n\t            invertedObject.add( object );\n\n\t        }\n\n\t        THREE.Object3D.prototype.add.call( this, invertedObject );\n\n\t    },\n\n\t    load: function () {\n\n\t        this.onLoad();\n\t\t\t\n\t    },\n\n\t    /**\n\t     * Click event handler\n\t     * @param  {object} event - Click event\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Infospot#dismiss\n\t     */\n\t    onClick: function ( event ) {\n\n\t        if ( event.intersects && event.intersects.length === 0 ) {\n\n\t            this.traverse( function ( object ) {\n\n\t                /**\n\t                 * Dimiss event\n\t                 * @type {object}\n\t                 * @event Infospot#dismiss\n\t                 */\n\t                object.dispatchEvent( { type: 'dismiss' } );\n\n\t            } );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set container of this panorama \n\t     * @param {HTMLElement|object} data - Data with container information\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Infospot#panolens-container\n\t     */\n\t    setContainer: function ( data ) {\n\n\t        let container;\n\n\t        if ( data instanceof HTMLElement ) {\n\n\t            container = data;\n\n\t        } else if ( data && data.container ) {\n\n\t            container = data.container;\n\n\t        }\n\n\t        if ( container ) {\n\n\t            this.children.forEach( function ( child ) {\n\n\t                if ( child instanceof Infospot && child.dispatchEvent ) {\n\n\t                    /**\n\t                     * Set container event\n\t                     * @type {object}\n\t                     * @event Infospot#panolens-container\n\t                     * @property {HTMLElement} container - The container of this panorama\n\t                     */\n\t                    child.dispatchEvent( { type: 'panolens-container', container: container } );\n\n\t                }\n\n\t            } );\n\n\t            this.container = container;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * This will be called when panorama is loaded\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Panorama#load\n\t     */\n\t    onLoad: function () {\n\n\t        this.loaded = true;\n\n\t        /**\n\t         * Load panorama event\n\t         * @type {object}\n\t         * @event Panorama#load\n\t         */\n\t        this.dispatchEvent( { type: 'load' } );\n\n\t    },\n\n\t    /**\n\t     * This will be called when panorama is in progress\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Panorama#progress\n\t     */\n\t    onProgress: function ( progress ) {\n\n\t        /**\n\t         * Loading panorama progress event\n\t         * @type {object}\n\t         * @event Panorama#progress\n\t         * @property {object} progress - The progress object containing loaded and total amount\n\t         */\n\t        this.dispatchEvent( { type: 'progress', progress: progress } );\n\n\t    },\n\n\t    /**\n\t     * This will be called when panorama loading has error\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Panorama#error\n\t     */\n\t    onError: function () {\n\n\t        /**\n\t         * Loading panorama error event\n\t         * @type {object}\n\t         * @event Panorama#error\n\t         */\n\t        this.dispatchEvent( { type: 'error' } );\n\n\t    },\n\n\t    /**\n\t     * Get zoom level based on window width\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @return {number} zoom level indicating image quality\n\t     */\n\t    getZoomLevel: function () {\n\n\t        let zoomLevel;\n\n\t        if ( window.innerWidth <= 800 ) {\n\n\t            zoomLevel = this.ImageQualityFair;\n\n\t        } else if ( window.innerWidth > 800 &&  window.innerWidth <= 1280 ) {\n\n\t            zoomLevel = this.ImageQualityMedium;\n\n\t        } else if ( window.innerWidth > 1280 && window.innerWidth <= 1920 ) {\n\n\t            zoomLevel = this.ImageQualityHigh;\n\n\t        } else if ( window.innerWidth > 1920 ) {\n\n\t            zoomLevel = this.ImageQualitySuperHigh;\n\n\t        } else {\n\n\t            zoomLevel = this.ImageQualityLow;\n\n\t        }\n\n\t        return zoomLevel;\n\n\t    },\n\n\t    /**\n\t     * Update texture of a panorama\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @param {THREE.Texture} texture - Texture to be updated\n\t     */\n\t    updateTexture: function ( texture ) {\n\n\t        this.material.map = texture;\n\t        this.material.needsUpdate = true;\n\n\t    },\n\n\t    /**\n\t     * Toggle visibility of infospots in this panorama\n\t     * @param  {boolean} isVisible - Visibility of infospots\n\t     * @param  {number} delay - Delay in milliseconds to change visibility\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Panorama#infospot-animation-complete\n\t     */\n\t    toggleInfospotVisibility: function ( isVisible, delay ) {\n\n\t        delay = ( delay !== undefined ) ? delay : 0;\n\n\t        const visible = ( isVisible !== undefined ) ? isVisible : ( this.isInfospotVisible ? false : true );\n\n\t        this.traverse( function ( object ) {\n\n\t            if ( object instanceof Infospot ) {\n\n\t                if ( visible ) {\n\n\t                    object.show( delay );\n\n\t                } else {\n\n\t                    object.hide( delay );\n\n\t                }\n\n\t            }\n\n\t        } );\n\n\t        this.isInfospotVisible = visible;\n\n\t        // Animation complete event\n\t        this.infospotAnimation.onComplete( function () {\n\n\t            /**\n\t             * Complete toggling infospot visibility\n\t             * @event Panorama#infospot-animation-complete\n\t             * @type {object} \n\t             */\n\t            this.dispatchEvent( { type: 'infospot-animation-complete', visible: visible } );\n\n\t        }.bind( this ) ).delay( delay ).start();\n\n\t    },\n\n\t    /**\n\t     * Set image of this panorama's linking infospot\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @param {string} url   - Url to the image asset\n\t     * @param {number} scale - Scale factor of the infospot\n\t     */\n\t    setLinkingImage: function ( url, scale ) {\n\n\t        this.linkingImageURL = url;\n\t        this.linkingImageScale = scale;\n\n\t    },\n\n\t    /**\n\t     * Link one-way panorama\n\t     * @param  {Panorama} pano  - The panorama to be linked to\n\t     * @param  {THREE.Vector3} position - The position of infospot which navigates to the pano\n\t     * @param  {number} [imageScale=300] - Image scale of linked infospot\n\t     * @param  {string} [imageSrc=DataImage.Arrow] - The image source of linked infospot\n\t     * @memberOf Panorama\n\t     * @instance\n\t     */\n\t    link: function ( pano, position, imageScale, imageSrc ) {\n\n\t        let scale, img;\n\n\t        this.visible = true;\n\n\t        if ( !position ) {\n\n\t            console.warn( 'Please specify infospot position for linking' );\n\n\t            return;\n\n\t        }\n\n\t        // Infospot scale\n\t        if ( imageScale !== undefined ) {\n\n\t            scale = imageScale;\n\n\t        } else if ( pano.linkingImageScale !== undefined ) {\n\n\t            scale = pano.linkingImageScale;\n\n\t        } else {\n\n\t            scale = 300;\n\n\t        }\n\n\n\t        // Infospot image\n\t        if ( imageSrc ) {\n\n\t            img = imageSrc;\n\n\t        } else if ( pano.linkingImageURL ) {\n\n\t            img = pano.linkingImageURL;\n\n\t        } else {\n\n\t            img = DataImage.Arrow;\n\n\t        }\n\n\t        // Creates a new infospot\n\t        const spot = new Infospot( scale, img );\n\t        spot.position.copy( position );\n\t        spot.toPanorama = pano;\n\t        spot.addEventListener( 'click', function () {\n\n\t            /**\n\t             * Viewer handler event\n\t             * @type {object}\n\t             * @event Panorama#panolens-viewer-handler\n\t             * @property {string} method - Viewer function name\n\t             * @property {*} data - The argument to be passed into the method\n\t             */\n\t            this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'setPanorama', data: pano } );\n\n\t        }.bind( this ) );\n\n\t        this.linkedSpots.push( spot );\n\n\t        this.add( spot );\n\n\t        this.visible = false;\n\n\t    },\n\n\t    reset: function () {\n\n\t        this.children.length = 0;\t\n\n\t    },\n\n\t    setupTransitions: function () {\n\n\t        this.fadeInAnimation = new Tween.Tween( this.material )\n\t            .easing( Tween.Easing.Quartic.Out )\n\t            .onStart( function () {\n\n\t                this.visible = true;\n\t                // this.material.visible = true;\n\n\t                /**\n\t                 * Enter panorama fade in start event\n\t                 * @event Panorama#enter-fade-start\n\t                 * @type {object} \n\t                 */\n\t                this.dispatchEvent( { type: 'enter-fade-start' } );\n\n\t            }.bind( this ) );\n\n\t        this.fadeOutAnimation = new Tween.Tween( this.material )\n\t            .easing( Tween.Easing.Quartic.Out )\n\t            .onComplete( function () {\n\n\t                this.visible = false;\n\t                // this.material.visible = true;\n\n\t                /**\n\t                 * Leave panorama complete event\n\t                 * @event Panorama#leave-complete\n\t                 * @type {object} \n\t                 */\n\t                this.dispatchEvent( { type: 'leave-complete' } );\n\n\t            }.bind( this ) );\n\n\t        this.enterTransition = new Tween.Tween( this )\n\t            .easing( Tween.Easing.Quartic.Out )\n\t            .onComplete( function () {\n\n\t                /**\n\t                 * Enter panorama and animation complete event\n\t                 * @event Panorama#enter-complete\n\t                 * @type {object} \n\t                 */\n\t                this.dispatchEvent( { type: 'enter-complete' } );\n\n\t            }.bind ( this ) )\n\t            .start();\n\n\t        this.leaveTransition = new Tween.Tween( this )\n\t            .easing( Tween.Easing.Quartic.Out );\n\n\t    },\n\n\t    onFadeAnimationUpdate: function () {\n\n\t        const alpha = this.material.opacity;\n\t        const { uniforms } = this.material;\n\n\t        if ( uniforms && uniforms.opacity ) {\n\t            uniforms.opacity.value = alpha;\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Start fading in animation\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Panorama#enter-fade-complete\n\t     */\n\t    fadeIn: function ( duration ) {\n\n\t        duration = duration >= 0 ? duration : this.animationDuration;\n\n\t        this.fadeOutAnimation.stop();\n\t        this.fadeInAnimation\n\t            .to( { opacity: 1 }, duration )\n\t            .onUpdate( this.onFadeAnimationUpdate.bind( this ) )\n\t            .onComplete( function () {\n\n\t                this.toggleInfospotVisibility( true, duration / 2 );\n\n\t                /**\n\t                 * Enter panorama fade complete event\n\t                 * @event Panorama#enter-fade-complete\n\t                 * @type {object} \n\t                 */\n\t                this.dispatchEvent( { type: 'enter-fade-complete' } );\t\t\t\n\n\t            }.bind( this ) )\n\t            .start();\n\n\t    },\n\n\t    /**\n\t     * Start fading out animation\n\t     * @memberOf Panorama\n\t     * @instance\n\t     */\n\t    fadeOut: function ( duration ) {\n\n\t        duration = duration >= 0 ? duration : this.animationDuration;\n\n\t        this.fadeInAnimation.stop();\n\t        this.fadeOutAnimation\n\t            .to( { opacity: 0 }, duration )\n\t            .onUpdate( this.onFadeAnimationUpdate.bind( this ) )\n\t            .start();\n\n\t    },\n\n\t    /**\n\t     * This will be called when entering a panorama \n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Panorama#enter\n\t     * @fires Panorama#enter-start\n\t     */\n\t    onEnter: function () {\n\n\t        const duration = this.animationDuration;\n\n\t        this.leaveTransition.stop();\n\t        this.enterTransition\n\t            .to( {}, duration )\n\t            .onStart( function () {\n\n\t                /**\n\t                 * Enter panorama and animation starting event\n\t                 * @event Panorama#enter-start\n\t                 * @type {object} \n\t                 */\n\t                this.dispatchEvent( { type: 'enter-start' } );\n\t\t\t\t\t\n\t                if ( this.loaded ) {\n\n\t                    this.fadeIn( duration );\n\n\t                } else {\n\n\t                    this.load();\n\n\t                }\n\t\t\t\t\t\n\t            }.bind( this ) )\n\t            .start();\n\n\t        /**\n\t         * Enter panorama event\n\t         * @event Panorama#enter\n\t         * @type {object} \n\t         */\n\t        this.dispatchEvent( { type: 'enter' } );\n\n\t        this.children.forEach( child => {\n\n\t            child.dispatchEvent( { type: 'panorama-enter' } );\n\n\t        } );\n\n\t        this.active = true;\n\n\t    },\n\n\t    /**\n\t     * This will be called when leaving a panorama\n\t     * @memberOf Panorama\n\t     * @instance\n\t     * @fires Panorama#leave\n\t     */\n\t    onLeave: function () {\n\n\t        const duration = this.animationDuration;\n\n\t        this.enterTransition.stop();\n\t        this.leaveTransition\n\t            .to( {}, duration )\n\t            .onStart( function () {\n\n\t                /**\n\t                 * Leave panorama and animation starting event\n\t                 * @event Panorama#leave-start\n\t                 * @type {object} \n\t                 */\n\t                this.dispatchEvent( { type: 'leave-start' } );\n\n\t                this.fadeOut( duration );\n\t                this.toggleInfospotVisibility( false );\n\n\t            }.bind( this ) )\n\t            .start();\n\n\t        /**\n\t         * Leave panorama event\n\t         * @event Panorama#leave\n\t         * @type {object} \n\t         */\n\t        this.dispatchEvent( { type: 'leave' } );\n\n\t        this.children.forEach( child => {\n\n\t            child.dispatchEvent( { type: 'panorama-leave' } );\n\n\t        } );\n\n\t        this.active = false;\n\n\t    },\n\n\t    /**\n\t     * Dispose panorama\n\t     * @memberOf Panorama\n\t     * @instance\n\t     */\n\t    dispose: function () {\n\n\t        this.infospotAnimation.stop();\n\t        this.fadeInAnimation.stop();\n\t        this.fadeOutAnimation.stop();\n\t        this.enterTransition.stop();\n\t        this.leaveTransition.stop();\n\n\t        /**\n\t         * On panorama dispose handler\n\t         * @type {object}\n\t         * @event Panorama#panolens-viewer-handler\n\t         * @property {string} method - Viewer function name\n\t         * @property {*} data - The argument to be passed into the method\n\t         */\n\t        this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this } );\n\n\t        // recursive disposal on 3d objects\n\t        function recursiveDispose ( object ) {\n\n\t            const { geometry, material } = object;\n\n\t            for ( var i = object.children.length - 1; i >= 0; i-- ) {\n\n\t                recursiveDispose( object.children[i] );\n\t                object.remove( object.children[i] );\n\n\t            }\n\n\t            if ( object instanceof Infospot ) {\n\n\t                object.dispose();\n\n\t            }\n\t\t\t\t\n\t            if ( geometry ) { geometry.dispose(); object.geometry = null; }\n\t            if ( material ) { material.dispose(); object.material = null; }\n\n\t        }\n\n\t        recursiveDispose( this );\n\n\t        if ( this.parent ) {\n\n\t            this.parent.remove( this );\n\n\t        }\n\n\t    }\n\n\t} );\n\n\t/**\n\t * @classdesc Equirectangular based image panorama\n\t * @constructor\n\t * @param {string} image - Image url or HTMLImageElement\n\t */\n\tfunction ImagePanorama ( image, _geometry, _material ) {\n\n\t    const radius = 10000;\n\t    const geometry = _geometry || new THREE.SphereBufferGeometry( radius, 60, 40 );\n\t    const material = _material || new THREE.MeshBasicMaterial( { opacity: 0, transparent: true } );\n        material.transparent = 1;\n\n\t    Panorama.call( this, geometry, material );\n        Panorama.renderOrder = -10\n\n\t    this.src = image;\n        console.log(image)\n\t    this.radius = radius;\n\n\t}\n\n\tImagePanorama.prototype = Object.assign( Object.create( Panorama.prototype ), {\n\n\t    constructor: ImagePanorama,\n\n\t    /**\n\t     * Load image asset\n\t     * @param  {*} src - Url or image element\n\t     * @memberOf ImagePanorama\n\t     * @instance\n\t     */\n\t    load: function ( src ) {\n\n\t        src = src || this.src;\n\n\t        if ( !src ) { \n\n\t            console.warn( 'Image source undefined' );\n\n\t            return; \n\n\t        } else if ( typeof src === 'string' ) {\n\n\t            TextureLoader.load( src, this.onLoad.bind( this ), this.onProgress.bind( this ), this.onError.bind( this ) );\n\n\t        } else if ( src instanceof HTMLImageElement ) {\n\n\t            this.onLoad( new THREE.Texture( src ) );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * This will be called when image is loaded\n\t     * @param  {THREE.Texture} texture - Texture to be updated\n\t     * @memberOf ImagePanorama\n\t     * @instance\n\t     */\n\t    onLoad: function ( texture ) {\n\n\t        texture.minFilter = texture.magFilter = THREE.LinearFilter;\n\t        texture.needsUpdate = true;\n\t\t\t\n\t        this.updateTexture( texture );\n\n\t        window.requestAnimationFrame( Panorama.prototype.onLoad.bind( this ) );\n\n\t    },\n\n\t    /**\n\t     * Reset\n\t     * @memberOf ImagePanorama\n\t     * @instance\n\t     */\n\t    reset: function () {\n\n\t        Panorama.prototype.reset.call( this );\n\n\t    },\n\n\t    /**\n\t     * Dispose\n\t     * @memberOf ImagePanorama\n\t     * @instance\n\t     */\n\t    dispose: function () {\n\n\t        const { material: { map } } = this;\n\n\t        // Release cached image\n\t        THREE.Cache.remove( this.src );\n\n\t        if ( map ) { map.dispose(); }\n\n\t        Panorama.prototype.dispose.call( this );\n\n\t    }\n\n\t} );\n\n\t/**\n\t * @classdesc Empty panorama\n\t * @constructor\n\t */\n\tfunction EmptyPanorama () {\n\n\t    const geometry = new THREE.BufferGeometry();\n\t    const material = new THREE.MeshBasicMaterial( { color: 0x000000, opacity: 0, transparent: true } );\n\n\t    geometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array(), 1 ) );\n\n\t    Panorama.call( this, geometry, material );\n\n\t}\n\n\tEmptyPanorama.prototype = Object.assign( Object.create( Panorama.prototype ), {\n\n\t    constructor: EmptyPanorama\n\n\t} );\n\n\t/**\n\t * @classdesc Cubemap-based panorama\n\t * @constructor\n\t * @param {array} images - Array of 6 urls to images, one for each side of the CubeTexture. The urls should be specified in the following order: pos-x, neg-x, pos-y, neg-y, pos-z, neg-z\n\t */\n\tfunction CubePanorama ( images = [] ){\n\n\t    const edgeLength = 10000;\n\t    const shader = Object.assign( {}, THREE.ShaderLib[ 'cube' ] );\n\t    const geometry = new THREE.BoxBufferGeometry( edgeLength, edgeLength, edgeLength );\n\t    const material = new THREE.ShaderMaterial( {\n\n\t        fragmentShader: shader.fragmentShader,\n\t        vertexShader: shader.vertexShader,\n\t        uniforms: shader.uniforms,\n\t        side: THREE.BackSide,\n\t        transparent: true\n\n\t    } );\n\n\t    Panorama.call( this, geometry, material );\n\n\t    this.images = images;\n\t    this.edgeLength = edgeLength;\n\t    this.material.uniforms.opacity.value = 0;\n\n\t}\n\n\tCubePanorama.prototype = Object.assign( Object.create( Panorama.prototype ), {\n\n\t    constructor: CubePanorama,\n\n\t    /**\n\t     * Load 6 images and bind listeners\n\t     * @memberOf CubePanorama\n\t     * @instance\n\t     */\n\t    load: function () {\n\n\t        CubeTextureLoader.load( \t\n\n\t            this.images, \n\n\t            this.onLoad.bind( this ), \n\t            this.onProgress.bind( this ), \n\t            this.onError.bind( this ) \n\n\t        );\n\n\t    },\n\n\t    /**\n\t     * This will be called when 6 textures are ready\n\t     * @param  {THREE.CubeTexture} texture - Cube texture\n\t     * @memberOf CubePanorama\n\t     * @instance\n\t     */\n\t    onLoad: function ( texture ) {\n\t\t\t\n\t        this.material.uniforms[ 'tCube' ].value = texture;\n\n\t        Panorama.prototype.onLoad.call( this );\n\n\t    },\n\n\t    /**\n\t     * Dispose\n\t     * @memberOf CubePanorama\n\t     * @instance\n\t     */\n\t    dispose: function () {\t\n\n\t        const { value } = this.material.uniforms.tCube;\n\n\t        this.images.forEach( ( image ) => { THREE.Cache.remove( image ); } );\n\n\t        if ( value instanceof THREE.CubeTexture ) {\n\n\t            value.dispose();\n\n\t        }\n\n\t        Panorama.prototype.dispose.call( this );\n\n\t    }\n\n\t} );\n\n\t/**\n\t * @classdesc Basic panorama with 6 pre-defined grid images\n\t * @constructor\n\t */\n\tfunction BasicPanorama () {\n\n\t    const images = [];\n\n\t    for ( let i = 0; i < 6; i++ ) {\n\n\t        images.push( DataImage.WhiteTile );\n\n\t    }\n\n\t    CubePanorama.call( this, images );\n\n\t}\n\n\tBasicPanorama.prototype = Object.assign( Object.create( CubePanorama.prototype ), {\n\n\t    constructor: BasicPanorama\n\n\t} );\n\n\t/**\n\t * @classdesc Video Panorama\n\t * @constructor\n\t * @param {string} src - Equirectangular video url\n\t * @param {object} [options] - Option for video settings\n\t * @param {HTMLElement} [options.videoElement] - HTML5 video element contains the video\n\t * @param {boolean} [options.loop=true] - Specify if the video should loop in the end\n\t * @param {boolean} [options.muted=true] - Mute the video or not. Need to be true in order to autoplay on some browsers\n\t * @param {boolean} [options.autoplay=false] - Specify if the video should auto play\n\t * @param {boolean} [options.playsinline=true] - Specify if video should play inline for iOS. If you want it to auto play inline, set both autoplay and muted options to true\n\t * @param {string} [options.crossOrigin=\"anonymous\"] - Sets the cross-origin attribute for the video, which allows for cross-origin videos in some browsers (Firefox, Chrome). Set to either \"anonymous\" or \"use-credentials\".\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n\tfunction VideoPanorama ( src, options = {} ) {\n\n\t    const radius = 5000;\n\t    const geometry = new THREE.SphereBufferGeometry( radius, 60, 40 );\n\t    const material = new THREE.MeshBasicMaterial( { opacity: 0, transparent: true } );\n\n\t    Panorama.call( this, geometry, material );\n\n\t    this.src = src;\n\n\t    this.options = {\n\n\t        videoElement: document.createElement( 'video' ),\n\t        loop: true,\n\t        muted: true,\n\t        autoplay: false,\n\t        playsinline: true,\n\t        crossOrigin: 'anonymous'\n\n\t    };\n\n\t    Object.assign( this.options, options );\n\n\t    this.videoElement = this.options.videoElement;\n\t    this.videoProgress = 0;\n\t    this.radius = radius;\n\n\t    this.addEventListener( 'leave', this.pauseVideo.bind( this ) );\n\t    this.addEventListener( 'enter-fade-start', this.resumeVideoProgress.bind( this ) );\n\t    this.addEventListener( 'video-toggle', this.toggleVideo.bind( this ) );\n\t    this.addEventListener( 'video-time', this.setVideoCurrentTime.bind( this ) );\n\n\t}\n\tVideoPanorama.prototype = Object.assign( Object.create( Panorama.prototype ), {\n\n\t    constructor: VideoPanorama,\n\n\t    isMobile: function () {\n\n\t        let check = false;\n\t        (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})( window.navigator.userAgent || window.navigator.vendor || window.opera );\n\t        return check;\n\n\t    },\n\n\t    /**\n\t     * Load video panorama\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     * @fires  Panorama#panolens-viewer-handler\n\t     */\n\t    load: function () {\n\n\t        const { muted, loop, autoplay, playsinline, crossOrigin } = this.options;\n\t        const video = this.videoElement;\n\t        const material = this.material;\n\t        const onProgress = this.onProgress.bind( this );\n\t        const onLoad = this.onLoad.bind( this );\n\n\t        video.loop = loop;\n\t        video.autoplay = autoplay;\n\t        video.playsinline = playsinline;\n\t        video.crossOrigin = crossOrigin;\n\t        video.muted = muted;\n\t\t\t\n\t        if ( playsinline ) {\n\n\t            video.setAttribute( 'playsinline', '' );\n\t            video.setAttribute( 'webkit-playsinline', '' );\n\n\t        } \n\n\t        const onloadeddata = function() {\n\n\t            this.setVideoTexture( video );\n\n\t            if ( autoplay ) {\n\n\t                /**\n\t                 * Viewer handler event\n\t                 * @type {object}\n\t                 * @property {string} method - 'updateVideoPlayButton'\n\t                 * @property {boolean} data - Pause video or not\n\t                 */\n\t                this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t            }\n\n\t            // For mobile silent autoplay\n\t            if ( this.isMobile() ) {\n\n\t                video.pause();\n\n\t                if ( autoplay && muted ) {\n\n\t                    /**\n\t                     * Viewer handler event\n\t                     * @type {object}\n\t                     * @property {string} method - 'updateVideoPlayButton'\n\t                     * @property {boolean} data - Pause video or not\n\t                     */\n\t                    this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t                } else {\n\n\t                    /**\n\t                     * Viewer handler event\n\t                     * @type {object}\n\t                     * @property {string} method - 'updateVideoPlayButton'\n\t                     * @property {boolean} data - Pause video or not\n\t                     */\n\t                    this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t                }\n\t\t\t\t\t\n\t            }\n\n\t            const loaded = () => {\n\n\t                // Fix for threejs r89 delayed update\n\t                material.map.needsUpdate = true;\n\n\t                onProgress( { loaded: 1, total: 1 } );\n\t                onLoad();\n\n\t            };\n\n\t            window.requestAnimationFrame( loaded );\n\t\t\t\t\n\t        };\n\n\t        /**\n\t         * Ready state of the audio/video element\n\t         * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready\n\t         * 1 = HAVE_METADATA - metadata for the audio/video is ready\n\t         * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond\n\t         * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available\n\t         * 4 = HAVE_ENOUGH_DATA - enough data available to start playing\n\t         */\n\t        if ( video.readyState > 2 ) {\n\n\t            onloadeddata.call( this );\n\n\t        } else {\n\n\t            if ( video.querySelectorAll( 'source' ).length === 0 ) {\n\n\t                const source = document.createElement( 'source' );\n\t                source.src = this.src;\n\t                video.appendChild( source );\n\n\t            }\n\n\t            video.load();\n\t        }\n\n\t        video.addEventListener( 'loadeddata', onloadeddata.bind( this ) );\n\t\t\t\n\t        video.addEventListener( 'timeupdate', function () {\n\n\t            this.videoProgress = video.duration >= 0 ? video.currentTime / video.duration : 0;\n\n\t            /**\n\t             * Viewer handler event\n\t             * @type {object}\n\t             * @property {string} method - 'onVideoUpdate'\n\t             * @property {number} data - The percentage of video progress. Range from 0.0 to 1.0\n\t             */\n\t            this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: this.videoProgress } );\n\n\t        }.bind( this ) );\n\n\t        video.addEventListener( 'ended', function () {\n\t\t\t\t\n\t            if ( !loop ) {\n\n\t                this.resetVideo();\n\t                this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t            }\n\n\t        }.bind( this ), false ); \n\n\t    },\n\n\t    /**\n\t     * Set video texture\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     * @param {HTMLVideoElement} video  - The html5 video element\n\t     * @fires Panorama#panolens-viewer-handler\n\t     */\n\t    setVideoTexture: function ( video ) {\n\n\t        if ( !video ) return;\n\n\t        const videoTexture = new THREE.VideoTexture( video );\n\t        videoTexture.minFilter = THREE.LinearFilter;\n\t        videoTexture.magFilter = THREE.LinearFilter;\n\t        videoTexture.format = THREE.RGBFormat;\n\n\t        this.updateTexture( videoTexture );\n\t\t\n\t    },\n\n\t    /**\n\t     * Reset\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     */\n\t    reset: function () {\n\n\t        this.videoElement = undefined;\t\n\n\t        Panorama.prototype.reset.call( this );\n\n\t    },\n\n\t    /**\n\t     * Check if video is paused\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     * @return {boolean} - is video paused or not\n\t     */\n\t    isVideoPaused: function () {\n\n\t        return this.videoElement.paused;\n\n\t    },\n\n\t    /**\n\t     * Toggle video to play or pause\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     */\n\t    toggleVideo: function () {\n\n\t        const video = this.videoElement;\n\n\t        if ( !video ) { return; }\n\n\t        video[ video.paused ? 'play' : 'pause' ]();\n\n\t    },\n\n\t    /**\n\t     * Set video currentTime\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     * @param {object} event - Event contains percentage. Range from 0.0 to 1.0\n\t     */\n\t    setVideoCurrentTime: function ( { percentage } ) {\n\n\t        const video = this.videoElement;\n\n\t        if ( video && !Number.isNaN( percentage ) && percentage !== 1 ) {\n\n\t            video.currentTime = video.duration * percentage;\n\n\t            this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: percentage } );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Play video\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     * @fires VideoPanorama#play\n\t     * @fires VideoPanorama#play-error\n\t     */\n\t    playVideo: function () {\n\n\t        const video = this.videoElement;\n\t        const playVideo = this.playVideo.bind( this );\n\t        const dispatchEvent = this.dispatchEvent.bind( this );\n\t        const onSuccess = () => {\n\n\t            /**\n\t             * Play event\n\t             * @type {object}\n\t             * @event VideoPanorama#play\n\t             *\n\t             */\n\t            dispatchEvent( { type: 'play' } );\n\n\t        };\n\t        const onError = ( error ) => {\n\n\t            // Error playing video. Retry next frame. Possibly Waiting for user interaction\n\t            window.requestAnimationFrame( playVideo );\n\n\t            /**\n\t             * Play event\n\t             * @type {object}\n\t             * @event VideoPanorama#play-error\n\t             *\n\t             */\n\t            dispatchEvent( { type: 'play-error', error } );\n\n\t        };\n\n\t        if ( video && video.paused ) {\n\n\t            video.play().then( onSuccess ).catch( onError );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Pause video\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     * @fires VideoPanorama#pause\n\t     */\n\t    pauseVideo: function () {\n\n\t        const video = this.videoElement;\n\n\t        if ( video && !video.paused ) {\n\n\t            video.pause();\n\n\t        }\n\n\t        /**\n\t         * Pause event\n\t         * @type {object}\n\t         * @event VideoPanorama#pause\n\t         *\n\t         */\n\t        this.dispatchEvent( { type: 'pause' } );\n\n\t    },\n\n\t    /**\n\t     * Resume video\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     */\n\t    resumeVideoProgress: function () {\n\n\t        const video = this.videoElement;\n\n\t        if ( video.readyState >= 4 && video.autoplay && !this.isMobile() ) {\n\n\t            this.playVideo();\n\n\t            /**\n\t             * Viewer handler event\n\t             * @type {object}\n\t             * @property {string} method - 'updateVideoPlayButton'\n\t             * @property {boolean} data - Pause video or not\n\t             */\n\t            this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t        } else {\n\n\t            this.pauseVideo();\n\n\t            /**\n\t             * Viewer handler event\n\t             * @type {object}\n\t             * @property {string} method - 'updateVideoPlayButton'\n\t             * @property {boolean} data - Pause video or not\n\t             */\n\t            this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t        }\n\n\t        this.setVideoCurrentTime( { percentage: this.videoProgress } );\n\n\t    },\n\n\t    /**\n\t     * Reset video at stating point\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     */\n\t    resetVideo: function () {\n\n\t        const video = this.videoElement;\n\n\t        if ( video ) {\n\n\t            this.setVideoCurrentTime( { percentage: 0 } );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Check if video is muted\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     * @return {boolean} - is video muted or not\n\t     */\n\t    isVideoMuted: function () {\n\n\t        return this.videoElement.muted;\n\n\t    },\n\n\t    /**\n\t     * Mute video\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     */\n\t    muteVideo: function () {\n\n\t        const video = this.videoElement;\n\n\t        if ( video && !video.muted ) {\n\n\t            video.muted = true;\n\n\t        }\n\n\t        this.dispatchEvent( { type: 'volumechange' } );\n\n\t    },\n\n\t    /**\n\t     * Unmute video\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     */\n\t    unmuteVideo: function () {\n\n\t        const video = this.videoElement;\n\n\t        if ( video && this.isVideoMuted() ) {\n\n\t            video.muted = false;\n\n\t        }\n\n\t        this.dispatchEvent( { type: 'volumechange' } );\n\n\t    },\n\n\t    /**\n\t     * Returns the video element\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     * @returns {HTMLElement}\n\t     */\n\t    getVideoElement: function () {\n\n\t        return this.videoElement;\n\n\t    },\n\n\t    /**\n\t     * Dispose video panorama\n\t     * @memberOf VideoPanorama\n\t     * @instance\n\t     */\n\t    dispose: function () {\n\n\t        const { material: { map } } = this;\n\n\t        this.pauseVideo();\n\t\t\t\n\t        this.removeEventListener( 'leave', this.pauseVideo.bind( this ) );\n\t        this.removeEventListener( 'enter-fade-start', this.resumeVideoProgress.bind( this ) );\n\t        this.removeEventListener( 'video-toggle', this.toggleVideo.bind( this ) );\n\t        this.removeEventListener( 'video-time', this.setVideoCurrentTime.bind( this ) );\n\n\t        if ( map ) { map.dispose(); }\n\n\t        Panorama.prototype.dispose.call( this );\n\n\t    }\n\n\t} );\n\n\t/**\n\t * @classdesc Google Street View Loader\n\t * @constructor\n\t * @param {object} parameters \n\t */\n\tfunction GoogleStreetviewLoader ( parameters = {} ) {\n\n\t    this._parameters = parameters;\n\t    this._zoom = null;\n\t    this._panoId = null;\n\t    this._panoClient = new google.maps.StreetViewService();\n\t    this._count = 0;\n\t    this._total = 0;\n\t    this._canvas = [];\n\t    this._ctx = [];\n\t    this._wc = 0;\n\t    this._hc = 0;\n\t    this.result = null;\n\t    this.rotation = 0;\n\t    this.copyright = '';\n\t    this.onSizeChange = null;\n\t    this.onPanoramaLoad = null;\n\n\t    this.levelsW = [ 1, 2, 4, 7, 13, 26 ];\n\t    this.levelsH = [ 1, 1, 2, 4, 7, 13 ];\n\n\t    this.widths = [ 416, 832, 1664, 3328, 6656, 13312 ];\n\t    this.heights = [ 416, 416, 832, 1664, 3328, 6656 ];\n\n\t    this.maxW = 6656;\n\t    this.maxH = 6656;\n\n\t    let gl;\n\n\t    try {\n\n\t        const canvas = document.createElement( 'canvas' );\n\n\t        gl = canvas.getContext( 'experimental-webgl' );\n\n\t        if( !gl ) {\n\n\t            gl = canvas.getContext( 'webgl' );\n\n\t        }\n\n\t    }\n\t    catch ( error ) {\n\n\t    }\n\n\t    this.maxW = Math.max( gl.getParameter( gl.MAX_TEXTURE_SIZE ), this.maxW );\n\t    this.maxH = Math.max( gl.getParameter( gl.MAX_TEXTURE_SIZE ), this.maxH );\n\n\t}\n\n\tObject.assign( GoogleStreetviewLoader.prototype, {\n\n\t    constructor: GoogleStreetviewLoader,\n\n\t    /**\n\t     * Set progress\n\t     * @param {number} loaded \n\t     * @param {number} total \n\t     * @memberOf GoogleStreetviewLoader\n\t     * @instance\n\t     */\n\t    setProgress: function ( loaded, total ) {\n\n\t        if ( this.onProgress ) {\n\n\t            this.onProgress( { loaded: loaded, total: total } );\n\n\t        }\n\t\t\t\n\t    },\n\n\t    /**\n\t     * Adapt texture to zoom\n\t     * @memberOf GoogleStreetviewLoader\n\t     * @instance\n\t     */\n\t    adaptTextureToZoom: function () {\n\n\t        const w = this.widths [ this._zoom ];\n\t        const h = this.heights[ this._zoom ];\n\n\t        const maxW = this.maxW;\n\t        const maxH = this.maxH;\n\n\t        this._wc = Math.ceil( w / maxW );\n\t        this._hc = Math.ceil( h / maxH );\n\n\t        for( let y = 0; y < this._hc; y++ ) {\n\t            for( let x = 0; x < this._wc; x++ ) {\n\t                const c = document.createElement( 'canvas' );\n\t                if( x < ( this._wc - 1 ) ) c.width = maxW; else c.width = w - ( maxW * x );\n\t                if( y < ( this._hc - 1 ) ) c.height = maxH; else c.height = h - ( maxH * y );\n\t                this._canvas.push( c );\n\t                this._ctx.push( c.getContext( '2d' ) );\n\t            }\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Compose from tile\n\t     * @param {number} x \n\t     * @param {number} y \n\t     * @param {*} texture \n\t     * @memberOf GoogleStreetviewLoader\n\t     * @instance\n\t     */\n\t    composeFromTile: function ( x, y, texture ) {\n\n\t        const maxW = this.maxW;\n\t        const maxH = this.maxH;\n\n\t        x *= 512;\n\t        y *= 512;\n\n\t        const px = Math.floor( x / maxW );\n\t        const py = Math.floor( y / maxH );\n\n\t        x -= px * maxW;\n\t        y -= py * maxH;\n\n\t        this._ctx[ py * this._wc + px ].drawImage( texture, 0, 0, texture.width, texture.height, x, y, 512, 512 );\n\n\t        this.progress();\n\t\t\t\n\t    },\n\n\t    /**\n\t     * Progress\n\t     * @memberOf GoogleStreetviewLoader\n\t     * @instance\n\t     */\n\t    progress: function() {\n\n\t        this._count++;\n\t\t\t\n\t        this.setProgress( this._count, this._total );\n\t\t\t\n\t        if ( this._count === this._total) {\n\n\t            this.canvas = this._canvas;\n\t            this.panoId = this._panoId;\n\t            this.zoom = this._zoom;\n\n\t            if ( this.onPanoramaLoad ) {\n\n\t                this.onPanoramaLoad( this._canvas[ 0 ] );\n\n\t            }\n\n\t        }\n\t    },\n\n\t    /**\n\t     * Compose panorama\n\t     * @memberOf GoogleStreetviewLoader\n\t     * @instance\n\t     */\n\t    composePanorama: function () {\n\n\t        this.setProgress( 0, 1 );\n\t\t\t\n\t        const w = this.levelsW[ this._zoom ];\n\t        const h = this.levelsH[ this._zoom ];\n\t        const self = this;\n\t\t\t\t\n\t        this._count = 0;\n\t        this._total = w * h;\n\n\t        const { useWebGL } = this._parameters;\n\n\t        for( let y = 0; y < h; y++ ) {\n\t            for( let x = 0; x < w; x++ ) {\n\t                const url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + this._zoom + '&x=' + x + '&y=' + y + '&panoid=' + this._panoId + '&nbt&fover=2';\n\t                ( function( x, y ) { \n\t                    if( useWebGL ) {\n\t                        const texture = TextureLoader.load( url, null, function() {\n\t                            self.composeFromTile( x, y, texture );\n\t                        } );\n\t                    } else {\n\t                        const img = new Image();\n\t                        img.addEventListener( 'load', function() {\n\t                            self.composeFromTile( x, y, this );\t\t\t\n\t                        } );\n\t                        img.crossOrigin = '';\n\t                        img.src = url;\n\t                    }\n\t                } )( x, y );\n\t            }\n\t        }\n\t\t\t\n\t    },\n\n\t    /**\n\t     * Load\n\t     * @param {string} panoid \n\t     * @memberOf GoogleStreetviewLoader\n\t     * @instance\n\t     */\n\t    load: function ( panoid ) {\n\n\t        this.loadPano( panoid );\n\n\t    },\n\n\t    /**\n\t     * Load panorama\n\t     * @param {string} id\n\t     * @memberOf GoogleStreetviewLoader\n\t     * @instance\n\t     */\n\t    loadPano: function( id ) {\n\n\t        const self = this;\n\t        this._panoClient.getPanoramaById( id, function (result, status) {\n\t            if (status === google.maps.StreetViewStatus.OK) {\n\t                self.result = result;\n\t                self.copyright = result.copyright;\n\t                self._panoId = result.location.pano;\n\t                self.composePanorama();\n\t            }\n\t        });\n\t\t\t\n\t    },\n\n\t    /**\n\t     * Set zoom level\n\t     * @param {number} z \n\t     * @memberOf GoogleStreetviewLoader\n\t     * @instance\n\t     */\n\t    setZoom: function( z ) {\n\n\t        this._zoom = z;\n\t        this.adaptTextureToZoom();\n\t    }\n\t\t\n\t} );\n\n\t/**\n\t * @classdesc Google streetview panorama\n\t * @description [How to get Panorama ID]{@link http://stackoverflow.com/questions/29916149/google-maps-streetview-how-to-get-panorama-id}\n\t * @constructor\n\t * @param {string} panoId - Panorama id from Google Streetview \n\t * @param {string} [apiKey] - Google Street View API Key\n\t */\n\tfunction GoogleStreetviewPanorama ( panoId, apiKey ) {\n\n\t    ImagePanorama.call( this );\n\n\t    this.panoId = panoId;\n\n\t    this.gsvLoader = null;\n\n\t    this.loadRequested = false;\n\n\t    this.setupGoogleMapAPI( apiKey );\n\n\t}\n\n\tGoogleStreetviewPanorama.prototype = Object.assign( Object.create( ImagePanorama.prototype ), {\n\n\t    constructor: GoogleStreetviewPanorama,\n\n\t    /**\n\t     * Load Google Street View by panorama id\n\t     * @param {string} panoId - Gogogle Street View panorama id\n\t     * @memberOf GoogleStreetviewPanorama\n\t     * @instance\n\t     */\n\t    load: function ( panoId ) {\n\n\t        this.loadRequested = true;\n\n\t        panoId = ( panoId || this.panoId ) || {};\n\n\t        if ( panoId && this.gsvLoader ) {\n\n\t            this.loadGSVLoader( panoId );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Setup Google Map API\n\t     * @param {string}  apiKey\n\t     * @memberOf GoogleStreetviewPanorama\n\t     * @instance\n\t     */\n\t    setupGoogleMapAPI: function ( apiKey ) {\n\n\t        const script = document.createElement( 'script' );\n\t        script.src = 'https://maps.googleapis.com/maps/api/js?';\n\t        script.src += apiKey ? 'key=' + apiKey : '';\n\t        script.onreadystatechange = this.setGSVLoader.bind( this );\n\t        script.onload = this.setGSVLoader.bind( this );\n\n\t        document.querySelector( 'head' ).appendChild( script );\n\n\t    },\n\n\t    /**\n\t     * Set GSV Loader\n\t     * @memberOf GoogleStreetviewPanorama\n\t     * @instance\n\t     */\n\t    setGSVLoader: function () {\n\n\t        this.gsvLoader = new GoogleStreetviewLoader();\n\n\t        if ( this.loadRequested ) {\n\n\t            this.load();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Get GSV Loader\n\t     * @memberOf GoogleStreetviewPanorama\n\t     * @instance\n\t     * @return {GoogleStreetviewLoader} GSV Loader instance\n\t     */\n\t    getGSVLoader: function () {\n\n\t        return this.gsvLoader;\n\n\t    },\n\n\t    /**\n\t     * Load GSV Loader\n\t     * @param  {string} panoId - Gogogle Street View panorama id\n\t     * @memberOf GoogleStreetviewPanorama\n\t     * @instance\n\t     */\n\t    loadGSVLoader: function ( panoId ) {\n\n\t        this.loadRequested = false;\n\n\t        this.gsvLoader.onProgress = this.onProgress.bind( this );\n\n\t        this.gsvLoader.onPanoramaLoad = this.onLoad.bind( this );\n\n\t        this.gsvLoader.setZoom( this.getZoomLevel() );\n\n\t        this.gsvLoader.load( panoId );\n\n\t        this.gsvLoader.loaded = true;\n\t    },\n\n\t    /**\n\t     * This will be called when panorama is loaded\n\t     * @param  {HTMLCanvasElement} canvas - Canvas where the tiles have been drawn\n\t     * @memberOf GoogleStreetviewPanorama\n\t     * @instance\n\t     */\n\t    onLoad: function ( canvas ) {\n\n\t        ImagePanorama.prototype.onLoad.call( this, new THREE.Texture( canvas ) );\n\n\t    },\n\n\t    /**\n\t     * Reset\n\t     * @memberOf GoogleStreetviewPanorama\n\t     * @instance\n\t     */\n\t    reset: function () {\n\n\t        this.gsvLoader = undefined;\n\n\t        ImagePanorama.prototype.reset.call( this );\n\n\t    }\n\n\t} );\n\n\t/**\n\t * Stereographic projection shader\n\t * based on http://notlion.github.io/streetview-stereographic\n\t * @author pchen66\n\t */\n\n\t/**\n\t * @description Stereograhpic Shader\n\t * @module StereographicShader\n\t * @property {object} uniforms\n\t * @property {THREE.Texture} uniforms.tDiffuse diffuse map\n\t * @property {number} uniforms.resolution image resolution\n\t * @property {THREE.Matrix4} uniforms.transform transformation matrix\n\t * @property {number} uniforms.zoom image zoom factor\n\t * @property {number} uniforms.opacity image opacity\n\t * @property {string} vertexShader vertex shader\n\t * @property {string} fragmentShader fragment shader\n\t */\n\tconst StereographicShader = {\n\n\t    uniforms: {\n\n\t        'tDiffuse': { value: new THREE.Texture() },\n\t        'resolution': { value: 1.0 },\n\t        'transform': { value: new THREE.Matrix4() },\n\t        'zoom': { value: 1.0 },\n\t        'opacity': { value: 1.0 }\n\n\t    },\n\n\t    vertexShader: [\n\n\t        'varying vec2 vUv;',\n\n\t        'void main() {',\n\n\t        'vUv = uv;',\n\t        'gl_Position = vec4( position, 1.0 );',\n\n\t        '}' \n\n\t    ].join( '\\n' ),\n\n\t    fragmentShader: [\n\n\t        'uniform sampler2D tDiffuse;',\n\t        'uniform float resolution;',\n\t        'uniform mat4 transform;',\n\t        'uniform float zoom;',\n\t        'uniform float opacity;',\n\n\t        'varying vec2 vUv;',\n\n\t        'const float PI = 3.141592653589793;',\n\n\t        'void main(){',\n\n\t        'vec2 position = -1.0 +  2.0 * vUv;',\n\n\t        'position *= vec2( zoom * resolution, zoom * 0.5 );',\n\n\t        'float x2y2 = position.x * position.x + position.y * position.y;',\n\t        'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );',\n\n\t        'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );',\n\n\t        'vec2 sampleUV = vec2(',\n\t        '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,',\n\t        '(asin(sphere_pnt.z) / PI + 0.5)',\n\t        ');',\n\n\t        'gl_FragColor = texture2D( tDiffuse, sampleUV );',\n\n\t        'gl_FragColor.a *= opacity;',\n\n\t        '}'\n\n\t    ].join( '\\n' )\n\n\t};\n\n\t/**\n\t * @classdesc Little Planet\n\t * @constructor\n\t * @param {string} type \t\t- Type of little planet basic class\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n\tfunction LittlePlanet ( type = 'image', source, size = 10000, ratio = 0.5 ) {\n\n\t    if ( type === 'image' ) {\n\n\t        ImagePanorama.call( this, source, this.createGeometry( size, ratio ), this.createMaterial( size ) );\n\n\t    }\n\n\t    this.size = size;\n\t    this.ratio = ratio;\n\t    this.EPS = 0.000001;\n\t    this.frameId = null;\n\n\t    this.dragging = false;\n\t    this.userMouse = new THREE.Vector2();\n\n\t    this.quatA = new THREE.Quaternion();\n\t    this.quatB = new THREE.Quaternion();\n\t    this.quatCur = new THREE.Quaternion();\n\t    this.quatSlerp = new THREE.Quaternion();\n\n\t    this.vectorX = new THREE.Vector3( 1, 0, 0 );\n\t    this.vectorY = new THREE.Vector3( 0, 1, 0 );\n\n\t    this.addEventListener( 'window-resize', this.onWindowResize );\n\n\t}\n\n\tLittlePlanet.prototype = Object.assign( Object.create( ImagePanorama.prototype ), {\n\n\t    constructor: LittlePlanet,\n\n\t    add: function ( object ) {\n\n\t        if ( arguments.length > 1 ) {\n\t\t\t\t\n\t            for ( let i = 0; i < arguments.length; i ++ ) {\n\n\t                this.add( arguments[ i ] );\n\n\t            }\n\n\t            return this;\n\n\t        }\n\n\t        if ( object instanceof Infospot ) {\n\n\t            object.material.depthTest = false;\n\t\t\t\t\n\t        }\n\n\t        ImagePanorama.prototype.add.call( this, object );\n\n\t    },\n\n\t    createGeometry: function ( size, ratio ) {\n\n\t        return new THREE.PlaneBufferGeometry( size, size * ratio );\n\n\t    },\n\n\t    createMaterial: function ( size ) {\n\n\t        const shader = Object.assign( {}, StereographicShader ), uniforms = shader.uniforms;\n\n\t        uniforms.zoom.value = size;\n\t        uniforms.opacity.value = 0.0;\n\n\t        return new THREE.ShaderMaterial( {\n\n\t            uniforms: uniforms,\n\t            vertexShader: shader.vertexShader,\n\t            fragmentShader: shader.fragmentShader,\n\t            side: THREE.BackSide,\n\t            transparent: true\n\n\t        } );\n\t\t\t\n\t    },\n\n\t    registerMouseEvents: function () {\n\n\t        this.container.addEventListener( 'mousedown', this.onMouseDown.bind( this ), { passive: true } );\n\t        this.container.addEventListener( 'mousemove', this.onMouseMove.bind( this ), { passive: true } );\n\t        this.container.addEventListener( 'mouseup', this.onMouseUp.bind( this ), { passive: true } );\n\t        this.container.addEventListener( 'touchstart', this.onMouseDown.bind( this ), { passive: true } );\n\t        this.container.addEventListener( 'touchmove', this.onMouseMove.bind( this ), { passive: true } );\n\t        this.container.addEventListener( 'touchend', this.onMouseUp.bind( this ), { passive: true } );\n\t        this.container.addEventListener( 'mousewheel', this.onMouseWheel.bind( this ), { passive: false } );\n\t        this.container.addEventListener( 'DOMMouseScroll', this.onMouseWheel.bind( this ), { passive: false } );\n\t        this.container.addEventListener( 'contextmenu', this.onContextMenu.bind( this ), { passive: true } );\n\t\t\t\n\t    },\n\n\t    unregisterMouseEvents: function () {\n\n\t        this.container.removeEventListener( 'mousedown', this.onMouseDown.bind( this ), false );\n\t        this.container.removeEventListener( 'mousemove', this.onMouseMove.bind( this ), false );\n\t        this.container.removeEventListener( 'mouseup', this.onMouseUp.bind( this ), false );\n\t        this.container.removeEventListener( 'touchstart', this.onMouseDown.bind( this ), false );\n\t        this.container.removeEventListener( 'touchmove', this.onMouseMove.bind( this ), false );\n\t        this.container.removeEventListener( 'touchend', this.onMouseUp.bind( this ), false );\n\t        this.container.removeEventListener( 'mousewheel', this.onMouseWheel.bind( this ), false );\n\t        this.container.removeEventListener( 'DOMMouseScroll', this.onMouseWheel.bind( this ), false );\n\t        this.container.removeEventListener( 'contextmenu', this.onContextMenu.bind( this ), false );\n\t\t\t\n\t    },\n\n\t    onMouseDown: function ( event ) {\n\n\t        const inputCount = ( event.touches && event.touches.length ) || 1 ;\n\n\t        switch ( inputCount ) {\n\n\t        case 1:\n\n\t            const x = ( event.clientX >= 0 ) ? event.clientX : event.touches[ 0 ].clientX;\n\t            const y = ( event.clientY >= 0 ) ? event.clientY : event.touches[ 0 ].clientY;\n\n\t            this.dragging = true;\n\t            this.userMouse.set( x, y );\n\n\t            break;\n\n\t        case 2:\n\n\t            const dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t            const dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t            const distance = Math.sqrt( dx * dx + dy * dy );\n\t            this.userMouse.pinchDistance = distance;\n\n\t            break;\n\n\t        default:\n\n\t            break;\n\n\t        }\n\n\t        this.onUpdateCallback();\n\n\t    },\n\n\t    onMouseMove: function ( event ) {\n\n\t        const inputCount = ( event.touches && event.touches.length ) || 1 ;\n\n\t        switch ( inputCount ) {\n\n\t        case 1:\n\n\t            const x = ( event.clientX >= 0 ) ? event.clientX : event.touches[ 0 ].clientX;\n\t            const y = ( event.clientY >= 0 ) ? event.clientY : event.touches[ 0 ].clientY;\n\n\t            const angleX = THREE.Math.degToRad( x - this.userMouse.x ) * 0.4;\n\t            const angleY = THREE.Math.degToRad( y - this.userMouse.y ) * 0.4;\n\n\t            if ( this.dragging ) {\n\t                this.quatA.setFromAxisAngle( this.vectorY, angleX );\n\t                this.quatB.setFromAxisAngle( this.vectorX, angleY );\n\t                this.quatCur.multiply( this.quatA ).multiply( this.quatB );\n\t                this.userMouse.set( x, y );\n\t            }\n\n\t            break;\n\n\t        case 2:\n\n\t            const dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t            const dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t            const distance = Math.sqrt( dx * dx + dy * dy );\n\n\t            this.addZoomDelta( this.userMouse.pinchDistance - distance );\n\n\t            break;\n\n\t        default:\n\n\t            break;\n\n\t        }\n\n\t    },\n\n\t    onMouseUp: function () {\n\n\t        this.dragging = false;\n\n\t    },\n\n\t    onMouseWheel: function ( event ) {\n\n\t        event.preventDefault();\n\t        event.stopPropagation();\n\n\t        let delta = 10;\n\n\t        if ( event.wheelDelta !== undefined ) { // WebKit / Opera / Explorer 9\n\n\t            delta += event.wheelDelta;\n\n\t        } else if ( event.detail !== undefined ) { // Firefox\n\n\t            delta += - event.detail;\n\n\t        }\n\n\t        this.addZoomDelta( delta );\n\t        this.onUpdateCallback();\n\n\t    },\n\n\t    addZoomDelta: function ( delta ) {\n\n\t        const uniforms = this.material.uniforms;\n\t        const lowerBound = this.size * 0.1;\n\t        const upperBound = this.size * 10;\n\n\t        uniforms.zoom.value += delta;\n\n\t        if ( uniforms.zoom.value <= lowerBound ) {\n\n\t            uniforms.zoom.value = lowerBound;\n\n\t        } else if ( uniforms.zoom.value >= upperBound ) {\n\n\t            uniforms.zoom.value = upperBound;\n\n\t        }\n\n\t    },\n\n\t    onUpdateCallback: function () {\n\n\t        this.frameId = window.requestAnimationFrame( this.onUpdateCallback.bind( this ) );\n\n\t        this.quatSlerp.slerp( this.quatCur, 0.1 );\n\n\t        if ( this.material ) {\n\n\t            this.material.uniforms.transform.value.makeRotationFromQuaternion( this.quatSlerp );\n\n\t        }\n\t        \n\t        if ( !this.dragging && 1.0 - this.quatSlerp.clone().dot( this.quatCur ) < this.EPS ) {\n\t\t\t\t\n\t            window.cancelAnimationFrame( this.frameId );\n\n\t        }\n\n\t    },\n\n\t    reset: function () {\n\n\t        this.quatCur.set( 0, 0, 0, 1 );\n\t        this.quatSlerp.set( 0, 0, 0, 1 );\n\t        this.onUpdateCallback();\n\n\t    },\n\n\t    onLoad: function ( texture ) {\n\n\t        this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n\t        this.registerMouseEvents();\n\t        this.onUpdateCallback();\n\t\t\t\n\t        this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'disableControl' } );\n\n\t        ImagePanorama.prototype.onLoad.call( this, texture );\n\t\t\t\n\t    },\n\n\t    onLeave: function () {\n\n\t        this.unregisterMouseEvents();\n\n\t        this.dispatchEvent( { type: 'panolens-viewer-handler', method: 'enableControl', data: CONTROLS.ORBIT } );\n\n\t        window.cancelAnimationFrame( this.frameId );\n\n\t        ImagePanorama.prototype.onLeave.call( this );\n\t\t\t\n\t    },\n\n\t    onWindowResize: function () {\n\n\t        this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n\t    },\n\n\t    onContextMenu: function () {\n\n\t        this.dragging = false;\n\n\t    },\n\n\t    dispose: function () {\t\n\n\t        this.unregisterMouseEvents();\n\n\t        ImagePanorama.prototype.dispose.call( this );\n\n\t    }\n\n\t});\n\n\t/**\n\t * @classdesc Image Little Planet\n\t * @constructor\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n\tfunction ImageLittlePlanet ( source, size, ratio ) {\n\n\t    LittlePlanet.call( this, 'image', source, size, ratio );\n\n\t}\n\n\tImageLittlePlanet.prototype = Object.assign( Object.create( LittlePlanet.prototype ), {\n\n\t    constructor: ImageLittlePlanet,\n\n\t    /**\n\t     * On loaded with texture\n\t     * @param {THREE.Texture} texture\n\t     * @memberOf ImageLittlePlanet\n\t     * @instance\n\t     */\n\t    onLoad: function ( texture ) {\n\n\t        this.updateTexture( texture );\n\n\t        LittlePlanet.prototype.onLoad.call( this, texture );\n\n\t    },\n\t    \n\t    /**\n\t     * Update texture\n\t     * @param {THREE.Texture} texture \n\t     * @memberOf ImageLittlePlanet\n\t     * @instance\n\t     */\n\t    updateTexture: function ( texture ) {\n\n\t        texture.minFilter = texture.magFilter = THREE.LinearFilter;\n\t\t\t\n\t        this.material.uniforms[ 'tDiffuse' ].value = texture;\n\n\t    },\n\n\t    /**\n\t     * Dispose\n\t     * @memberOf ImageLittlePlanet\n\t     * @instance\n\t     */\n\t    dispose: function () {\n\n\t        const tDiffuse = this.material.uniforms[ 'tDiffuse' ];\n\n\t        if ( tDiffuse && tDiffuse.value ) {\n\n\t            tDiffuse.value.dispose();\n\n\t        }\n\n\t        LittlePlanet.prototype.dispose.call( this );\n\n\t    }\n\n\t} );\n\n\t/**\n\t * @classdesc Camera panorama\n\t * @description See {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints|MediaStreamConstraints} for constraints\n\t * @param {object} - camera constraints\n\t * @constructor\n\t */\n\tfunction CameraPanorama ( constraints ) {\n\n\t    const radius = 5000;\n\t    const geometry = new THREE.SphereBufferGeometry( radius, 60, 40 );\n\t    const material = new THREE.MeshBasicMaterial( { visible: false });\n\n\t    Panorama.call( this, geometry, material );\n\n\t    this.media = new Media( constraints );\n\t    this.radius = radius;\n\n\t    this.addEventListener( 'enter', this.start.bind( this ) );\n\t    this.addEventListener( 'leave', this.stop.bind( this ) );\n\t    this.addEventListener( 'panolens-container', this.onPanolensContainer.bind( this ) );\n\t    this.addEventListener( 'panolens-scene', this.onPanolensScene.bind( this ) );\n\n\t}\n\n\tCameraPanorama.prototype = Object.assign( Object.create( Panorama.prototype ), {\n\n\t    constructor: CameraPanorama,\n\n\t    /**\n\t     * On container event\n\t     * @param {object} event\n\t     * @memberOf CameraPanorama\n\t     * @instance\n\t     */\n\t    onPanolensContainer: function ( { container } ) {\n\n\t        this.media.setContainer( container );\n\n\t    },\n\n\t    /**\n\t     * On scene event\n\t     * @param {object} event \n\t     * @memberOf CameraPanorama\n\t     * @instance\n\t     */\n\t    onPanolensScene: function ( { scene } ) {\n\n\t        this.media.setScene( scene );\n\n\t    },\n\n\t    /**\n\t     * Start camera streaming\n\t     * @memberOf CameraPanorama\n\t     * @instance\n\t     * @returns {Promise}\n\t     */\n\t    start: function () {\n\n\t        return this.media.start();\n\n\t    },\n\n\t    /**\n\t     * Stop camera streaming\n\t     * @memberOf CameraPanorama\n\t     * @instance\n\t     */\n\t    stop: function () {\n\n\t        this.media.stop();\n\n\t    },\n\n\t} );\n\n\t/**\n\t * @classdesc Orbit Controls\n\t * @constructor\n\t * @external OrbitControls\n\t * @param {THREE.Object} object \n\t * @param {HTMLElement} domElement \n\t */\n\tfunction OrbitControls ( object, domElement ) {\n\n\t    this.object = object;\n\t    this.domElement = ( domElement !== undefined ) ? domElement : document;\n\t    this.frameId = null;\n\n\t    // API\n\n\t    // Set to false to disable this control\n\t    this.enabled = true;\n\n\t    /*\n\t     * \"target\" sets the location of focus, where the control orbits around\n\t     * and where it pans with respect to.\n\t     */\n\t    this.target = new THREE.Vector3();\n\n\t    // center is old, deprecated; use \"target\" instead\n\t    this.center = this.target;\n\n\t    /*\n\t     * This option actually enables dollying in and out; left as \"zoom\" for\n\t     * backwards compatibility\n\t     */\n\t    this.noZoom = false;\n\t    this.zoomSpeed = 1.0;\n\n\t    // Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\t    this.minDistance = 0;\n\t    this.maxDistance = Infinity;\n\n\t    // Limits to how far you can zoom in and out ( OrthographicCamera only )\n\t    this.minZoom = 0;\n\t    this.maxZoom = Infinity;\n\n\t    // Set to true to disable this control\n\t    this.noRotate = false;\n\t    this.rotateSpeed = -0.15;\n\n\t    // Set to true to disable this control\n\t    this.noPan = true;\n\t    this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t    // Set to true to automatically rotate around the target\n\t    this.autoRotate = false;\n\t    this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t    /*\n\t     * How far you can orbit vertically, upper and lower limits.\n\t     * Range is 0 to Math.PI radians.\n\t     */\n\t    this.minPolarAngle = 0; // radians\n\t    this.maxPolarAngle = Math.PI; // radians\n\n\t    // Momentum\n\t  \tthis.momentumDampingFactor = 0.90;\n\t  \tthis.momentumScalingFactor = -0.005;\n\t  \tthis.momentumKeydownFactor = 20;\n\n\t  \t// Fov\n\t  \tthis.minFov = 35;\n\t  \tthis.maxFov = 90;\n\n\t    /*\n\t     * How far you can orbit horizontally, upper and lower limits.\n\t     * If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t     */\n\t    this.minAzimuthAngle = - Infinity; // radians\n\t    this.maxAzimuthAngle = Infinity; // radians\n\n\t    // Set to true to disable use of the keys\n\t    this.noKeys = false;\n\n\t    // The four arrow keys\n\t    this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t    // Mouse buttons\n\t    this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t    /*\n\t     * //////////\n\t     * internals\n\t     */\n\n\t    var scope = this;\n\n\t    var EPS = 10e-8;\n\t    var MEPS = 10e-5;\n\n\t    var rotateStart = new THREE.Vector2();\n\t    var rotateEnd = new THREE.Vector2();\n\t    var rotateDelta = new THREE.Vector2();\n\n\t    var panStart = new THREE.Vector2();\n\t    var panEnd = new THREE.Vector2();\n\t    var panDelta = new THREE.Vector2();\n\t    var panOffset = new THREE.Vector3();\n\n\t    var offset = new THREE.Vector3();\n\n\t    var dollyStart = new THREE.Vector2();\n\t    var dollyEnd = new THREE.Vector2();\n\t    var dollyDelta = new THREE.Vector2();\n\n\t    var theta = 0;\n\t    var phi = 0;\n\t    var phiDelta = 0;\n\t    var thetaDelta = 0;\n\t    var scale = 1;\n\t    var pan = new THREE.Vector3();\n\n\t    var lastPosition = new THREE.Vector3();\n\t    var lastQuaternion = new THREE.Quaternion();\n\n\t    var momentumLeft = 0, momentumUp = 0;\n\t    var eventPrevious;\n\t    var momentumOn = false;\n\n\t    var keyUp, keyBottom, keyLeft, keyRight;\n\n\t    var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\t    var state = STATE.NONE;\n\n\t    // for reset\n\n\t    this.target0 = this.target.clone();\n\t    this.position0 = this.object.position.clone();\n\t    this.zoom0 = this.object.zoom;\n\n\t    // so camera.up is the orbit axis\n\n\t    var quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t    var quatInverse = quat.clone().inverse();\n\n\t    // events\n\n\t    var changeEvent = { type: 'change' };\n\t    var startEvent = { type: 'start' };\n\t    var endEvent = { type: 'end' };\n\n\t    this.setLastQuaternion = function ( quaternion ) {\n\t        lastQuaternion.copy( quaternion );\n\t        scope.object.quaternion.copy( quaternion );\n\t    };\n\n\t    this.getLastPosition = function () {\n\t        return lastPosition;\n\t    };\n\n\t    this.rotateLeft = function ( angle ) {\n\n\t        if ( angle === undefined ) {\n\n\t            angle = getAutoRotationAngle();\n\n\t        }\n\n\t        thetaDelta -= angle;\n\n\n\t    };\n\n\t    this.rotateUp = function ( angle ) {\n\n\t        if ( angle === undefined ) {\n\n\t            angle = getAutoRotationAngle();\n\n\t        }\n\n\t        phiDelta -= angle;\n\n\t    };\n\n\t    // pass in distance in world space to move left\n\t    this.panLeft = function ( distance ) {\n\n\t        var te = this.object.matrix.elements;\n\n\t        // get X column of matrix\n\t        panOffset.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t        panOffset.multiplyScalar( - distance );\n\n\t        pan.add( panOffset );\n\n\t    };\n\n\t    // pass in distance in world space to move up\n\t    this.panUp = function ( distance ) {\n\n\t        var te = this.object.matrix.elements;\n\n\t        // get Y column of matrix\n\t        panOffset.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t        panOffset.multiplyScalar( distance );\n\n\t        pan.add( panOffset );\n\n\t    };\n\n\t    /*\n\t     * pass in x,y of change desired in pixel space,\n\t     * right and down are positive\n\t     */\n\t    this.pan = function ( deltaX, deltaY ) {\n\n\t        var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t        if ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t            // perspective\n\t            var position = scope.object.position;\n\t            var offset = position.clone().sub( scope.target );\n\t            var targetDistance = offset.length();\n\n\t            // half of the fov is center to top of screen\n\t            targetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t            // we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t            scope.panLeft( 2 * deltaX * targetDistance / element.clientHeight );\n\t            scope.panUp( 2 * deltaY * targetDistance / element.clientHeight );\n\n\t        } else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t            // orthographic\n\t            scope.panLeft( deltaX * (scope.object.right - scope.object.left) / element.clientWidth );\n\t            scope.panUp( deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight );\n\n\t        } else {\n\n\t            // camera neither orthographic or perspective\n\t            console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\n\t        }\n\n\t    };\n\n\t    this.momentum = function(){\n\t\t\t\n\t        if ( !momentumOn ) return;\n\n\t        if ( Math.abs( momentumLeft ) < MEPS && Math.abs( momentumUp ) < MEPS ) { \n\n\t            momentumOn = false; \n\t            return;\n\t        }\n\n\t        momentumUp   *= this.momentumDampingFactor;\n\t        momentumLeft *= this.momentumDampingFactor;\n\n\t        thetaDelta -= this.momentumScalingFactor * momentumLeft;\n\t        phiDelta   -= this.momentumScalingFactor * momentumUp;\n\n\t    };\n\n\t    this.dollyIn = function ( dollyScale ) {\n\n\t        if ( dollyScale === undefined ) {\n\n\t            dollyScale = getZoomScale();\n\n\t        }\n\n\t        if ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t            scale /= dollyScale;\n\n\t        } else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t            scope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t            scope.object.updateProjectionMatrix();\n\t            scope.dispatchEvent( changeEvent );\n\n\t        } else {\n\n\t            console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t        }\n\n\t    };\n\n\t    this.dollyOut = function ( dollyScale ) {\n\n\t        if ( dollyScale === undefined ) {\n\n\t            dollyScale = getZoomScale();\n\n\t        }\n\n\t        if ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t            scale *= dollyScale;\n\n\t        } else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t            scope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t            scope.object.updateProjectionMatrix();\n\t            scope.dispatchEvent( changeEvent );\n\n\t        } else {\n\n\t            console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t        }\n\n\t    };\n\n\t    this.update = function ( ignoreUpdate ) {\n\n\t        var position = this.object.position;\n\n\t        offset.copy( position ).sub( this.target );\n\n\t        // rotate offset to \"y-axis-is-up\" space\n\t        offset.applyQuaternion( quat );\n\n\t        // angle from z-axis around y-axis\n\n\t        theta = Math.atan2( offset.x, offset.z );\n\n\t        // angle from y-axis\n\n\t        phi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\n\t        if ( this.autoRotate && state === STATE.NONE ) {\n\n\t            this.rotateLeft( getAutoRotationAngle() );\n\n\t        }\n\n\t        this.momentum();\n\n\t        theta += thetaDelta;\n\t        phi += phiDelta;\n\n\t        // restrict theta to be between desired limits\n\t        theta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\n\t        // restrict phi to be between desired limits\n\t        phi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\n\t        // restrict phi to be betwee EPS and PI-EPS\n\t        phi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\n\t        var radius = offset.length() * scale;\n\n\t        // restrict radius to be between desired limits\n\t        radius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\n\t        // move target to panned location\n\t        this.target.add( pan );\n\n\t        offset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t        offset.y = radius * Math.cos( phi );\n\t        offset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\n\t        // rotate offset back to \"camera-up-vector-is-up\" space\n\t        offset.applyQuaternion( quatInverse );\n\n\t        position.copy( this.target ).add( offset );\n\n\t        this.object.lookAt( this.target );\n\n\t        thetaDelta = 0;\n\t        phiDelta = 0;\n\t        scale = 1;\n\t        pan.set( 0, 0, 0 );\n\n\t        /*\n\t         * update condition is:\n\t         * min(camera displacement, camera rotation in radians)^2 > EPS\n\t         * using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\t         */\n\t        if ( lastPosition.distanceToSquared( this.object.position ) > EPS\n\t\t\t    || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS ) {\n\n\t            if ( ignoreUpdate !== true ) { this.dispatchEvent( changeEvent ); }\n\n\t            lastPosition.copy( this.object.position );\n\t            lastQuaternion.copy (this.object.quaternion );\n\n\t        }\n\n\t    };\n\n\n\t    this.reset = function () {\n\n\t        state = STATE.NONE;\n\n\t        this.target.copy( this.target0 );\n\t        this.object.position.copy( this.position0 );\n\t        this.object.zoom = this.zoom0;\n\n\t        this.object.updateProjectionMatrix();\n\t        this.dispatchEvent( changeEvent );\n\n\t        this.update();\n\n\t    };\n\n\t    this.getPolarAngle = function () {\n\n\t        return phi;\n\n\t    };\n\n\t    this.getAzimuthalAngle = function () {\n\n\t        return theta;\n\n\t    };\n\n\t    function getAutoRotationAngle() {\n\n\t        return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t    }\n\n\t    function getZoomScale() {\n\n\t        return Math.pow( 0.95, scope.zoomSpeed );\n\n\t    }\n\n\t    function onMouseDown( event ) {\n\n\t        momentumOn = false;\n\n\t   \t\tmomentumLeft = momentumUp = 0;\n\n\t        if ( scope.enabled === false ) return;\n\t        event.preventDefault();\n\n\t        if ( event.button === scope.mouseButtons.ORBIT ) {\n\t            if ( scope.noRotate === true ) return;\n\n\t            state = STATE.ROTATE;\n\n\t            rotateStart.set( event.clientX, event.clientY );\n\n\t        } else if ( event.button === scope.mouseButtons.ZOOM ) {\n\t            if ( scope.noZoom === true ) return;\n\n\t            state = STATE.DOLLY;\n\n\t            dollyStart.set( event.clientX, event.clientY );\n\n\t        } else if ( event.button === scope.mouseButtons.PAN ) {\n\t            if ( scope.noPan === true ) return;\n\n\t            state = STATE.PAN;\n\n\t            panStart.set( event.clientX, event.clientY );\n\n\t        }\n\n\t        if ( state !== STATE.NONE ) {\n\t            document.addEventListener( 'mousemove', onMouseMove, false );\n\t            document.addEventListener( 'mouseup', onMouseUp, false );\n\t            scope.dispatchEvent( startEvent );\n\t        }\n\n\t        scope.update();\n\n\t    }\n\n\t    function onMouseMove( event ) {\n\n\t        if ( scope.enabled === false ) return;\n\n\t        event.preventDefault();\n\n\t        var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t        if ( state === STATE.ROTATE ) {\n\n\t            if ( scope.noRotate === true ) return;\n\n\t            rotateEnd.set( event.clientX, event.clientY );\n\t            rotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t            // rotating across whole screen goes 360 degrees around\n\t            scope.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t            // rotating up and down along whole screen attempts to go 360, but limited to 180\n\t            scope.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t            rotateStart.copy( rotateEnd );\n\n\t            if( eventPrevious ){\n\t                momentumLeft = event.clientX - eventPrevious.clientX;\n\t                momentumUp = event.clientY - eventPrevious.clientY;\n\t            }\n\n\t            eventPrevious = event;\n\n\t        } else if ( state === STATE.DOLLY ) {\n\n\t            if ( scope.noZoom === true ) return;\n\n\t            dollyEnd.set( event.clientX, event.clientY );\n\t            dollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t            if ( dollyDelta.y > 0 ) {\n\n\t                scope.dollyIn();\n\n\t            } else if ( dollyDelta.y < 0 ) {\n\n\t                scope.dollyOut();\n\n\t            }\n\n\t            dollyStart.copy( dollyEnd );\n\n\t        } else if ( state === STATE.PAN ) {\n\n\t            if ( scope.noPan === true ) return;\n\n\t            panEnd.set( event.clientX, event.clientY );\n\t            panDelta.subVectors( panEnd, panStart );\n\n\t            scope.pan( panDelta.x, panDelta.y );\n\n\t            panStart.copy( panEnd );\n\n\t        }\n\n\t        if ( state !== STATE.NONE ) scope.update();\n\n\t    }\n\n\t    function onMouseUp( /* event */ ) {\n\n\t        momentumOn = true;\n\n\t        eventPrevious = undefined;\n\n\t        if ( scope.enabled === false ) return;\n\n\t        document.removeEventListener( 'mousemove', onMouseMove, false );\n\t        document.removeEventListener( 'mouseup', onMouseUp, false );\n\t        scope.dispatchEvent( endEvent );\n\t        state = STATE.NONE;\n\n\t    }\n\n\t    function onMouseWheel( event ) {\n\n\t        if ( scope.enabled === false || scope.noZoom === true || state !== STATE.NONE ) return;\n\n\t        event.preventDefault();\n\t        event.stopPropagation();\n\n\t        let delta = 0;\n\n\t        if ( event.wheelDelta !== undefined ) { // WebKit / Opera / Explorer 9\n\t            delta = event.wheelDelta;\n\n\t        } else if ( event.detail !== undefined ) { // Firefox\n\n\t            delta = - event.detail;\n\n\t        }\n\n\t        if (delta < 0) {\n                scope.object.fov = (scope.object.fov + 2 < scope.maxFov) ? scope.object.fov + 2 : scope.maxFov;\n                scope.object.updateProjectionMatrix();\n            }  else if (delta > 0) {\n                scope.object.fov = (scope.object.fov - 2 > scope.minFov) ? scope.object.fov - 2 : scope.minFov;\n                scope.object.updateProjectionMatrix();\n            }\n\n\t        scope.update();\n\t        scope.dispatchEvent( changeEvent );\n\t        scope.dispatchEvent( startEvent );\n\t        scope.dispatchEvent( endEvent );\n\n\t    }\n\n\t    function onKeyUp ( event ) {\n\n\t        switch ( event.keyCode ) {\n\n\t        case scope.keys.UP:\n\t            keyUp = false;\n\t            break;\n\n\t        case scope.keys.BOTTOM:\n\t            keyBottom = false;\n\t            break;\n\n\t        case scope.keys.LEFT:\n\t            keyLeft = false;\n\t            break;\n\n\t        case scope.keys.RIGHT:\n\t            keyRight = false;\n\t            break;\n\n\t        }\n\n\t    }\n\n\t    function onKeyDown( event ) {\n\n\t        if ( scope.enabled === false || scope.noKeys === true || scope.noRotate === true ) return;\n\n\t        switch ( event.keyCode ) {\n\n\t        case scope.keys.UP:\n\t            keyUp = true;\n\t            break;\n\n\t        case scope.keys.BOTTOM:\n\t            keyBottom = true;\n\t            break;\n\n\t        case scope.keys.LEFT:\n\t            keyLeft = true;\n\t            break;\n\n\t        case scope.keys.RIGHT:\n\t            keyRight = true;\n\t            break;\n\n\t        }\n\n\t        if (keyUp || keyBottom || keyLeft || keyRight) {\n\n\t            momentumOn = true;\n\n\t            if (keyUp) momentumUp = - scope.rotateSpeed * scope.momentumKeydownFactor;\n\t            if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n\t            if (keyLeft) momentumLeft = - scope.rotateSpeed * scope.momentumKeydownFactor;\n\t            if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n\n\t        }\n\n\t    }\n\n\t    function touchstart( event ) {\n\n\t        momentumOn = false;\n\n\t        momentumLeft = momentumUp = 0;\n\n\t        if ( scope.enabled === false ) return;\n\n\t        switch ( event.touches.length ) {\n\n\t        case 1:\t// one-fingered touch: rotate\n\n\t            if ( scope.noRotate === true ) return;\n\n\t            state = STATE.TOUCH_ROTATE;\n\n\t            rotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t            break;\n\n\t        case 2:\t// two-fingered touch: dolly\n\n\t            if ( scope.noZoom === true ) return;\n\n\t            state = STATE.TOUCH_DOLLY;\n\n\t            var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t            var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t            var distance = Math.sqrt( dx * dx + dy * dy );\n\n\t            dollyStart.set( 0, distance );\n\n\t            break;\n\n\t        case 3: // three-fingered touch: pan\n\n\t            if ( scope.noPan === true ) return;\n\n\t            state = STATE.TOUCH_PAN;\n\n\t            panStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t            break;\n\n\t        default:\n\n\t            state = STATE.NONE;\n\n\t        }\n\n\t        if ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\n\t    }\n\n\t    function touchmove( event ) {\n\n\t        if ( scope.enabled === false ) return;\n\n\t        event.preventDefault();\n\t        event.stopPropagation();\n\n\t        var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t        switch ( event.touches.length ) {\n\n\t        case 1: // one-fingered touch: rotate\n\n\t            if ( scope.noRotate === true ) return;\n\t            if ( state !== STATE.TOUCH_ROTATE ) return;\n\n\t            rotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t            rotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t            // rotating across whole screen goes 360 degrees around\n\t            scope.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t            // rotating up and down along whole screen attempts to go 360, but limited to 180\n\t            scope.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t            rotateStart.copy( rotateEnd );\n\n\t            if( eventPrevious ){\n\t                momentumLeft = event.touches[ 0 ].pageX - eventPrevious.pageX;\n\t                momentumUp = event.touches[ 0 ].pageY - eventPrevious.pageY;\n\t            }\n\n\t            eventPrevious = {\n\t                pageX: event.touches[ 0 ].pageX,\n\t                pageY: event.touches[ 0 ].pageY,\n\t            };\n\n\t            scope.update();\n\t            break;\n\n\t        case 2: // two-fingered touch: dolly\n\n\t            if ( scope.noZoom === true ) return;\n\t            if ( state !== STATE.TOUCH_DOLLY ) return;\n\n\t            var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t            var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t            var distance = Math.sqrt( dx * dx + dy * dy );\n\n\t            dollyEnd.set( 0, distance );\n\t            dollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t            if ( dollyDelta.y < 0 ) {\n\n\t                scope.object.fov = ( scope.object.fov < scope.maxFov ) \n\t                    ? scope.object.fov + 1\n\t                    : scope.maxFov;\n\t                scope.object.updateProjectionMatrix();\n\n\t            } else if ( dollyDelta.y > 0 ) {\n\n\t                scope.object.fov = ( scope.object.fov > scope.minFov ) \n\t                    ? scope.object.fov - 1\n\t                    : scope.minFov;\n\t                scope.object.updateProjectionMatrix();\n\n\t            }\n\n\t            dollyStart.copy( dollyEnd );\n\n\t            scope.update();\n\t            scope.dispatchEvent( changeEvent );\n\t            break;\n\n\t        case 3: // three-fingered touch: pan\n\n\t            if ( scope.noPan === true ) return;\n\t            if ( state !== STATE.TOUCH_PAN ) return;\n\n\t            panEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t            panDelta.subVectors( panEnd, panStart );\n\n\t            scope.pan( panDelta.x, panDelta.y );\n\n\t            panStart.copy( panEnd );\n\n\t            scope.update();\n\t            break;\n\n\t        default:\n\n\t            state = STATE.NONE;\n\n\t        }\n\n\t    }\n\n\t    function touchend( /* event */ ) {\n\n\t        momentumOn = true;\n\n\t        eventPrevious = undefined;\n\n\t        if ( scope.enabled === false ) return;\n\n\t        scope.dispatchEvent( endEvent );\n\t        state = STATE.NONE;\n\n\t    }\n\n\t    this.dispose = function() {\n\n\t        this.domElement.removeEventListener( 'mousedown', onMouseDown );\n\t        this.domElement.removeEventListener( 'mousewheel', onMouseWheel );\n\t        this.domElement.removeEventListener( 'DOMMouseScroll', onMouseWheel );\n\n\t        this.domElement.removeEventListener( 'touchstart', touchstart );\n\t        this.domElement.removeEventListener( 'touchend', touchend );\n\t        this.domElement.removeEventListener( 'touchmove', touchmove );\n\n\t        window.removeEventListener( 'keyup', onKeyUp );\n\t        window.removeEventListener( 'keydown', onKeyDown );\n\n\t    };\n\n\t    // this.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n\t    this.domElement.addEventListener( 'mousedown', onMouseDown, { passive: false } );\n\t    this.domElement.addEventListener( 'mousewheel', onMouseWheel, { passive: false } );\n\t    this.domElement.addEventListener( 'DOMMouseScroll', onMouseWheel, { passive: false } ); // firefox\n\n\t    this.domElement.addEventListener( 'touchstart', touchstart, { passive: false } );\n\t    this.domElement.addEventListener( 'touchend', touchend, { passive: false } );\n\t    this.domElement.addEventListener( 'touchmove', touchmove, { passive: false } );\n\n\t    window.addEventListener( 'keyup', onKeyUp, { passive: false } );\n\t    window.addEventListener( 'keydown', onKeyDown, { passive: false } );\n\n\t    // force an update at start\n\t    this.update();\n\n\t}\n\tOrbitControls.prototype = Object.assign( Object.create( THREE.EventDispatcher.prototype ), {\n\n\t    constructor: OrbitControls\n\n\t} );\n\n\t/**\n\t * @classdesc Device Orientation Control\n\t * @constructor\n\t * @external DeviceOrientationControls\n\t * @param {THREE.Camera} camera \n\t * @param {HTMLElement} domElement \n\t */\n\tfunction DeviceOrientationControls ( camera, domElement ) {\n\n\t    var scope = this;\n\t    var changeEvent = { type: 'change' };\n\n\t    var rotY = 0;\n\t    var rotX = 0;\n\t    var tempX = 0;\n\t    var tempY = 0;\n\n\t    this.camera = camera;\n\t    this.camera.rotation.reorder( 'YXZ' );\n\t    this.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t    this.enabled = true;\n\n\t    this.deviceOrientation = {};\n\t    this.screenOrientation = 0;\n\n\t    this.alpha = 0;\n\t    this.alphaOffsetAngle = 0;\n\n\n\t    var onDeviceOrientationChangeEvent = function( event ) {\n\n\t        scope.deviceOrientation = event;\n\n\t    };\n\n\t    var onScreenOrientationChangeEvent = function() {\n\n\t        scope.screenOrientation = window.orientation || 0;\n\n\t    };\n\n\t    var onTouchStartEvent = function (event) {\n\n\t        event.preventDefault();\n\t        event.stopPropagation();\n\n\t        tempX = event.touches[ 0 ].pageX;\n\t        tempY = event.touches[ 0 ].pageY;\n\n\t    };\n\n\t    var onTouchMoveEvent = function (event) {\n\n\t        event.preventDefault();\n\t        event.stopPropagation();\n\n\t        rotY += THREE.Math.degToRad( ( event.touches[ 0 ].pageX - tempX ) / 4 );\n\t        rotX += THREE.Math.degToRad( ( tempY - event.touches[ 0 ].pageY ) / 4 );\n\n\t        scope.updateAlphaOffsetAngle( rotY );\n\n\t        tempX = event.touches[ 0 ].pageX;\n\t        tempY = event.touches[ 0 ].pageY;\n\n\t    };\n\n\t    // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n\t    var setCameraQuaternion = function( quaternion, alpha, beta, gamma, orient ) {\n\n\t        var zee = new THREE.Vector3( 0, 0, 1 );\n\n\t        var euler = new THREE.Euler();\n\n\t        var q0 = new THREE.Quaternion();\n\n\t        var q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\n\t        var vectorFingerY;\n\t        var fingerQY = new THREE.Quaternion();\n\t        var fingerQX = new THREE.Quaternion();\n\n\t        if ( scope.screenOrientation == 0 ) {\n\n\t            vectorFingerY = new THREE.Vector3( 1, 0, 0 );\n\t            fingerQY.setFromAxisAngle( vectorFingerY, -rotX );\n\n\t        } else if ( scope.screenOrientation == 180 ) {\n\n\t            vectorFingerY = new THREE.Vector3( 1, 0, 0 );\n\t            fingerQY.setFromAxisAngle( vectorFingerY, rotX );\n\n\t        } else if ( scope.screenOrientation == 90 ) {\n\n\t            vectorFingerY = new THREE.Vector3( 0, 1, 0 );\n\t            fingerQY.setFromAxisAngle( vectorFingerY, rotX );\n\n\t        } else if ( scope.screenOrientation == - 90) {\n\n\t            vectorFingerY = new THREE.Vector3( 0, 1, 0 );\n\t            fingerQY.setFromAxisAngle( vectorFingerY, -rotX );\n\n\t        }\n\n\t        q1.multiply( fingerQY );\n\t        q1.multiply( fingerQX );\n\n\t        euler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\n\t        quaternion.setFromEuler( euler ); // orient the device\n\n\t        quaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\n\t        quaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\n\t    };\n\n\t    this.connect = function() {\n\n\t        onScreenOrientationChangeEvent(); // run once on load\n\n\t        window.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, { passive: true } );\n\t        window.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, { passive: true } );\n\t        window.addEventListener( 'deviceorientation', this.update.bind( this ), { passive: true } );\n\n\t        scope.domElement.addEventListener( 'touchstart', onTouchStartEvent, { passive: false } );\n\t        scope.domElement.addEventListener( 'touchmove', onTouchMoveEvent, { passive: false } );\n\n\t        scope.enabled = true;\n\n\t    };\n\n\t    this.disconnect = function() {\n\n\t        window.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t        window.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t        window.removeEventListener( 'deviceorientation', this.update.bind( this ), false );\n\n\t        scope.domElement.removeEventListener( 'touchstart', onTouchStartEvent, false );\n\t        scope.domElement.removeEventListener( 'touchmove', onTouchMoveEvent, false );\n\n\t        scope.enabled = false;\n\n\t    };\n\n\t    this.update = function( ignoreUpdate ) {\n\n\t        if ( scope.enabled === false ) return;\n\n\t        var alpha = scope.deviceOrientation.alpha ? THREE.Math.degToRad( scope.deviceOrientation.alpha ) + scope.alphaOffsetAngle : 0; // Z\n\t        var beta = scope.deviceOrientation.beta ? THREE.Math.degToRad( scope.deviceOrientation.beta ) : 0; // X'\n\t        var gamma = scope.deviceOrientation.gamma ? THREE.Math.degToRad( scope.deviceOrientation.gamma ) : 0; // Y''\n\t        var orient = scope.screenOrientation ? THREE.Math.degToRad( scope.screenOrientation ) : 0; // O\n\n\t        setCameraQuaternion( scope.camera.quaternion, alpha, beta, gamma, orient );\n\t        scope.alpha = alpha;\n\n\t        if ( ignoreUpdate !== true ) { scope.dispatchEvent( changeEvent ); }\n\n\t    };\n\n\t    this.updateAlphaOffsetAngle = function( angle ) {\n\n\t        this.alphaOffsetAngle = angle;\n\t        this.update();\n\n\t    };\n\n\t    this.dispose = function() {\n\n\t        this.disconnect();\n\n\t    };\n\n\t    this.connect();\n\n\t}\n\tDeviceOrientationControls.prototype = Object.assign( Object.create( THREE.EventDispatcher.prototype), {\n\n\t    constructor: DeviceOrientationControls\n\n\t} );\n\n\t/**\n\t * @classdesc Google Cardboard Effect Composer\n\t * @constructor\n\t * @external CardboardEffect\n\t * @param {THREE.WebGLRenderer} renderer \n\t */\n\tfunction CardboardEffect ( renderer ) {\n\n\t    var _camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\t    var _scene = new THREE.Scene();\n\n\t    var _stereo = new THREE.StereoCamera();\n\t    _stereo.aspect = 0.5;\n\n\t    var _params = { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\n\n\t    var _renderTarget = new THREE.WebGLRenderTarget( 512, 512, _params );\n\t    _renderTarget.scissorTest = true;\n\t    _renderTarget.texture.generateMipmaps = false;\n\n\t    /*\n\t     * Distortion Mesh ported from:\n\t     * https://github.com/borismus/webvr-boilerplate/blob/master/src/distortion/barrel-distortion-fragment.js\n\t     */\n\n\t    var distortion = new THREE.Vector2( 0.441, 0.156 );\n\n\t    var geometry = new THREE.PlaneBufferGeometry( 1, 1, 10, 20 ).removeAttribute( 'normal' ).toNonIndexed();\n\n\t    var positions = geometry.attributes.position.array;\n\t    var uvs = geometry.attributes.uv.array;\n\n\t    // duplicate\n\t    geometry.attributes.position.count *= 2;\n\t    geometry.attributes.uv.count *= 2;\n\n\t    var positions2 = new Float32Array( positions.length * 2 );\n\t    positions2.set( positions );\n\t    positions2.set( positions, positions.length );\n\n\t    var uvs2 = new Float32Array( uvs.length * 2 );\n\t    uvs2.set( uvs );\n\t    uvs2.set( uvs, uvs.length );\n\n\t    var vector = new THREE.Vector2();\n\t    var length = positions.length / 3;\n\n\t    for ( var i = 0, l = positions2.length / 3; i < l; i ++ ) {\n\n\t        vector.x = positions2[ i * 3 + 0 ];\n\t        vector.y = positions2[ i * 3 + 1 ];\n\n\t        var dot = vector.dot( vector );\n\t        var scalar = 1.5 + ( distortion.x + distortion.y * dot ) * dot;\n\n\t        var offset = i < length ? 0 : 1;\n\n\t        positions2[ i * 3 + 0 ] = ( vector.x / scalar ) * 1.5 - 0.5 + offset;\n\t        positions2[ i * 3 + 1 ] = ( vector.y / scalar ) * 3.0;\n\n\t        uvs2[ i * 2 ] = ( uvs2[ i * 2 ] + offset ) * 0.5;\n\n\t    }\n\n\t    geometry.attributes.position.array = positions2;\n\t    geometry.attributes.uv.array = uvs2;\n\n\t    //\n\n\t    var material = new THREE.MeshBasicMaterial( { map: _renderTarget.texture } );\n\t    var mesh = new THREE.Mesh( geometry, material );\n\t    _scene.add( mesh );\n\n\t    //\n\n\t    this.setSize = function ( width, height ) {\n\n\t        renderer.setSize( width, height );\n\n\t        var pixelRatio = renderer.getPixelRatio();\n\n\t        _renderTarget.setSize( width * pixelRatio, height * pixelRatio );\n\n\t    };\n\n\t    this.render = function ( scene, camera ) {\n\n\t        scene.updateMatrixWorld();\n\n\t        if ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t        _stereo.update( camera );\n\n\t        var width = _renderTarget.width / 2;\n\t        var height = _renderTarget.height;\n\n\t        if ( renderer.autoClear ) renderer.clear();\n\n\t        _renderTarget.scissor.set( 0, 0, width, height );\n\t        _renderTarget.viewport.set( 0, 0, width, height );\n\t        renderer.setRenderTarget( _renderTarget );\n\t        renderer.render( scene, _stereo.cameraL );\n\n\t        renderer.clearDepth();\n\n\t        _renderTarget.scissor.set( width, 0, width, height );\n\t        _renderTarget.viewport.set( width, 0, width, height );\n\t        renderer.setRenderTarget( _renderTarget );\n\t        renderer.render( scene, _stereo.cameraR );\n\n\t        renderer.clearDepth();\n\n\t        renderer.setRenderTarget( null );\n\t        renderer.render( _scene, _camera );\n\t    };\n\n\t}\n\n\t/**\n\t * @classdesc Stereo Effect Composer\n\t * @constructor\n\t * @external StereoEffect\n\t * @param {THREE.WebGLRenderer} renderer \n\t */\n\tconst StereoEffect = function ( renderer ) {\n\n\t    var _stereo = new THREE.StereoCamera();\n\t    _stereo.aspect = 0.5;\n\t    var size = new THREE.Vector2();\n\n\t    this.setEyeSeparation = function ( eyeSep ) {\n\n\t        _stereo.eyeSep = eyeSep;\n\n\t    };\n\n\t    this.setSize = function ( width, height ) {\n\n\t        renderer.setSize( width, height );\n\n\t    };\n\n\t    this.render = function ( scene, camera ) {\n\n\t        scene.updateMatrixWorld();\n\n\t        if ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t        _stereo.update( camera );\n\n\t        renderer.getSize( size );\n\n\t        if ( renderer.autoClear ) renderer.clear();\n\t        renderer.setScissorTest( true );\n\n\t        renderer.setScissor( 0, 0, size.width / 2, size.height );\n\t        renderer.setViewport( 0, 0, size.width / 2, size.height );\n\t        renderer.render( scene, _stereo.cameraL );\n\n\t        renderer.setScissor( size.width / 2, 0, size.width / 2, size.height );\n\t        renderer.setViewport( size.width / 2, 0, size.width / 2, size.height );\n\t        renderer.render( scene, _stereo.cameraR );\n\n\t        renderer.setScissorTest( false );\n\n\t    };\n\n\t};\n\n\t/**\n\t * @classdesc Viewer contains pre-defined scene, camera and renderer\n\t * @constructor\n\t * @param {object} [options] - Use custom or default config options\n\t * @param {HTMLElement} [options.container] - A HTMLElement to host the canvas\n\t * @param {THREE.Scene} [options.scene=THREE.Scene] - A THREE.Scene which contains panorama and 3D objects\n\t * @param {THREE.Camera} [options.camera=THREE.PerspectiveCamera] - A THREE.Camera to view the scene\n\t * @param {THREE.WebGLRenderer} [options.renderer=THREE.WebGLRenderer] - A THREE.WebGLRenderer to render canvas\n\t * @param {boolean} [options.controlBar=true] - Show/hide control bar on the bottom of the container\n\t * @param {array}   [options.controlButtons=[]] - Button names to mount on controlBar if controlBar exists, Defaults to ['fullscreen', 'setting', 'video']\n\t * @param {boolean} [options.autoHideControlBar=false] - Auto hide control bar when click on non-active area\n\t * @param {boolean} [options.autoHideInfospot=true] - Auto hide infospots when click on non-active area\n\t * @param {boolean} [options.horizontalView=false] - Allow only horizontal camera control\n\t * @param {number}  [options.clickTolerance=10] - Distance tolerance to tigger click / tap event\n\t * @param {number}  [options.cameraFov=60] - Camera field of view value\n\t * @param {boolean} [options.reverseDragging=false] - Reverse dragging direction\n\t * @param {boolean} [options.enableReticle=false] - Enable reticle for mouseless interaction other than VR mode\n\t * @param {number}  [options.dwellTime=1500] - Dwell time for reticle selection in ms\n\t * @param {boolean} [options.autoReticleSelect=true] - Auto select a clickable target after dwellTime\n\t * @param {boolean} [options.viewIndicator=false] - Adds an angle view indicator in upper left corner\n\t * @param {number}  [options.indicatorSize=30] - Size of View Indicator\n\t * @param {string}  [options.output='none'] - Whether and where to output raycast position. Could be 'event', 'console' or 'overlay'.\n\t * @param {boolean} [options.autoRotate=false] - Auto rotate\n\t * @param {number}  [options.autoRotateSpeed=2.0] - Auto rotate speed as in degree per second. Positive is counter-clockwise and negative is clockwise.\n\t * @param {number}  [options.autoRotateActivationDuration=5000] - Duration before auto rotatation when no user interactivity in ms\n\t */\n\tfunction Viewer ( options ) {\n\n\t    let container;\n\n\t    options = options || {};\n\t    options.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n\t    options.controlButtons = options.controlButtons || [ 'fullscreen', 'setting', 'video' ];\n\t    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n\t    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n\t    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n\t    options.clickTolerance = options.clickTolerance || 10;\n\t    options.cameraFov = options.cameraFov || 60;\n\t    options.reverseDragging = options.reverseDragging || false;\n\t    options.enableReticle = options.enableReticle || false;\n\t    options.dwellTime = options.dwellTime || 1500;\n\t    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n\t    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n\t    options.indicatorSize = options.indicatorSize || 30;\n\t    options.output = options.output ? options.output : 'none';\n\t    options.autoRotate = options.autoRotate || false;\n\t    options.autoRotateSpeed = options.autoRotateSpeed || 2.0;\n\t    options.autoRotateActivationDuration = options.autoRotateActivationDuration || 5000;\n\n\t    this.options = options;\n\n\t    /*\n\t     * CSS Icon\n\t     * const styleLoader = new StyleLoader();\n\t     * styleLoader.inject( 'icono' );\n\t     */\n\n\t    // Container\n\t    if ( options.container ) {\n\n\t        container = options.container;\n\t        container._width = container.clientWidth;\n\t        container._height = container.clientHeight;\n\n\t    } else {\n\n\t        container = document.createElement( 'div' );\n\t        container.classList.add( 'panolens-container' );\n\t        container.style.width = '100%';\n\t        container.style.height = '100%';\n\t        container._width = window.innerWidth;\n\t        container._height = window.innerHeight;\n\t        document.body.appendChild( container );\n\n\t    }\n\n\t    this.container = container;\n\n\t    this.camera = options.camera || new THREE.PerspectiveCamera( this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 20000 );\n\t    this.scene = options.scene || new THREE.Scene();\n\t    this.renderer = options.renderer || new THREE.WebGLRenderer( { alpha: true, antialias: true } );\n\t    this.sceneReticle = new THREE.Scene();\n\n\t    this.viewIndicatorSize = this.options.indicatorSize;\n\n\t    this.reticle = {};\n\t    this.tempEnableReticle = this.options.enableReticle;\n\n\t    this.mode = MODES.NORMAL;\n\n\t    this.panorama = null;\n\t    this.widget = null;\n\n\t    this.hoverObject = null;\n\t    this.infospot = null;\n\t    this.pressEntityObject = null;\n\t    this.pressObject = null;\n\n\t    this.raycaster = new THREE.Raycaster();\n\t    this.raycasterPoint = new THREE.Vector2();\n\t    this.userMouse = new THREE.Vector2();\n\t    this.updateCallbacks = [];\n\t    this.requestAnimationId = null;\n\n\t    this.cameraFrustum = new THREE.Frustum();\n\t    this.cameraViewProjectionMatrix = new THREE.Matrix4();\n\n\t    this.autoRotateRequestId = null;\n\n\t    this.outputDivElement = null;\n\n\t    this.touchSupported = 'ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch;\n\n\t    // Handler references\n\t    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind( this );\n\t    this.HANDLER_MOUSE_UP = this.onMouseUp.bind( this );\n\t    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind( this );\n\t    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind( this );\n\t    this.HANDLER_KEY_DOWN = this.onKeyDown.bind( this );\n\t    this.HANDLER_KEY_UP = this.onKeyUp.bind( this );\n\t    this.HANDLER_TAP = this.onTap.bind( this, {\n\t        clientX: this.container.clientWidth / 2,\n\t        clientY: this.container.clientHeight / 2\n\t    } );\n\n\t    // Flag for infospot output\n\t    this.OUTPUT_INFOSPOT = false;\n\n\t    // Animations\n\t    this.tweenLeftAnimation = new Tween.Tween();\n\t    this.tweenUpAnimation = new Tween.Tween();\n\n\t    // Renderer\n\t    this.renderer.setPixelRatio( window.devicePixelRatio );\n\t    this.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\n\t    this.renderer.setClearColor( 0x000000, 0 );\n\t    this.renderer.autoClear = false;\n\n\t    // Append Renderer Element to container\n\t    this.renderer.domElement.classList.add( 'panolens-canvas' );\n\t    this.renderer.domElement.style.display = 'block';\n\t    this.container.style.backgroundColor = '#000';\n\t    this.container.appendChild( this.renderer.domElement );\n\n\t    // Camera Controls\n\t    this.OrbitControls = new OrbitControls( this.camera, this.container );\n\t    this.OrbitControls.id = 'orbit';\n\t    this.OrbitControls.minDistance = 1;\n\t    this.OrbitControls.noPan = true;\n\t    this.OrbitControls.autoRotate = this.options.autoRotate;\n\t    this.OrbitControls.autoRotateSpeed = this.options.autoRotateSpeed;\n\n\t    this.DeviceOrientationControls = new DeviceOrientationControls( this.camera, this.container );\n\t    this.DeviceOrientationControls.id = 'device-orientation';\n\t    this.DeviceOrientationControls.enabled = false;\n\t    this.camera.position.z = 1;\n\n\t    // Register change event if passiveRenering\n\t    if ( this.options.passiveRendering ) {\n\n\t        console.warn( 'passiveRendering is now deprecated' );\n\n\t    }\n\n\t    // Controls\n\t    this.controls = [ this.OrbitControls, this.DeviceOrientationControls ];\n\t    this.control = this.OrbitControls;\n\n\t    // Cardboard effect\n\t    this.CardboardEffect = new CardboardEffect( this.renderer );\n\t    this.CardboardEffect.setSize( this.container.clientWidth, this.container.clientHeight );\n\n\t    // Stereo effect\n\t    this.StereoEffect = new StereoEffect( this.renderer );\n\t    this.StereoEffect.setSize( this.container.clientWidth, this.container.clientHeight );\n\n\t    this.effect = this.CardboardEffect;\n\n\t    // Add default hidden reticle\n\t    this.addReticle();\n\n\t    // Lock horizontal view\n\t    if ( this.options.horizontalView ) {\n\t        this.OrbitControls.minPolarAngle = Math.PI / 2;\n\t        this.OrbitControls.maxPolarAngle = Math.PI / 2;\n\t    }\n\n\t    // Add Control UI\n\t    if ( this.options.controlBar !== false ) {\n\t        this.addDefaultControlBar( this.options.controlButtons );\n\t    }\n\n\t    // Add View Indicator\n\t    if ( this.options.viewIndicator ) {\n\t        this.addViewIndicator();\n\t    }\n\n\t    // Reverse dragging direction\n\t    if ( this.options.reverseDragging ) {\n\t        this.reverseDraggingDirection();\n\t    }\n\n\t    // Register event if reticle is enabled, otherwise defaults to mouse\n\t    if ( this.options.enableReticle ) {\n\t        this.enableReticleControl();\n\t    } else {\n\t        this.registerMouseAndTouchEvents();\n\t    }\n\n\t    // Output infospot position to an overlay container if specified\n\t    if ( this.options.output === 'overlay' ) {\n\t        this.addOutputElement();\n\t    }\n\n\t    // Register dom event listeners\n\t    this.registerEventListeners();\n\n\t    // Animate\n\t    this.animate.call( this );\n\n\t}\n\tViewer.prototype = Object.assign( Object.create( THREE.EventDispatcher.prototype ), {\n\n\t    constructor: Viewer,\n\n\t    /**\n\t     * Add an object to the scene\n\t     * Automatically hookup with panolens-viewer-handler listener\n\t     * to communicate with viewer method\n\t     * @param {THREE.Object3D} object - The object to be added\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    add: function ( object ) {\n\n\t        if ( arguments.length > 1 ) {\n\n\t            for ( let i = 0; i < arguments.length; i ++ ) {\n\n\t                this.add( arguments[ i ] );\n\n\t            }\n\n\t            return this;\n\n\t        }\n\n\t        this.scene.add( object );\n\n\t        // All object added to scene has 'panolens-viewer-handler' event to handle viewer communication\n\t        if ( object.addEventListener ) {\n\n\t            object.addEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\n\t        }\n\n\t        // All object added to scene being passed with container\n\t        if ( object instanceof Panorama && object.dispatchEvent ) {\n\n\t            object.dispatchEvent( { type: 'panolens-container', container: this.container } );\n\n\t        }\n\n\t        if ( object instanceof CameraPanorama ) {\n\n\t            object.dispatchEvent( { type: 'panolens-scene', scene: this.scene } );\n\n\t        }\n\n\t        // Hookup default panorama event listeners\n\t        if ( object.type === 'panorama' ) {\n\n\t            this.addPanoramaEventListener( object );\n\n\t            if ( !this.panorama ) {\n\n\t                this.setPanorama( object );\n\n\t            }\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Remove an object from the scene\n\t     * @param  {THREE.Object3D} object - Object to be removed\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    remove: function ( object ) {\n\n\t        if ( object.removeEventListener ) {\n\n\t            object.removeEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\n\t        }\n\n\t        this.scene.remove( object );\n\n\t    },\n\n\t    /**\n\t     * Add default control bar\n\t     * @param {array} array - The control buttons array\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    addDefaultControlBar: function ( array ) {\n\n\t        if ( this.widget ) {\n\n\t            console.warn( 'Default control bar exists' );\n\t            return;\n\n\t        }\n\n\t        const widget = new Widget( this.container );\n\t        widget.addEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\t        widget.addControlBar();\n\t        array.forEach( buttonName => {\n\n\t            widget.addControlButton( buttonName );\n\n\t        } );\n\n\t        this.widget = widget;\n\n\t    },\n\n        getPosition: function () {\n            var intersects, point, panoramaWorldPosition, outputPosition;\n            intersects = this.raycaster.intersectObject( this.panorama, true );\n        \n            if ( intersects.length > 0 ) {\n                point = intersects[0].point;\n                panoramaWorldPosition = this.panorama.getWorldPosition(new THREE.Vector3());\n        \n                // Panorama is scaled -1 on X axis\n                outputPosition = new THREE.Vector3(\n                    -(point.x - panoramaWorldPosition.x).toFixed(2),\n                    (point.y - panoramaWorldPosition.y).toFixed(2),\n                    (point.z - panoramaWorldPosition.z).toFixed(2)\n                );\n            }\n        \n            return outputPosition;\n        },\n\n\t    /**\n\t     * Set a panorama to be the current one\n\t     * @param {Panorama} pano - Panorama to be set\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    setPanorama: function ( pano ) {\n\n\t        const leavingPanorama = this.panorama;\n\n\t        if ( pano.type === 'panorama' && leavingPanorama !== pano ) {\n\n\t            // Clear exisiting infospot\n\t            this.hideInfospot();\n\n\t            const afterEnterComplete = function () {\n\n\t                if ( leavingPanorama ) { leavingPanorama.onLeave(); }\n\t                pano.removeEventListener( 'enter-fade-start', afterEnterComplete );\n\n\t            };\n\n\t            pano.addEventListener( 'enter-fade-start', afterEnterComplete );\n\n\t            // Assign and enter panorama\n\t            (this.panorama = pano).onEnter();\n\t\t\t\t\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Event handler to execute commands from child objects\n\t     * @param {object} event - The dispatched event with method as function name and data as an argument\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    eventHandler: function ( event ) {\n\n\t        if ( event.method && this[ event.method ] ) {\n\n\t            this[ event.method ]( event.data );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Dispatch event to all descendants\n\t     * @param  {object} event - Event to be passed along\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    dispatchEventToChildren: function ( event ) {\n\n\t        this.scene.traverse( function ( object ) {\n\n\t            if ( object.dispatchEvent ) {\n\n\t                object.dispatchEvent( event );\n\n\t            }\n\n\t        });\n\n\t    },\n\n\t    /**\n\t     * Set widget content\n\t     * @method activateWidgetItem\n\t     * @param  {integer} controlIndex - Control index\n\t     * @param  {integer} mode - Modes for effects\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    activateWidgetItem: function ( controlIndex, mode ) {\n\n\t        const mainMenu = this.widget.mainMenu;\n\t        const ControlMenuItem = mainMenu.children[ 0 ];\n\t        const ModeMenuItem = mainMenu.children[ 1 ];\n\n\t        let item;\n\n\t        if ( controlIndex !== undefined ) {\n\n\t            switch ( controlIndex ) {\n\n\t            case 0:\n\n\t                item = ControlMenuItem.subMenu.children[ 1 ];\n\n\t                break;\n\n\t            case 1:\n\n\t                item = ControlMenuItem.subMenu.children[ 2 ];\n\n\t                break;\n\t\t\t\t\t\t\n\t            default:\n\n\t                item = ControlMenuItem.subMenu.children[ 1 ];\n\n\t                break;\t\n\n\t            }\n\n\t            ControlMenuItem.subMenu.setActiveItem( item );\n\t            ControlMenuItem.setSelectionTitle( item.textContent );\n\n\t        }\n\n\t        if ( mode !== undefined ) {\n\n\t            switch( mode ) {\n\n\t            case MODES.CARDBOARD:\n\n\t                item = ModeMenuItem.subMenu.children[ 2 ];\n\n\t                break;\n\n\t            case MODES.STEREO:\n\n\t                item = ModeMenuItem.subMenu.children[ 3 ];\n\t\t\t\t\t\t\n\t                break;\n\n\t            default:\n\n\t                item = ModeMenuItem.subMenu.children[ 1 ];\n\n\t                break;\n\t            }\n\n\t            ModeMenuItem.subMenu.setActiveItem( item );\n\t            ModeMenuItem.setSelectionTitle( item.textContent );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Enable rendering effect\n\t     * @param  {MODES} mode - Modes for effects\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    enableEffect: function ( mode ) {\n\n\t        if ( this.mode === mode ) { return; }\n\t        if ( mode === MODES.NORMAL ) { this.disableEffect(); return; }\n\t        else { this.mode = mode; }\n\n\t        const fov = this.camera.fov;\n\n\t        switch( mode ) {\n\n\t        case MODES.CARDBOARD:\n\n\t            this.effect = this.CardboardEffect;\n\t            this.enableReticleControl();\n\n\t            break;\n\n\t        case MODES.STEREO:\n\n\t            this.effect = this.StereoEffect;\n\t            this.enableReticleControl();\n\t\t\t\t\t\n\t            break;\n\n\t        default:\n\n\t            this.effect = null;\n\t            this.disableReticleControl();\n\n\t            break;\n\n\t        }\n\n\t        this.activateWidgetItem( undefined, this.mode );\n\n\t        /**\n\t         * Dual eye effect event\n\t         * @type {object}\n\t         * @event Infospot#panolens-dual-eye-effect\n\t         * @property {MODES} mode - Current display mode\n\t         */\n\t        this.dispatchEventToChildren( { type: 'panolens-dual-eye-effect', mode: this.mode } );\n\n\t        // Force effect stereo camera to update by refreshing fov\n\t        this.camera.fov = fov + 10e-3;\n\t        this.effect.setSize( this.container.clientWidth, this.container.clientHeight );\n\t        this.render();\n\t        this.camera.fov = fov;\n\n\t        /**\n\t         * Dispatch mode change event\n\t         * @type {object}\n\t         * @event Viewer#mode-change\n\t         * @property {MODES} mode - Current display mode\n\t         */\n\t        this.dispatchEvent( { type: 'mode-change', mode: this.mode } );\n\n\t    },\n\n\t    /**\n\t     * Disable additional rendering effect\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    disableEffect: function () {\n\n\t        if ( this.mode === MODES.NORMAL ) { return; }\n\n\t        this.mode = MODES.NORMAL;\n\t        this.disableReticleControl();\n\n\t        this.activateWidgetItem( undefined, this.mode );\n\n\t        /**\n\t         * Dual eye effect event\n\t         * @type {object}\n\t         * @event Infospot#panolens-dual-eye-effect\n\t         * @property {MODES} mode - Current display mode\n\t         */\n\t        this.dispatchEventToChildren( { type: 'panolens-dual-eye-effect', mode: this.mode } );\n\n\t        this.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\n\t        this.render();\n\n\t        /**\n\t         * Dispatch mode change event\n\t         * @type {object}\n\t         * @event Viewer#mode-change\n\t         * @property {MODES} mode - Current display mode\n\t         */\n\t        this.dispatchEvent( { type: 'mode-change', mode: this.mode } );\n\t    },\n\n\t    /**\n\t     * Enable reticle control\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    enableReticleControl: function () {\n\n\t        if ( this.reticle.visible ) { return; }\n\n\t        this.tempEnableReticle = true;\n\n\t        // Register reticle event and unregister mouse event\n\t        this.unregisterMouseAndTouchEvents();\n\t        this.reticle.show();\n\t        this.registerReticleEvent();\n\t        this.updateReticleEvent();\n\n\t    },\n\n\t    /**\n\t     * Disable reticle control\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    disableReticleControl: function () {\n\n\t        this.tempEnableReticle = false;\n\n\t        // Register mouse event and unregister reticle event\n\t        if ( !this.options.enableReticle ) {\n\n\t            this.reticle.hide();\n\t            this.unregisterReticleEvent();\n\t            this.registerMouseAndTouchEvents();\n\n\t        } else {\n\n\t            this.updateReticleEvent();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Enable auto rotation\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    enableAutoRate: function () {\n\n\t        this.options.autoRotate = true;\n\t        this.OrbitControls.autoRotate = true;\n\n\t    },\n\n\t    /**\n\t     * Disable auto rotation\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    disableAutoRate: function () {\n\n\t        clearTimeout( this.autoRotateRequestId );\n\t        this.options.autoRotate = false;\n\t        this.OrbitControls.autoRotate = false;\n\n\t    },\n\n\t    /**\n\t     * Toggle video play or stop\n\t     * @param {boolean} pause\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @fires Viewer#video-toggle\n\t     */\n\t    toggleVideoPlay: function ( pause ) {\n\n\t        if ( this.panorama instanceof VideoPanorama ) {\n\n\t            /**\n\t             * Toggle video event\n\t             * @type {object}\n\t             * @event Viewer#video-toggle\n\t             */\n\t            this.panorama.dispatchEvent( { type: 'video-toggle', pause: pause } );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set currentTime in a video\n\t     * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @fires Viewer#video-time\n\t     */\n\t    setVideoCurrentTime: function ( percentage ) {\n\n\t        if ( this.panorama instanceof VideoPanorama ) {\n\n\t            /**\n\t             * Setting video time event\n\t             * @type {object}\n\t             * @event Viewer#video-time\n\t             * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t             */\n\t            this.panorama.dispatchEvent( { type: 'video-time', percentage: percentage } );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * This will be called when video updates if an widget is present\n\t     * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @fires Viewer#video-update\n\t     */\n\t    onVideoUpdate: function ( percentage ) {\n\n\t        const { widget } = this;\n\n\t        /**\n\t         * Video update event\n\t         * @type {object}\n\t         * @event Viewer#video-update\n\t         * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t         */\n\t        if( widget ) { widget.dispatchEvent( { type: 'video-update', percentage: percentage } ); }\n\n\t    },\n\n\t    /**\n\t     * Add update callback to be called every animation frame\n\t     * @param {function} callback\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    addUpdateCallback: function ( fn ) {\n\n\t        if ( fn ) {\n\n\t            this.updateCallbacks.push( fn );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Remove update callback\n\t     * @param  {function} fn - The function to be removed\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    removeUpdateCallback: function ( fn ) {\n\n\t        const index = this.updateCallbacks.indexOf( fn );\n\n\t        if ( fn && index >= 0 ) {\n\n\t            this.updateCallbacks.splice( index, 1 );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Show video widget\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    showVideoWidget: function () {\n\n\t        const { widget } = this;\n\n\t        /**\n\t         * Show video widget event\n\t         * @type {object}\n\t         * @event Viewer#video-control-show\n\t         */\n\t        if( widget ) { widget.dispatchEvent( { type: 'video-control-show' } ); }\n\n\t    },\n\n\t    /**\n\t     * Hide video widget\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    hideVideoWidget: function () {\n\n\t        const { widget } = this;\n\n\t        /**\n\t         * Hide video widget\n\t         * @type {object}\n\t         * @event Viewer#video-control-hide\n\t         */\n\t        if( widget ) { widget.dispatchEvent( { type: 'video-control-hide' } ); }\n\n\t    },\n\n\t    /**\n\t     * Update video play button\n\t     * @param {boolean} paused \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    updateVideoPlayButton: function ( paused ) {\n\n\t        const { widget } = this;\n\n\t        if ( widget && widget.videoElement && widget.videoElement.controlButton ) {\n\n\t            widget.videoElement.controlButton.update( paused );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Add default panorama event listeners\n\t     * @param {Panorama} pano - The panorama to be added with event listener\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    addPanoramaEventListener: function ( pano ) {\n\n\t        // Set camera control on every panorama\n\t        pano.addEventListener( 'enter-fade-start', this.setCameraControl.bind( this ) );\n\n\t        // Show and hide widget event only when it's VideoPanorama\n\t        if ( pano instanceof VideoPanorama ) {\n\n\t            pano.addEventListener( 'enter-fade-start', this.showVideoWidget.bind( this ) );\n\t            pano.addEventListener( 'leave', function () {\n\n\t                if ( !(this.panorama instanceof VideoPanorama) ) {\n\n\t                    this.hideVideoWidget.call( this );\n\n\t                }\n\t\t\t\t\t\n\t            }.bind( this ) );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Set camera control\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    setCameraControl: function () {\n\n\t        this.OrbitControls.target.copy( this.panorama.position );\n\n\t    },\n\n\t    /**\n\t     * Get current camera control\n\t     * @return {object} - Current navigation control\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @returns {THREE.OrbitControls|THREE.DeviceOrientationControls}\n\t     */\n\t    getControl: function () {\n\n\t        return this.control;\n\n\t    },\n\n\t    /**\n\t     * Get scene\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @return {THREE.Scene} - Current scene which the viewer is built on\n\t     */\n\t    getScene: function () {\n\n\t        return this.scene;\n\n\t    },\n\n\t    /**\n\t     * Get camera\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @return {THREE.Camera} - The scene camera\n\t     */\n\t    getCamera: function () {\n\n\t        return this.camera;\n\n\t    },\n\n\t    /**\n\t     * Get renderer\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @return {THREE.WebGLRenderer} - The renderer using webgl\n\t     */\n\t    getRenderer: function () {\n\n\t        return this.renderer;\n\n\t    },\n\n\t    /**\n\t     * Get container\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @return {HTMLElement} - The container holds rendererd canvas\n\t     */\n\t    getContainer: function () {\n\n\t        return this.container;\n\n\t    },\n\n\t    /**\n\t     * Get control id\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @return {string} - Control id. 'orbit' or 'device-orientation'\n\t     */\n\t    getControlId: function () {\n\n\t        return this.control.id;\n\n\t    },\n\n\t    /**\n\t     * Get next navigation control id\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @return {string} - Next control id\n\t     */\n\t    getNextControlId: function () {\n\n\t        return this.controls[ this.getNextControlIndex() ].id;\n\n\t    },\n\n\t    /**\n\t     * Get next navigation control index\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @return {number} - Next control index\n\t     */\n\t    getNextControlIndex: function () {\n\n\t        const controls = this.controls;\n\t        const control = this.control;\n\t        const nextIndex = controls.indexOf( control ) + 1;\n\n\t        return ( nextIndex >= controls.length ) ? 0 : nextIndex;\n\n\t    },\n\n\t    /**\n\t     * Set field of view of camera\n\t     * @param {number} fov\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    setCameraFov: function ( fov ) {\n\n\t        this.camera.fov = fov;\n\t        this.camera.updateProjectionMatrix();\n\n\t    },\n\n\t    /**\n\t     * Enable control by index\n\t     * @param  {CONTROLS} index - Index of camera control\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    enableControl: function ( index ) {\n\n\t        index = ( index >= 0 && index < this.controls.length ) ? index : 0;\n\n\t        this.control.enabled = false;\n\n\t        this.control = this.controls[ index ];\n\n\t        this.control.enabled = true;\n\n\t        switch ( index ) {\n\n\t        case CONTROLS.ORBIT:\n\n\t            this.camera.position.copy( this.panorama.position );\n\t            this.camera.position.z += 1;\n\n\t            break;\n\n\t        case CONTROLS.DEVICEORIENTATION:\n\n\t            this.camera.position.copy( this.panorama.position );\n\n\t            break;\n\n\t        default:\n\n\t            break;\n\t        }\n\n\t        this.control.update();\n\n\t        this.activateWidgetItem( index, undefined );\n\n\t    },\n\n\t    /**\n\t     * Disable current control\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    disableControl: function () {\n\n\t        this.control.enabled = false;\n\n\t    },\n\n\t    /**\n\t     * Toggle next control\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    toggleNextControl: function () {\n\n\t        this.enableControl( this.getNextControlIndex() );\n\n\t    },\n\n\t    /**\n\t     * Screen Space Projection\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    getScreenVector: function ( worldVector ) {\n\n\t        const vector = worldVector.clone();\n\t        const widthHalf = ( this.container.clientWidth ) / 2;\n\t        const heightHalf = this.container.clientHeight / 2;\n\n\t        vector.project( this.camera );\n\n\t        vector.x = ( vector.x * widthHalf ) + widthHalf;\n\t        vector.y = - ( vector.y * heightHalf ) + heightHalf;\n\t        vector.z = 0;\n\n\t        return vector;\n\n\t    },\n\n\t    /**\n\t     * Check Sprite in Viewport\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    checkSpriteInViewport: function ( sprite ) {\n\n\t        this.camera.matrixWorldInverse.getInverse( this.camera.matrixWorld );\n\t        this.cameraViewProjectionMatrix.multiplyMatrices( this.camera.projectionMatrix, this.camera.matrixWorldInverse );\n\t        this.cameraFrustum.setFromMatrix( this.cameraViewProjectionMatrix );\n\n\t        return sprite.visible && this.cameraFrustum.intersectsSprite( sprite );\n\n\t    },\n\n\t    /**\n\t     * Reverse dragging direction\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    reverseDraggingDirection: function () {\n\n\t        this.OrbitControls.rotateSpeed *= -1;\n\t        this.OrbitControls.momentumScalingFactor *= -1;\n\n\t    },\n\n\t    /**\n\t     * Add reticle \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    addReticle: function () {\n\n\t        this.reticle = new Reticle( 0xffffff, true, this.options.dwellTime );\n\t        this.reticle.hide();\n\t        this.camera.add( this.reticle );\n\t        this.sceneReticle.add( this.camera );\n\n\t    },\n\n\t    /**\n\t     * Tween control looking center\n\t     * @param {THREE.Vector3} vector - Vector to be looked at the center\n\t     * @param {number} [duration=1000] - Duration to tween\n\t     * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    tweenControlCenter: function ( vector, duration, easing ) {\n\n\t        if ( this.control !== this.OrbitControls ) {\n\n\t            return;\n\n\t        }\n\n\t        // Pass in arguments as array\n\t        if ( vector instanceof Array ) {\n\n\t            duration = vector[ 1 ];\n\t            easing = vector[ 2 ];\n\t            vector = vector[ 0 ];\n\n\t        }\n\n\t        duration = duration !== undefined ? duration : 1000;\n\t        easing = easing || Tween.Easing.Exponential.Out;\n\n\t        let scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n\t        scope = this;\n\n\t        chv = this.camera.getWorldDirection( new THREE.Vector3() );\n\t        cvv = chv.clone();\n\n\t        vptc = this.panorama.getWorldPosition( new THREE.Vector3() ).sub( this.camera.getWorldPosition( new THREE.Vector3() ) );\n\n\t        hv = vector.clone();\n\t        // Scale effect\n\t        hv.x *= -1;\n\t        hv.add( vptc ).normalize();\n\t        vv = hv.clone();\n\n\t        chv.y = 0;\n\t        hv.y = 0;\n\n\t        ha = Math.atan2( hv.z, hv.x ) - Math.atan2( chv.z, chv.x );\n\t        ha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n\t        ha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n\t        va = Math.abs( cvv.angleTo( chv ) + ( cvv.y * vv.y <= 0 ? vv.angleTo( hv ) : -vv.angleTo( hv ) ) );\n\t        va *= vv.y < cvv.y ? 1 : -1;\n\n\t        ov = { left: 0, up: 0 };\n\t        nv = { left: 0, up: 0 };\n\n\t        this.tweenLeftAnimation.stop();\n\t        this.tweenUpAnimation.stop();\n\n\t        this.tweenLeftAnimation = new Tween.Tween( ov )\n\t            .to( { left: ha }, duration )\n\t            .easing( easing )\n\t            .onUpdate(function(ov){\n\t                scope.control.rotateLeft( ov.left - nv.left );\n\t                nv.left = ov.left;\n\t            })\n\t            .start();\n\n\t        this.tweenUpAnimation = new Tween.Tween( ov )\n\t            .to( { up: va }, duration )\n\t            .easing( easing )\n\t            .onUpdate(function(ov){\n\t                scope.control.rotateUp( ov.up - nv.up );\n\t                nv.up = ov.up;\n\t            })\n\t            .start();\n\n\t    },\n\n\t    /**\n\t     * Tween control looking center by object\n\t     * @param {THREE.Object3D} object - Object to be looked at the center\n\t     * @param {number} [duration=1000] - Duration to tween\n\t     * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    tweenControlCenterByObject: function ( object, duration, easing ) {\n\n\t        let isUnderScalePlaceHolder = false;\n\n\t        object.traverseAncestors( function ( ancestor ) {\n\n\t            if ( ancestor.scalePlaceHolder ) {\n\n\t                isUnderScalePlaceHolder = true;\n\n\t            }\n\t        } );\n\n\t        if ( isUnderScalePlaceHolder ) {\n\n\t            const invertXVector = new THREE.Vector3( -1, 1, 1 );\n\n\t            this.tweenControlCenter( object.getWorldPosition( new THREE.Vector3() ).multiply( invertXVector ), duration, easing );\n\n\t        } else {\n\n\t            this.tweenControlCenter( object.getWorldPosition( new THREE.Vector3() ), duration, easing );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * This is called when window size is changed\n\t     * @fires Viewer#window-resize\n\t     * @param {number} [windowWidth] - Specify if custom element has changed width\n\t     * @param {number} [windowHeight] - Specify if custom element has changed height\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onWindowResize: function ( windowWidth, windowHeight ) {\n\n\t        let width, height;\n\n\t        const expand = this.container.classList.contains( 'panolens-container' ) || this.container.isFullscreen;\n\n\t        if ( windowWidth !== undefined && windowHeight !== undefined ) {\n\n\t            width = windowWidth;\n\t            height = windowHeight;\n\t            this.container._width = windowWidth;\n\t            this.container._height = windowHeight;\n\n\t        } else {\n\n\t            const isAndroid = /(android)/i.test(window.navigator.userAgent);\n\n\t            const adjustWidth = isAndroid \n\t                ? Math.min(document.documentElement.clientWidth, window.innerWidth || 0) \n\t                : Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\n\t            const adjustHeight = isAndroid \n\t                ? Math.min(document.documentElement.clientHeight, window.innerHeight || 0) \n\t                : Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\n\t            width = expand ? adjustWidth : this.container.clientWidth;\n\t            height = expand ? adjustHeight : this.container.clientHeight;\n\n\t            this.container._width = width;\n\t            this.container._height = height;\n\n\t        }\n\n\t        this.camera.aspect = width / height;\n\t        this.camera.updateProjectionMatrix();\n\n\t        this.renderer.setSize( width, height );\n\n\t        // Update reticle\n\t        if ( this.options.enableReticle || this.tempEnableReticle ) {\n\n\t            this.updateReticleEvent();\n\n\t        }\n\n\t        /**\n\t         * Window resizing event\n\t         * @type {object}\n\t         * @event Viewer#window-resize\n\t         * @property {number} width  - Width of the window\n\t         * @property {number} height - Height of the window\n\t         */\n\t        this.dispatchEvent( { type: 'window-resize', width: width, height: height });\n\t        this.scene.traverse( function ( object ) {\n\n\t            if ( object.dispatchEvent ) {\n\n\t                object.dispatchEvent( { type: 'window-resize', width: width, height: height });\n\n\t            }\n\n\t        } );\n\n\t    },\n\n\t    /**\n\t     * Add output element\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    addOutputElement: function () {\n\n\t        const element = document.createElement( 'div' );\n\t        element.style.position = 'absolute';\n\t        element.style.right = '10px';\n\t        element.style.top = '10px';\n\t        element.style.color = '#fff';\n\t        this.container.appendChild( element );\n\t        this.outputDivElement = element;\n\n\t    },\n\n\t    /**\n\t     * Output position in developer console by holding down Ctrl button\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    outputPosition: function () {\n\n\t        const intersects = this.raycaster.intersectObject( this.panorama, true );\n\n\t        if ( intersects.length > 0 ) {\n\n\t            const point = intersects[ 0 ].point.clone();\n\t            const converter = new THREE.Vector3( -1, 1, 1 );\n\t            const world = this.panorama.getWorldPosition( new THREE.Vector3() );\n\t            point.sub( world ).multiply( converter );\n\n\t            const position = {\n\t                x: point.x.toFixed(2),\n\t                y: point.y.toFixed(2),\n\t                z: point.z.toFixed(2),\n\t            };\n\n\t            const message = `${position.x}, ${position.y}, ${position.z}`;\n\n\t            if ( point.length() === 0 ) { return; }\n\n\t            switch ( this.options.output ) {\n\n\t            case 'event':\n\t                /**\n\t                 * Dispatch raycast position as event\n\t                 * @type {object}\n\t                 * @event Viewer#position-output\n\t                 */\n\t                this.dispatchEvent( { type: 'position-output', position: position } );\n\t                break;\n\n\t            case 'console':\n\t                console.info( message );\n\t                break;\n\n\t            case 'overlay':\n\t                this.outputDivElement.textContent = message;\n\t                break;\n\n\t            default:\n\t                break;\n\n\t            }\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * On mouse down\n\t     * @param {MouseEvent} event \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onMouseDown: function ( event ) {\n\n\t        event.preventDefault();\n\n\t        this.userMouse.x = ( event.clientX >= 0 ) ? event.clientX : event.touches[0].clientX;\n\t        this.userMouse.y = ( event.clientY >= 0 ) ? event.clientY : event.touches[0].clientY;\n\t        this.userMouse.type = 'mousedown';\n\t        this.onTap( event );\n\n\t    },\n\n\t    /**\n\t     * On mouse move\n\t     * @param {MouseEvent} event \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onMouseMove: function ( event ) {\n\n\t        event.preventDefault();\n\t        this.userMouse.type = 'mousemove';\n\t        this.onTap( event );\n\n\t    },\n\n\t    /**\n\t     * On mouse up\n\t     * @param {MouseEvent} event \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onMouseUp: function ( event ) {\n\n\t        let onTarget = false;\n\n\t        this.userMouse.type = 'mouseup';\n\n\t        const type = ( this.userMouse.x >= event.clientX - this.options.clickTolerance \n\t\t\t\t\t&& this.userMouse.x <= event.clientX + this.options.clickTolerance\n\t\t\t\t\t&& this.userMouse.y >= event.clientY - this.options.clickTolerance\n\t\t\t\t\t&& this.userMouse.y <= event.clientY + this.options.clickTolerance ) \n\t\t\t\t\t||  ( event.changedTouches \n\t\t\t\t\t&& this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance\n\t\t\t\t\t&& this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance \n\t\t\t\t\t&& this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance\n\t\t\t\t\t&& this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ) \n\t            ? 'click' : undefined;\n\n\t        // Event should happen on canvas\n\t        if ( event && event.target && !event.target.classList.contains( 'panolens-canvas' ) ) { return; }\n\n\t        event.preventDefault();\n\n\t        if ( event.changedTouches && event.changedTouches.length === 1 ) {\n\n\t            onTarget = this.onTap( { clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type );\n\t\t\t\n\t        } else {\n\n\t            onTarget = this.onTap( event, type );\n\n\t        }\n\n\t        this.userMouse.type = 'none';\n\n\t        if ( onTarget ) { \n\n\t            return; \n\n\t        }\n\n\t        if ( type === 'click' ) {\n\n\t            const { options: { autoHideInfospot, autoHideControlBar }, panorama, toggleControlBar } = this;\n\n\t            if ( autoHideInfospot && panorama ) {\n\n\t                panorama.toggleInfospotVisibility();\n\n\t            }\n\n\t            if ( autoHideControlBar ) {\n\n\t                toggleControlBar();\n\n\t            }\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * On tap eveny frame\n\t     * @param {MouseEvent} event \n\t     * @param {string} type \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onTap: function ( event, type ) {\n\n\t        const { left, top } = this.container.getBoundingClientRect();\n\t        const { clientWidth, clientHeight } = this.container;\n\n\t        this.raycasterPoint.x = ( ( event.clientX - left ) / clientWidth ) * 2 - 1;\n\t        this.raycasterPoint.y = - ( ( event.clientY - top ) / clientHeight ) * 2 + 1;\n\n\t        this.raycaster.setFromCamera( this.raycasterPoint, this.camera );\n\n\t        // Return if no panorama \n\t        if ( !this.panorama ) { \n\n\t            return; \n\n\t        }\n\n\t        // output infospot information\n\t        if ( event.type !== 'mousedown' && this.touchSupported || this.OUTPUT_INFOSPOT ) { \n\n\t            this.outputPosition(); \n\n\t        }\n\n\n\t        const intersects = this.raycaster.intersectObjects( this.panorama.children, true );\n\t        const intersect_entity = this.getConvertedIntersect( intersects );\n\t        const intersect = ( intersects.length > 0 ) ? intersects[0].object : undefined;\n\n\t        if ( this.userMouse.type === 'mouseup'  ) {\n\n\t            if ( intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent ) {\n\n\t                this.pressEntityObject.dispatchEvent( { type: 'pressstop-entity', mouseEvent: event } );\n\n\t            }\n\n\t            this.pressEntityObject = undefined;\n\n\t        }\n\n\t        if ( this.userMouse.type === 'mouseup'  ) {\n\n\t            if ( intersect && this.pressObject === intersect && this.pressObject.dispatchEvent ) {\n\n\t                this.pressObject.dispatchEvent( { type: 'pressstop', mouseEvent: event } );\n\n\t            }\n\n\t            this.pressObject = undefined;\n\n\t        }\n\n\t        if ( type === 'click' ) {\n\n\t            this.panorama.dispatchEvent( { type: 'click', intersects: intersects, mouseEvent: event } );\n\n\t            if ( intersect_entity && intersect_entity.dispatchEvent ) {\n\n\t                intersect_entity.dispatchEvent( { type: 'click-entity', mouseEvent: event } );\n\n\t            }\n\n\t            if ( intersect && intersect.dispatchEvent ) {\n\n\t                intersect.dispatchEvent( { type: 'click', mouseEvent: event } );\n\n\t            }\n\n\t        } else {\n\n\t            this.panorama.dispatchEvent( { type: 'hover', intersects: intersects, mouseEvent: event } );\n\n\t            if ( ( this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity )\n\t\t\t\t\t|| ( this.hoverObject && intersects.length === 0 ) ){\n\n\t                if ( this.hoverObject.dispatchEvent ) {\n\n\t                    this.hoverObject.dispatchEvent( { type: 'hoverleave', mouseEvent: event } );\n\n\t                    this.reticle.end();\n\n\t                }\n\n\t                this.hoverObject = undefined;\n\n\t            }\n\n\t            if ( intersect_entity && intersects.length > 0 ) {\n\n\t                if ( this.hoverObject !== intersect_entity ) {\n\n\t                    this.hoverObject = intersect_entity;\n\n\t                    if ( this.hoverObject.dispatchEvent ) {\n\n\t                        this.hoverObject.dispatchEvent( { type: 'hoverenter', mouseEvent: event } );\n\n\t                        // Start reticle timer\n\t                        if ( this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle ) {\n\t                            this.reticle.start( this.onTap.bind( this, event, 'click' ) );\n\t                        }\n\n\t                    }\n\n\t                }\n\n\t                if ( this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity ) {\n\n\t                    this.pressEntityObject = intersect_entity;\n\n\t                    if ( this.pressEntityObject.dispatchEvent ) {\n\n\t                        this.pressEntityObject.dispatchEvent( { type: 'pressstart-entity', mouseEvent: event } );\n\n\t                    }\n\n\t                }\n\n\t                if ( this.userMouse.type === 'mousedown' && this.pressObject != intersect ) {\n\n\t                    this.pressObject = intersect;\n\n\t                    if ( this.pressObject.dispatchEvent ) {\n\n\t                        this.pressObject.dispatchEvent( { type: 'pressstart', mouseEvent: event } );\n\n\t                    }\n\n\t                }\n\n\t                if ( this.userMouse.type === 'mousemove' || this.options.enableReticle ) {\n\n\t                    if ( intersect && intersect.dispatchEvent ) {\n\n\t                        intersect.dispatchEvent( { type: 'hover', mouseEvent: event } );\n\n\t                    }\n\n\t                    if ( this.pressEntityObject && this.pressEntityObject.dispatchEvent ) {\n\n\t                        this.pressEntityObject.dispatchEvent( { type: 'pressmove-entity', mouseEvent: event } );\n\n\t                    }\n\n\t                    if ( this.pressObject && this.pressObject.dispatchEvent ) {\n\n\t                        this.pressObject.dispatchEvent( { type: 'pressmove', mouseEvent: event } );\n\n\t                    }\n\n\t                }\n\n\t            }\n\n\t            if ( !intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent ) {\n\n\t                this.pressEntityObject.dispatchEvent( { type: 'pressstop-entity', mouseEvent: event } );\n\n\t                this.pressEntityObject = undefined;\n\n\t            }\n\n\t            if ( !intersect && this.pressObject && this.pressObject.dispatchEvent ) {\n\n\t                this.pressObject.dispatchEvent( { type: 'pressstop', mouseEvent: event } );\n\n\t                this.pressObject = undefined;\n\n\t            }\n\n\t        }\n\n\t        // Infospot handler\n\t        if ( intersect && intersect instanceof Infospot ) {\n\n\t            this.infospot = intersect;\n\t\t\t\t\n\t            if ( type === 'click' ) {\n\n\t                return true;\n\n\t            }\n\t\t\t\t\n\n\t        } else if ( this.infospot ) {\n\n\t            this.hideInfospot();\n\n\t        }\n\n\t        // Auto rotate\n\t        if ( this.options.autoRotate && this.userMouse.type !== 'mousemove' ) {\n\n\t            // Auto-rotate idle timer\n\t            clearTimeout( this.autoRotateRequestId );\n\n\t            if ( this.control === this.OrbitControls ) {\n\n\t                this.OrbitControls.autoRotate = false;\n\t                this.autoRotateRequestId = window.setTimeout( this.enableAutoRate.bind( this ), this.options.autoRotateActivationDuration );\n\n\t            }\n\n\t        }\t\t\n\n\t    },\n\n\t    /**\n\t     * Get converted intersect\n\t     * @param {array} intersects \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    getConvertedIntersect: function ( intersects ) {\n\n\t        let intersect;\n\n\t        for ( let i = 0; i < intersects.length; i++ ) {\n\n\t            if ( intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough ) {\n\n\t                if ( intersects[i].object.entity && intersects[i].object.entity.passThrough ) {\n\t                    continue;\n\t                } else if ( intersects[i].object.entity && !intersects[i].object.entity.passThrough ) {\n\t                    intersect = intersects[i].object.entity;\n\t                    break;\n\t                } else {\n\t                    intersect = intersects[i].object;\n\t                    break;\n\t                }\n\n\t            }\n\n\t        }\n\n\t        return intersect;\n\n\t    },\n\n\t    /**\n\t     * Hide infospot\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    hideInfospot: function () {\n\n\t        if ( this.infospot ) {\n\n\t            this.infospot.onHoverEnd();\n\n\t            this.infospot = undefined;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Toggle control bar\n\t     * @memberOf Viewer\n\t     * @instance\n\t     * @fires Viewer#control-bar-toggle\n\t     */\n\t    toggleControlBar: function () {\n\n\t        const { widget } = this;\n\n\t        /**\n\t         * Toggle control bar event\n\t         * @type {object}\n\t         * @event Viewer#control-bar-toggle\n\t         */\n\t        if ( widget ) {\n\n\t            widget.dispatchEvent( { type: 'control-bar-toggle' } );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * On key down\n\t     * @param {KeyboardEvent} event \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onKeyDown: function ( event ) {\n\n\t        if ( this.options.output && this.options.output !== 'none' && event.key === 'Control' ) {\n\n\t            this.OUTPUT_INFOSPOT = true;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * On key up\n\t     * @param {KeyboardEvent} event \n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onKeyUp: function () {\n\n\t        this.OUTPUT_INFOSPOT = false;\n\n\t    },\n\n\t    /**\n\t     * Update control and callbacks\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    update: function () {\n\n\t        Tween.update();\n\n\t        this.updateCallbacks.forEach( function( callback ){ callback(); } );\n\n\t        this.control.update();\n\n\t        this.scene.traverse( function( child ){\n\t            if ( child instanceof Infospot \n\t\t\t\t\t&& child.element \n\t\t\t\t\t&& ( this.hoverObject === child \n\t\t\t\t\t\t|| child.element.style.display !== 'none' \n\t\t\t\t\t\t|| (child.element.left && child.element.left.style.display !== 'none')\n\t\t\t\t\t\t|| (child.element.right && child.element.right.style.display !== 'none') ) ) {\n\t                if ( this.checkSpriteInViewport( child ) ) {\n\t                    const { x, y } = this.getScreenVector( child.getWorldPosition( new THREE.Vector3() ) );\n\t                    child.translateElement( x, y );\n\t                } else {\n\t                    child.onDismiss();\n\t                }\n\t\t\t\t\t\n\t            }\n\t        }.bind( this ) );\n\n\t    },\n\n\t    /**\n\t     * Rendering function to be called on every animation frame\n\t     * Render reticle last\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    render: function () {\n\n\t        if ( this.mode === MODES.CARDBOARD || this.mode === MODES.STEREO ) {\n\n\t            this.renderer.clear();\n\t            this.effect.render( this.scene, this.camera );\n\t            this.effect.render( this.sceneReticle, this.camera );\n\t\t\t\t\n\n\t        } else {\n\n\t            this.renderer.clear();\n\t            this.renderer.render( this.scene, this.camera );\n\t            this.renderer.clearDepth();\n\t            this.renderer.render( this.sceneReticle, this.camera );\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Animate\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    animate: function () {\n\n\t        this.requestAnimationId = window.requestAnimationFrame( this.animate.bind( this ) );\n\n\t        this.onChange();\n\n\t    },\n\n\t    /**\n\t     * On change\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onChange: function () {\n\n\t        this.update();\n\t        this.render();\n\n\t    },\n\n\t    /**\n\t     * Register mouse and touch event on container\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    registerMouseAndTouchEvents: function () {\n\n\t        const options = { passive: false };\n\n\t        this.container.addEventListener( 'mousedown' , \tthis.HANDLER_MOUSE_DOWN, options );\n\t        this.container.addEventListener( 'mousemove' , \tthis.HANDLER_MOUSE_MOVE, options );\n\t        this.container.addEventListener( 'mouseup'\t , \tthis.HANDLER_MOUSE_UP  , options );\n\t        this.container.addEventListener( 'touchstart', \tthis.HANDLER_MOUSE_DOWN, options );\n\t        this.container.addEventListener( 'touchend'  , \tthis.HANDLER_MOUSE_UP  , options );\n\n\t    },\n\n\t    /**\n\t     * Unregister mouse and touch event on container\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    unregisterMouseAndTouchEvents: function () {\n\n\t        this.container.removeEventListener( 'mousedown' ,  this.HANDLER_MOUSE_DOWN, false );\n\t        this.container.removeEventListener( 'mousemove' ,  this.HANDLER_MOUSE_MOVE, false );\n\t        this.container.removeEventListener( 'mouseup'\t,  this.HANDLER_MOUSE_UP  , false );\n\t        this.container.removeEventListener( 'touchstart',  this.HANDLER_MOUSE_DOWN, false );\n\t        this.container.removeEventListener( 'touchend'  ,  this.HANDLER_MOUSE_UP  , false );\n\n\t    },\n\n\t    /**\n\t     * Register reticle event\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    registerReticleEvent: function () {\n\n\t        this.addUpdateCallback( this.HANDLER_TAP );\n\n\t    },\n\n\t    /**\n\t     * Unregister reticle event\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    unregisterReticleEvent: function () {\n\n\t        this.removeUpdateCallback( this.HANDLER_TAP );\n\n\t    },\n\n\t    /**\n\t     * Update reticle event\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    updateReticleEvent: function () {\n\n\t        const clientX = this.container.clientWidth / 2 + this.container.offsetLeft;\n\t        const clientY = this.container.clientHeight / 2;\n\n\t        this.removeUpdateCallback( this.HANDLER_TAP );\n\t        this.HANDLER_TAP = this.onTap.bind( this, { clientX, clientY } );\n\t        this.addUpdateCallback( this.HANDLER_TAP );\n\n\t    },\n\n\t    /**\n\t     * Register container and window listeners\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    registerEventListeners: function () {\n\n\t        // Resize Event\n\t        window.addEventListener( 'resize' , this.HANDLER_WINDOW_RESIZE, true );\n\n\t        // Keyboard Event\n\t        window.addEventListener( 'keydown', this.HANDLER_KEY_DOWN, true );\n\t        window.addEventListener( 'keyup'  , this.HANDLER_KEY_UP\t , true );\n\n\t    },\n\n\t    /**\n\t     * Unregister container and window listeners\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    unregisterEventListeners: function () {\n\n\t        // Resize Event\n\t        window.removeEventListener( 'resize' , this.HANDLER_WINDOW_RESIZE, true );\n\n\t        // Keyboard Event\n\t        window.removeEventListener( 'keydown', this.HANDLER_KEY_DOWN, true );\n\t        window.removeEventListener( 'keyup'  , this.HANDLER_KEY_UP  , true );\n\n\t    },\n\n\t    /**\n\t     * Dispose all scene objects and clear cache\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    dispose: function () {\n\n\t        this.tweenLeftAnimation.stop();\n\t        this.tweenUpAnimation.stop();\n\n\t        // Unregister dom event listeners\n\t        this.unregisterEventListeners();\n\n\t        // recursive disposal on 3d objects\n\t        function recursiveDispose ( object ) {\n\n\t            for ( let i = object.children.length - 1; i >= 0; i-- ) {\n\n\t                recursiveDispose( object.children[i] );\n\t                object.remove( object.children[i] );\n\n\t            }\n\n\t            if ( object instanceof Panorama || object instanceof Infospot ) {\n\n\t                object.dispose();\n\t                object = null;\n\n\t            } else if ( object.dispatchEvent ){\n\n\t                object.dispatchEvent( 'dispose' );\n\n\t            }\n\n\t        }\n\n\t        recursiveDispose( this.scene );\n\n\t        // dispose widget\n\t        if ( this.widget ) {\n\n\t            this.widget.dispose();\n\t            this.widget = null;\n\n\t        }\n\n\t        // clear cache\n\t        if ( THREE.Cache && THREE.Cache.enabled ) {\n\n\t            THREE.Cache.clear();\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Destroy viewer by disposing and stopping requestAnimationFrame\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    destroy: function () {\n\n\t        this.dispose();\n\t        this.render();\n\t        window.cancelAnimationFrame( this.requestAnimationId );\t\t\n\n\t    },\n\n\t    /**\n\t     * On panorama dispose\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    onPanoramaDispose: function ( panorama ) {\n\n\t        if ( panorama instanceof VideoPanorama ) {\n\n\t            this.hideVideoWidget();\n\n\t        }\n\n\t        if ( panorama === this.panorama ) {\n\n\t            this.panorama = null;\n\n\t        }\n\n\t    },\n\n\t    /**\n\t     * Load ajax call\n\t     * @param {string} url - URL to be requested\n\t     * @param {function} [callback] - Callback after request completes\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    loadAsyncRequest: function ( url, callback = () => {} ) {\n\n\t        const request = new window.XMLHttpRequest();\n\t        request.onloadend = function ( event ) {\n\t            callback( event );\n\t        };\n\t        request.open( 'GET', url, true );\n\t        request.send( null );\n\n\t    },\n\n\t    /**\n\t     * View indicator in upper left\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    addViewIndicator: function () {\n\n\t        const scope = this;\n\n\t        function loadViewIndicator ( asyncEvent ) {\n\n\t            if ( asyncEvent.loaded === 0 ) return;\n\n\t            const viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n\t            viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px';\n\t            viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px';\n\t            viewIndicatorDiv.style.position = 'absolute';\n\t            viewIndicatorDiv.style.top = '10px';\n\t            viewIndicatorDiv.style.left = '10px';\n\t            viewIndicatorDiv.style.opacity = '0.5';\n\t            viewIndicatorDiv.style.cursor = 'pointer';\n\t            viewIndicatorDiv.id = 'panolens-view-indicator-container';\n\n\t            scope.container.appendChild( viewIndicatorDiv );\n\n\t            const indicator = viewIndicatorDiv.querySelector( '#indicator' );\n\t            const setIndicatorD = function () {\n\n\t                scope.radius = scope.viewIndicatorSize * 0.225;\n\t                scope.currentPanoAngle = scope.camera.rotation.y - THREE.Math.degToRad( 90 );\n\t                scope.fovAngle = THREE.Math.degToRad( scope.camera.fov ) ;\n\t                scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n\t                scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n\t                scope.leftX = scope.radius * Math.cos( scope.leftAngle );\n\t                scope.leftY = scope.radius * Math.sin( scope.leftAngle );\n\t                scope.rightX = scope.radius * Math.cos( scope.rightAngle );\n\t                scope.rightY = scope.radius * Math.sin( scope.rightAngle );\n\t                scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY;\n\n\t                if ( scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius ) {\n\n\t                    indicator.setAttribute( 'd', scope.indicatorD );\n\n\t                }\n\n\t            };\n\n\t            scope.addUpdateCallback( setIndicatorD );\n\n\t            const indicatorOnMouseEnter = function () {\n\n\t                this.style.opacity = '1';\n\n\t            };\n\n\t            const indicatorOnMouseLeave = function () {\n\n\t                this.style.opacity = '0.5';\n\n\t            };\n\n\t            viewIndicatorDiv.addEventListener( 'mouseenter', indicatorOnMouseEnter );\n\t            viewIndicatorDiv.addEventListener( 'mouseleave', indicatorOnMouseLeave );\n\t        }\n\n\t        this.loadAsyncRequest( DataImage.ViewIndicator, loadViewIndicator );\n\n\t    },\n\n\t    /**\n\t     * Append custom control item to existing control bar\n\t     * @param {object} [option={}] - Style object to overwirte default element style. It takes 'style', 'onTap' and 'group' properties.\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    appendControlItem: function ( option ) {\n\n\t        const item = this.widget.createCustomItem( option );\t\t\n\n\t        if ( option.group === 'video' ) {\n\n\t            this.widget.videoElement.appendChild( item );\n\n\t        } else {\n\n\t            this.widget.barElement.appendChild( item );\n\n\t        }\n\n\t        return item;\n\n\t    },\n\n\t    /**\n\t     * Clear all cached files\n\t     * @memberOf Viewer\n\t     * @instance\n\t     */\n\t    clearAllCache: function () {\n\n\t        THREE.Cache.clear();\n\n\t    }\n\n\t} );\n\n\tif ( THREE.REVISION != THREE_REVISION ) {\n\n\t    console.warn( `three.js version is not matched. Please consider use the target revision ${THREE_REVISION}` );\n\n\t}\n\n\t/**\n\t * Panolens.js\n\t * @author pchen66\n\t * @namespace PANOLENS\n\t */\n\twindow.TWEEN = Tween;\n\n\texports.BasicPanorama = BasicPanorama;\n\texports.CONTROLS = CONTROLS;\n\texports.CameraPanorama = CameraPanorama;\n\texports.CubePanorama = CubePanorama;\n\texports.CubeTextureLoader = CubeTextureLoader;\n\texports.DataImage = DataImage;\n\texports.EmptyPanorama = EmptyPanorama;\n\texports.GoogleStreetviewPanorama = GoogleStreetviewPanorama;\n\texports.ImageLittlePlanet = ImageLittlePlanet;\n\texports.ImageLoader = ImageLoader;\n\texports.ImagePanorama = ImagePanorama;\n\texports.Infospot = Infospot;\n\texports.Hotspot = Hotspot;\n\texports.LittlePlanet = LittlePlanet;\n\texports.MODES = MODES;\n\texports.Media = Media;\n\texports.Panorama = Panorama;\n\texports.REVISION = REVISION;\n\texports.Reticle = Reticle;\n\texports.THREE_REVISION = THREE_REVISION;\n\texports.THREE_VERSION = THREE_VERSION;\n\texports.TextureLoader = TextureLoader;\n\texports.VERSION = VERSION;\n\texports.VideoPanorama = VideoPanorama;\n\texports.Viewer = Viewer;\n\texports.Widget = Widget;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAACLUlEQVRo3u2ZPS8EQRjHf85LISovifcSPZEo+Q5CiA8g0a9PgB45olZJKLw0kvsAQiMaOlwUXiqKOwWK2U0ua4a5vWdnVtw/+Td3z97+nmfnZmafgbrq+t9qEPqdRmAcmARGgRGgB2gLv38DHoBr4AIoAGfAh+8CDABrQBH4rNL3wCrQ7wO8C9gGygnA4y4DeaDTFfwc8CIAHvczMJsmeDOwkwJ43FvhvUTVCpw4gI98HN5TrPIu4SOfAi0SCbgYNibna4Wf9wgfeSYpfAfwlIEEXkg4xW5nAD7yZrXw/cgsUlIuA4M60JwhgSWEZgAhtQCLtsE51D7Fd9XjLqI2jb9qIgOwJo/rqh3XpOSzF9aUTQJjvil/0KhNAkOGi9+BAOgLvRx+5jJ22CZL01Y50MQGjmOfbBIwzf89mthux7GleKBpHdBJ9/7c6Dj2m3QJvBliFyw/SzP21SapK8zLeQD0hg4wD7e0Yi9tEtg3XJwF78VhdUPo3CZLT/rGpkug4JvyB1mx5YA7/A+XuG91Bdc9gQ9g13epNdqlilZk1l5oSqhtRlXKZwA88nqSR9ZONl7qn6mhbzqbgQSmk8JH2vIIv1ErPKiN1YEH+COgSSIBUI3WY4fwhwg2dyM142Zm2pCsvE4zpDM7PSLwh7VVB6rdVxIAL6Hm+XZX8JXqQx3UJdk73QErJFhhKyV1zJpDtWOmUK2P4RCs8pi1CNygtsQF1HGr92PWuur66/oCexhw1JCuN5cAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMTEtMTdUMjE6MTA6MjYrMDA6MDAP7Xq1AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTExLTE3VDIxOjEwOjI2KzAwOjAwfrDCCQAAAABJRU5ErkJggg==\""],"sourceRoot":""}